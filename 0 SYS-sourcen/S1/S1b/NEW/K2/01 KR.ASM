	TITLE	'Kassettengrundroutinen'	PAGE;****************************************************************;*               Anschlussroutinen für BAMOS/Emulator           *;* OS - Version  -----------------------------------------------*;*               Programmierer: Marcus Herbote                  *;* V 1 . 2       -----------------------------------------------*;*               Stand        : 18.November 2022                *;****************************************************************;	PN	KR;---------------------------------------------------------------------;        Kassettengrundroutinen;---------------------------------------------------------------------	DW	$	DB	'K1RE'KR.GR1:	LD	A,01H	JR	KR.GR3;	DW	$	DB	'K2RE'KR.GR2:	LD	A,02HKR.GR3:	CALL	U1.KTINI	LD	(IX+3),A	CALL	UR.KRE	RET;-------------------------------------------------------------------	DW	$	DB	'K1L+'	CALL	GR1	JR	$+11;	DW	$	DB	'K2L+'	CALL	GR2	LD	HL,1	; IX + 8 := 1 / Anzahl BM	CALL	XY.STDX	DB	7	CALL	UR.KLV	RET;---------------------------------------------------------------------	DW	$	DB	'K1L-'	CALL	GR1	JR	$+11;	DW	$	DB	'K2L-'	CALL	GR2	LD	HL,1	; IX + 8 := 1 / Anzahl BM	CALL	XY.STDX	DB	7	CALL	UR.KLR	RET;---------------------------------------------------------------------	DW	$	DB	'K1R+'	CALL	GR1	JR	$+11;	DW	$	DB	'K2R+'	CALL	GR2	CALL	UR.KBV	RET;--------------------------------------------------------------------	DW	$	DB	'K1R-'	CALL	GR1	JR	$+11;	DW	$	DB	'K2R-'	CALL	GR2	CALL	UR.KBR	RET;--------------------------------------------------------------------	DW	$	DB	'K1RW'	CALL	GR1	JR	$+11;	DW	$	DB	'K2RW'	CALL	GR2	CALL	UR.KRW	JR	CKRA;---------------------------------------------------------------------	DW	$	DB	'K1RA'	CALL	GR1	JR	$+11;	DW	$	DB	'K2RA'	CALL	GR2KR.CKRA:	CALL	UR.KRA	RET;---------------------------------------------------------------------KR.KARO:;	LD	(IX+5),LOW(EINTR)	;Wiedereintrittspunkt;	LD	(IX+6),HIGH(EINTR)	CALL	UE.BRKMB	;AUFRUF PHYS.KASS.ROUTINE;	HALT;	JR	$-1;KR.EINTR:;	INC	SP;	INC	SP	RET;----------------------------------------------------------------------KR.VORSP:	LD	DE,UE.BWSA+327H	CALL	UC.CVDB	LD	B,L	LD	A,'F'	LD	(UB.PAR2),A	CALL	UR.KRE	CALL	UR.POSIK	RET;---------------------------------------------------------------------	DW	$	DB	'XKA1'	CALL	GR1	JR	$+11;	DW	$	DB	'XKA2'	CALL	GR2	CALL	VORSP	CALL	FD.FDINP	CALL	UR.KRW	CALL	UR.KRA	RET;----------------------------------------------------------------------	DW	$	DB	'YKA1'	CALL	GR1	JR	$+11;	DW	$	DB	'YKA2'	CALL	GR2	CALL	UR.KRE	LD	DE,UE.BWSA+327H	CALL	UC.CVDB	DEC	L	JR	Z,$+11	LD	(IX+10),L	CALL	TYPT	CALL	UR.KLV	CALL	FD.FDOUT	RET;---------------------------------------------------------------------------	DW	$	DB	'K1CL'	CALL	GR1	JR	$+11;	DW	$	DB	'K2CL'	CALL	GR2	CALL	UR.KBM	CALL	UR.KSL	CALL	UR.KRW	CALL	UR.KRA	JP	UE.SYSTB;--------------------------------------------------------------------KR.TYPT:	INC	DE	LD	A,(DE)	LD	(UB.PAR2),A	RET;--------------------------------------------------------------------;	END