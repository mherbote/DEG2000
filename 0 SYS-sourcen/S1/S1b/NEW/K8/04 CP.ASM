	TITLE	'Komprimierung'	PAGE;	PN	CP;**********************************************************************;*       COMPR:    Komprimierung                                      *;*                 EDIT - F/Q-Format   --->  MRES20 - Quelltextformat *;**********************************************************************			;CP.COMPR	EQU	$	; A  Uebergabe/-nahme Zeichen			; HL: Status von COMPR			; B:  dekr. Tabulator-Zaehler			;-------------------------------			; OUTA: Einzelzeichen-Ausgabe			;         (Zeichen in Reg. A);----------------------------------------------------------------------			;	CP	1EH	; NL ?	JR	Z,CP.NL	JP	(HL)			;;        --------------------------------------------------------------			; Status "New-Line"			;-------------------------------CP.NL:	CALL	XY.INCDX	;         Satz-Zaehler + 1	DB	19	LD	B,3	;         noch 3 TAB erlaubt	LD	A,0AH	;         MRES20-NL	JR	CP.OUTT			;;        --------------------------------------------------------------			; Status "String"			;-------------------------------CP.STRNG:	CP	27H	;         Apostroph	JR	NZ,CP.OUT			;CP.OUTT:	LD	HL,CP.TEXT	;         --> Status "Text"	JR	CP.OUT			;;        --------------------------------------------------------------			; Status "Space"			;-------------------------------CP.SPACE:	CP	' '	RET	Z	CP	09H	;         Tabulator	RET	Z	LD	HL,CP.TEXT	;         ---> Status "Text"	JR	CP.TEXT+8			;;        --------------------------------------------------------------			; Status "Text"			;-------------------------------CP.TEXT:	CP	' '	JR	Z,CP.TAB	CP	09H	;         Tabulator	JR	Z,CP.TAB	CP	';'	JR	Z,CP.SOKOM	CP	27H	;         Apostroph	JR	Z,CP.SOSTR			;;        --------------------------------------------------------------			; Status "Kom"			;-------------------------------CP.KOM	EQU	$			;;        --------------------------------------------------------------			; Einzelzeichen-Ausgabe u. Ret.			;-------------------------------CP.OUT:	CALL	UK.PUTK	EXX	DEC	BC	EXX	RET			;;        --------------------------------------------------------------			; Start "Kommentar"			;-------------------------------CP.SOKOM:    LD	A,B	;         0 oder 3 TAB vorher    CP   3    JR   Z,$+12    OR   A    JR   Z,$+9      ;         ---+    LD   A,09H      ;         <-+|    CALL CP.OUT     ;           ||    DJNZ $-5        ;         --+|    LD   A,';'      ;         <--+    LD   HL,CP.KOM    JR   CP.OUT			;;        --------------------------------------------------------------			; Start "String"			;-------------------------------CP.SOSTR:	LD	HL,CP.STRNG	JR	CP.OUT			;;        --------------------------------------------------------------			; Tabulator-Behandlung			;-------------------------------CP.TAB:	LD	A,B	OR	A	LD	A,' '	JR	Z,CP.OUT	DEC	B	LD	A,09H	;         Tabulator MRES20	LD	HL,CP.SPACE	JR	CP.OUT			;;**********************************************************************			;CP.INIT:	LD	B,3	; Initialisierung COMPR	LD	HL,CP.TEXT	RET			;;**********************************************************************;	END