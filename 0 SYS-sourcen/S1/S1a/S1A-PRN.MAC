'Definitionen zum Betriebssystem'	MACRO-80 3.44	09-Dec-81	PAGE	1


                                	TITLE	'Definitionen zum Betriebssystem'
                                	PAGE	87
'Definitionen zum Betriebssystem'	MACRO-80 3.44	09-Dec-81	PAGE	1-1


                                
  595C                          UR.MIMO   EQU   0595CH
  5699                          UC.CVABX  EQU   05699H
  56A3                          UC.CVBX   EQU   UC.CVABX + 0000AH
  56C8                          UC.CVAXB  EQU   UC.CVABX + 0002FH
  571C                          UC.CVBD2  EQU   UC.CVABX + 00083H
  5761                          UC.CVDB   EQU   UC.CVABX + 000C8H
  67DF                          KH.BILO   EQU   067DFH
                                
                                	PAGE	87
'Definitionen zum Betriebssystem'	MACRO-80 3.44	09-Dec-81	PAGE	1-2


                                
                         C      	INCLUDE SD01.MAC
                         C      	TITLE	'Definitionen zum Betriebssystem'
                         C      ;	PN	SD01.Definitionen
                         C      ;****************************************************************
                         C      ;*                  Definitionen zum Betriebssystem             *
                         C      ;*                  D E G 2 0 0 0    Version 1 . 2              *
                         C      ;****************************************************************
  0010                   C      SD.GENE    EQU  16            ;Geraetevariante
                         C                                    ;  1 ...  TAP2/TAP3
                         C                                    ;  2 ...  MiniTAP mit TRAM
                         C                                    ;  4 ...  MiniTAP mit OPS ZWG
                         C                                    ;  8 ...  MiniTAP mit OPS ROBOTRON
                         C                                    ; 16 ...  DEG2000 Emulator
                         C      
  0000                   C      SD.SYSTA   EQU  0             ;Startadresse
  3000                   C      SD.BWSA    EQU  03000H        ;Anf.adr. Bildwiederholspeicher
  0C00                   C      SD.RAM     EQU  00C00H        ;Anf. ArbeitsRAM
  0020                   C      SD.SPACE   EQU  020H
  001E                   C      SD.NL      EQU  01EH          ;NEW LINE
  0009                   C      SD.TAB     EQU  009H          ;Tabulator
  0002                   C      SD.ZEIT1   EQU  2             ;Zeitkonst. Fkt.wdhlg.
  0010                   C      SD.ZEIT2   EQU  16            ;    ''      ''   ''
  0080                   C      SD.CTCK0   EQU  080H          ;CTC-Adresse Kanal 0
  0002                   C      SD.CTCKA   EQU  2             ;CTC-Kanal 2 (fuer KMBG Robotron)
  004F                   C      SD.AMB     EQU  04FH          ;Ausgabeadresse der   A M B
  0028                   C      SD.SPST    EQU  028H          ;Adresse der Speicherblocksteuerung
                         C      
                         C      ;DEFINITIONEN ZUM EDITOR
                         C      
  1000                   C      SD.EDITA   EQU  01000H        ;Startadresse
  8000                   C      SD.VPI     EQU  08000H        ;Vorbereich  Eingabepuffer
  8010                   C      SD.PFFI    EQU  08010H        ;            Eingabepuffer
  8410                   C      SD.NPI     EQU  08410H        ;Nachbereich Eingabepuffer
  8420                   C      SD.PFFA    EQU  08420H        ;            Ausgabepuffer
  8820                   C      SD.NPA     EQU  08820H        ;Nachbereich Ausgabepuffer
  0F70                   C      SD.DEAT    EQU  00F70H        ;Dynamische  E/A-Tabelle (RAM)
  8830                   C      SD.TPA     EQU  08830H        ;Anf.adr. Textpuffer
  FBFF                   C      SD.TPE     EQU  0FBFFH        ;Endeadr. Textpuffer
  2C00                   C      SD.BPA     EQU  SD.BWSA-400H  ;Anf.adr. Bildpuffer
  0030                   C      SD.PSANZ   EQU  48            ;Anzahl programm. PF-Tasten  ; 28 alt
  000A                   C      SD.TABZA   EQU  10            ;Tabulatorenzahl
  0000                   C      SD.QTAB1   EQU  0             ;1. Tabulator
  0009                   C      SD.QTAB2   EQU  9             ;2.    ''
  000F                   C      SD.QTAB3   EQU  15            ;3.    ''
  0022                   C      SD.QTAB4   EQU  34            ;4.    ''
                         C      
                         C      			;Stand: 28.Januar 85 - K EAW/wfvm..MSH
                         C      
                         C      ;	END
                         C      	INCLUDE SM01.MAC
                         C      	TITLE	'Systemvariablen'
                         C      	PAGE
'Systemvariablen'	MACRO-80 3.44	09-Dec-81	PAGE	1-3


                         C      
                         C      ;	PN	SM01.Variablen___Version_1.2
                         C      ;****************************************************************
                         C      ;*                  S y s t e m v a r i a b l e n               *
                         C      ;*                  V e r s i o n   1 . 2                       *
                         C      ;****************************************************************
                         C                  ORG   0
  0000*                  C                  DEFS  0C00H,0FFH     ;ZRE --- ROM ab 0000H
  0C00*                  C                  DEFS  0400H,000H     ;    --- RAM ab 0C00H
  1000*                  C                  DEFS  1800H,0FFH     ;OFS --- ROM ab 1000H
  2800*                  C                  DEFS  0800H,000H     ;    --- RAM ab 2800H
  3000*                  C                  DEFS  1000H,SD.SPACE ;ABS --- RAM ab 3000H
  4000*                  C                  DEFS  4000H,0FFH     ;PFS --- ROM ab 4000H
                         C      ;           DEFS  4000H,000H     ;OPS --- RAM ab 8000H
                         C      ;           DEFS  4000H,000H     ;OPS --- RAM ab C000H
  8000*                  C      SM.ENDE     EQU   $
                         C      ;****************************************************************
                         C      
  0CE0                   C      SM.STACK    EQU   SD.RAM+100H-20H   ;STACK Anfang ;-20H hizugefuegt
                         C      
                         C                  ORG   SM.STACK
  0CE0*                  C      SM.FKTAB:   DEFS  0A0H,0         ;Tabelle Fkt. fuer Tastaturroutine
  0000                   C      SM.FET2     EQU   00
  0001                   C      SM.FET1     EQU   01
  0002                   C      SM.FNL      EQU   02
  0003                   C      SM.FDOWN    EQU   03
  0004                   C      SM.FPQ      EQU   04
  0005                   C      SM.FLEFT    EQU   05
  0006                   C      SM.FPOS1    EQU   06
  0007                   C      SM.FRIGHT   EQU   07
  0008                   C      SM.FLTAB    EQU   08
  0009                   C      SM.FUP      EQU   09
  000A                   C      SM.FRTAB    EQU   10
  000B                   C      SM.FINSMOD  EQU   11
  000C                   C      SM.FDEL     EQU   12
  000D                   C      SM.FINSLIN  EQU   13
  000E                   C      SM.FDELLIN  EQU   14
  000F                   C      SM.FTABS    EQU   15
  0010                   C      SM.FTABL    EQU   16
  0011                   C      SM.FCI      EQU   17
  0012                   C      SM.FM       EQU   18
  0013                   C      SM.FRESET   EQU   19
  0014                   C      SM.FESC     EQU   20
  0015                   C      SM.FCTRL    EQU   21
  0016                   C      SM.FCE      EQU   22
  0017                   C      SM.F00      EQU   23
  0018                   C      SM.F000     EQU   24
  0019                   C      SM.FNQ      EQU   25
  001A                   C      SM.FSYS     EQU   26
  001B                   C      SM.FEND     EQU   27
  001C                   C      SM.FABS     EQU   28
                         C      
  0014                   C      SM.FE0      EQU   20
  001E                   C      SM.FE1      EQU   30
  001F                   C      SM.FE2      EQU   31
  0020                   C      SM.FE3      EQU   32
                         C      
  0021                   C      SM.FP01     EQU   33
  0022                   C      SM.FP02     EQU   34
  0023                   C      SM.FP03     EQU   35
  0024                   C      SM.FP04     EQU   36
  0025                   C      SM.FP05     EQU   37
  0026                   C      SM.FP06     EQU   38
  0027                   C      SM.FP07     EQU   39
  0028                   C      SM.FP08     EQU   40
  0029                   C      SM.FP09     EQU   41
  002A                   C      SM.FP10     EQU   42
  002B                   C      SM.FP11     EQU   43
  002C                   C      SM.FP12     EQU   44
                         C      
  002D                   C      SM.FP13     EQU   45
  002E                   C      SM.FP14     EQU   46
  002F                   C      SM.FP15     EQU   47
  0030                   C      SM.FP16     EQU   48
  0031                   C      SM.FP17     EQU   49
  0032                   C      SM.FP18     EQU   50
  0033                   C      SM.FP19     EQU   51
  0034                   C      SM.FP20     EQU   52
  0035                   C      SM.FP21     EQU   53
  0036                   C      SM.FP22     EQU   54
  0037                   C      SM.FP23     EQU   55
  0038                   C      SM.FP24     EQU   56
'Systemvariablen'	MACRO-80 3.44	09-Dec-81	PAGE	1-4


                         C      
  0039                   C      SM.FP25     EQU   57
  003A                   C      SM.FP26     EQU   58
  003B                   C      SM.FP27     EQU   59
  003C                   C      SM.FP28     EQU   60
  003D                   C      SM.FP29     EQU   61
  003E                   C      SM.FP30     EQU   62
  003F                   C      SM.FP31     EQU   63
  0040                   C      SM.FP32     EQU   64
  0041                   C      SM.FP33     EQU   65
  0042                   C      SM.FP34     EQU   66
  0043                   C      SM.FP35     EQU   67
  0044                   C      SM.FP36     EQU   68
                         C      
  0045                   C      SM.FP37     EQU   69
  0046                   C      SM.FP38     EQU   70
  0047                   C      SM.FP39     EQU   71
  0048                   C      SM.FP40     EQU   72
  0049                   C      SM.FP41     EQU   73
  004A                   C      SM.FP42     EQU   74
  004B                   C      SM.FP43     EQU   75
  004C                   C      SM.FP44     EQU   76
  004D                   C      SM.FP45     EQU   77
  004E                   C      SM.FP46     EQU   78
  004F                   C      SM.FP47     EQU   79
  0050                   C      SM.FP48     EQU   80
  0D80*                  C      SM.FKTABE   EQU   SM.FKTAB+(2*SM.FP48)
                         C      
  0D80*   00             C      SM.TK:      DB    0             ;Speicher Alpha-Tastencode
  0D81*   00             C      SM.FKT:     DB    0             ;Speicher Funktionsadresse  {0 ... 3} fuer Funktionstastenebene
  0D82*                  C                  DEFS  12,0          ;TEMO
  0D8E*   00             C      SM.ZSMER:   DB    0             ;Merker  Z-Schnellschreiben
  0D8F*   00             C      SM.ZSTC:    DB    0             ;Zaehler Z-schnell 0,5s
  0D90*   00             C      SM.TC:      DB    0             ;Zeitzaehler C-blinken 0,3s
  0D91*   00             C      SM.MERK:    DB    0             ;Zeichenmerker Cursorposition
  0D92*   00             C      SM.GRZEI:   DB    0             ;Merker Grafikzeichen
  0D93*   00             C      SM.FSTAT:   DB    0             ;Status Format
  0D94*   00             C      SM.STAT:    DB    0             ;Status der virtuellen Tast.
  0D95*   00             C      SM.MODE:    DB    0             ;Status der Betriebsart
  0D96*   0000           C      SM.ZEIZ:    DW    0             ;Zeilenzaehler Text
  0D98*   00             C      SM.BZA:     DB    0             ;Zeilenzaehler Window--Text
  0D99*   0000           C      SM.WEITE:   DW    0             ;Zeilen--Sprungweite
  0D9B*                  C      SM.TABZ     EQU   $             ;Tabulatorzaehler
  0D9B*                  C                  DEFS  12,0
                         C      ;            ORG   00DA5H        ;Bereich fuer Tabulatoren
                         C      
  0DA7*   00             C      SM.UMERK:   DB    0             ;Merker fuer Umschalter
                         C      
                         C                                      ;Funktionsmerker der Alphatastatur
  0DA8*   0000           C      SM.USCH:    DW    0
  0DAA*   0000           C      SM.TABU:    DW    0
  0DAC*   0000           C      SM.DELZ:    DW    0
  0DAE*   0000           C      SM.DEL:     DW    0
  0DB0*   0000           C      SM.NEWL:    DW    0
  0DB2*   0000           C      SM.EINA:    DW    0
  0DB4*   00             C      SM.ZPOS:    DB    0             ;Zeilennr.  Schreibcursor
  0DB5*   00             C      SM.SPOS:    DB    0             ;Spaltennr. Schreibcursor
  000F                   C      SM.LOE1     EQU   $-SM.UMERK
  0028                   C      SM.LOE      EQU   $-SM.ZSMER
  0DB6*   00             C      SM.ZMIN:    DB    0             ;Merker Anfangszeile
  0DB7*   00             C      SM.SMIN:    DB    0             ;Merker Anfangsspalte
  0DB8*   00             C      SM.ZMAX:    DB    0             ;Merker End    zeile
  0DB9*   00             C      SM.SMAX:    DB    0             ;Merker End    spalte
  0DBA*   00             C      SM.ZPOS2:   DB    0             ;siehe oben (Zweitmerker)
  0DBB*   00             C      SM.SPOS2:   DB    0
  0DBC*   00             C      SM.ZMIN2:   DB    0
  0DBD*   00             C      SM.SMIN2:   DB    0
  0DBE*   00             C      SM.ZMAX2:   DB    0
  0DBF*   00             C      SM.SMAX2:   DB    0
  0DC0*   00             C      SM.ZANZ:    DB    0             ;Merker BWS-Format
  0DC1*   00             C      SM.SPANZ:   DB    0             ;Merker BWS-Format
  0DC2*   0000           C      SM.WINA:    DW    0             ;Position Window--Anfang
  0DC4*   0000           C      SM.WINE:    DW    0             ;Position Window--Ende
  0DC6*   0000           C      SM.END:     DW    0             ;Position Textende
  0DC8*   00             C      SM.LZA:     DB    0             ;Laenge Zeichenkette alt
  0DC9*                  C      SM.ZKA:     DEFS  75,SD.SPACE   ;Zeichenkette alt
  0E14*   00             C      SM.LZN:     DB    0             ;Laenge Zeichenkette neu
  0E15*   0000           C      SM.ZKN:     DW    0             ;Merker Zeichenkette neu
  0E17*   0000           C      SM.PTSE:    DW    0             ;Merker Ende   programm. Speicher
  0E19*   0000           C      SM.PTSA:    DW    0             ;Merker AnFang    ''        ''
                         C      
  0E1B*   0000           C      SM.ZEIAD:   DW    0             ;DBUG
  0E1D*   00             C      SM.ZEIZ2:   DB    0             ;DBUG
'Systemvariablen'	MACRO-80 3.44	09-Dec-81	PAGE	1-5


  0E1E*   0000           C      SM.START:   DW    0             ;EXEC
  0E20*   0000           C      SM.ANFAD:   DW    0             ;DBUG
  0E22*   0000           C      SM.PARAM:   DW    0             ;DBUG
  0E24*   0000           C                  DW    0
  0E26*   0000           C      SM.BWSE:    DW    0             ;DATA
                         C      
                         C      			;Bereich fuer Nutzerkonstanten
  0E28*                  C      SM.NUTZK:   DEFS  20H,0
  0E48*                  C                  DEFS  10,0  ;original: 12,0
                         C      
                         C      ;****************************************************************
                         C      ;*                  Arbeitsbereich KMBG (Programm KS01)         *
  0E52*   0000           C      SM.AEATB:   DW    0             ;Adresse E/A-Tabelle
  0E54*   0000           C      SM.PZAUS:   DW    0             ;Pufferzeiger Ausgabe
  0E56*   0000           C      SM.PZEIN:   DW    0             ;Pufferzeiger Eingabe
  0E58*   0000           C      SM.ZAUS:    DW    0             ;Zaehler Ausgabe
  0E5A*   0000           C      SM.ZEIN:    DW    0             ;Zaehler Eingabe
  0E5C*   00             C      SM.Z1:      DB    0             ;Zaehler Schreib-/Lese wdhg.
  0E5D*   00             C      SM.Z2:      DB    0             ;Zaehler Blocklueckenverl.
  0E5E*   0000           C      SM.CRCZ:    DW    0             ;CRC-Zeichen
  0E60*   00             C      SM.FEHLZ:   DB    0             ;interner Fehleranzeiger
  0E61*   0000           C      SM.POS:     DW    0             ;Position des Fehlers im Datensatz
  0E63*   00             C      SM.SDAT:    DB    0             ;Solldaten
  0E64*   00             C      SM.IDAT:    DB    0             ;Ist daten
  0E65*                  C      SM.PUFFS:   DEFS  260,0         ;Eingabepuffer
                         C      
                         C      ;*                  Arbeitszellen fuer  CRC-Routine             *
  0F69*   00             C      SM.KOMDO:   DB    0             ;Kommando
  0F6A*   00             C      SM.ZEITK:   DB    0             ;Zeitkonstante
  0F6B*   0000           C      SM.ADR:     DW    0             ;Adresse
  0F6D*   00             C      SM.CONTR:   DB    0             ;Ereigniskontrolle
                         C      ;*                                                              *
                         C      ;****************************************************************
  0F6E*   0000           C                  DW    0
                         C                                      ;E-/A-Tabelle
  0F70*                  C      SM.EADRU:   DEFS  16,0          ;             fuer Drucker
                         C      
  0F80*                  C      SM.EALBS:   DEFS  32,0          ;             fuer Lochbandstanzer
  0FA0*                  C      SM.EALBL:   DEFS  32,0          ;             fuer Lochbandleser
                         C      
  0FE0                   C      SM.EAAMB    EQU   00FE0H        ;             fuer Magnetbandgeraet
                         C      
                         C      
                         C                                      ;weitere System-Konstanten
  FC00                   C      SM.PTSC     EQU   0FC00H        ;Standardanfangsadr.   programm. PF-Tasten
                         C      
  0FF0                   C      SM.DATUM    EQU   00FF0H        ;aktuelles Datum  ( 3 Byte )
  0FF7                   C      SM.PTS      EQU   00FF7H        ;Merker Anfangsadresse programm. PF-Tasten
  0FF9                   C      SM.RST38    EQU   00FF9H        ;Sprung zur RST38-Routine
  0FFC                   C      SM.CTRL     EQU   00FFCH        ;Merker CTRL-Taste
  0FFD                   C      SM.KGMER    EQU   00FFDH        ;Merker Klein-/Grossschreibung
  0FFE                   C      SM.IMERK    EQU   00FFEH        ;Merker INS_MOD
  0FFF                   C      SM.SPMER    EQU   00FFFH        ;Merker fuer Tastengruppen
                         C                                      ;0   Zeichencode < 20H
                         C                                      ;1   SP ! " # $ % & ' ( ) *
                         C                                      ;2   + , -
                         C                                      ;3   0 1 2 3 4 5 6 7 8 9
                         C                                      ;4   : ; < > = ?
                         C                                      ;5   40H - 60H UND 7BH - 7EH
                         C                                      ;6   kleine Buchstaben
                         C                                      ;7   Funktionstasten
  0FC0*                  C      SM.SMEND    EQU   $
                         C      			;Stand: 28.Januar 85 - K EAW/wfvm..MSH
                         C      
                         C      ;	END
                         C      	INCLUDE SY01.MAC
                         C      	TITLE	'Betriebssystemkern DEG2000 Version 1.2'
                         C      	PAGE
'Betriebssystemkern DEG2000 Version 1.2'	MACRO-80 3.44	09-Dec-81	PAGE	1-6


                         C      
                         C      ;	PN	SY01.Betriebssystem___DEG20000__Version_1.2
                         C      ;****************************************************************
                         C      ;*                  Betriebssystemkern DEG2000 Version 1.2      *
                         C      ;*  Version         --------------------------------------------*
                         C      ;*                  Programmierer: M. Herbote  K EAW  ZFT (WFT) *
                         C      ;*  V 1 . 2         --------------------------------------------*
                         C      ;*                  Stand        : 28.Januar 1985               *
                         C      ;****************************************************************
                         C      	ORG	SD.SYSTA
  0000*   F3             C      	DI
  0001*   C3 00A0*       C      	JP	SY.INRE1
  0004*   00             C      	NOP
  0005*   00             C      	NOP
  0006*   18 03          C      	JR	$+5
  0008*                  C      SY.RST8:
  0008*   C3 00CF*       C      	JP	SY.INRE
  000B*                  C      SY.SYSTB:
  000B*   C3 0148*       C      	JP	SY.INSTB
  000E*                  C      	DEFS	2,0
  0010*                  C      SY.RST10:
  0010*   C3 00CF*       C      	JP	SY.INRE
  0013*                  C      	DEFS	5,0
  0018*                  C      SY.RST18:
  0018*   C3 00CF*       C      	JP	SY.INRE
  001B*                  C      	DEFS	5,0
  0020*                  C      SY.RST20:
  0020*   C3 00CF*       C      	JP	SY.INRE
  0023*                  C      	DEFS	5,0
  0028*                  C      SY.RST28:
  0028*   C3 00CF*       C      	JP	SY.INRE
  002B*                  C      	DEFS	5,0
  0030*                  C      SY.RST30:
  0030*   C3 00CF*       C      	JP	SY.INRE
  0033*                  C      	DEFS	5,0
  0038*                  C      SY.RST38:
  0038*   C3 0FF9        C      	JP	SM.RST38
                         C      ;****************************************************************
                         C      	ORG	00058H
                         C      			;Interrupt-Startadresse
  0058*                  C      SY.ISRA0:
  0058*   01B3*          C      	DW	SY.IO
                         C      ;****************************************************************
                         C      	ORG	00066H
                         C      			;NMI - Routine
  0066*                  C      SY.NMI:
  0066*   21 0143*       C      	LD	HL,SY.INNMI
  0069*   E3             C      	EX	(SP),HL
  006A*   FB             C      	EI
  006B*   ED 45          C      	RETN
                         C      ;****************************************************************
                         C                ORG	00070H
                         C                                      ;Programm KT01
  0070*   01B3*          C      SY.ISRA3: DW    SY.IO           ;Int. Beh. CTC- Kanal 0
  0072*   0000           C      SY.ICTC1: DW    0               ;          CTC- Kanal 1
  0074*   0000           C      SY.ICTC2: DW    0;48B1H         ;          CTC- Kanal 2     ;???
  0076*   0000           C      SY.ICTC3: DW    0               ;          CTC- Kanal 3
                         C      
                         C      ; SY.IAUS:  DW    0446FH     ;???
                         C      ; SY.IER:   DW    04513H     ;???
                         C      ; SY.IEL:   DW    04562H     ;???
                         C      ; SY.IST:   DW    04658H     ;???
                         C      ; SY.IBE:   DW    04673H     ;???
                         C      ; SY.IBE0:  DW    0468EH     ;???
                         C      
                         C      	PAGE
'Betriebssystemkern DEG2000 Version 1.2'	MACRO-80 3.44	09-Dec-81	PAGE	1-7


                         C      
                         C      ;****************************************************************
                         C      	ORG	000A0H
                         C                                      ;Initialisierungen
  00A0*                  C      SY.INRE1:
  00A0*   31 0CE0        C      	LD	SP,SM.STACK
                         C      	; LD	HL,SD.BWSA + 24*80	;- Zeichen in die 25.Zeile schreiben
                         C      	; LD	DE,SD.BWSA + 24*80 +1
                         C      	; LD	BC,79
                         C      	; LD	(HL),'-'
                         C      	; LDIR
                         C      
                         C      	IF	SD.GENE AND 00010000B	;DEG2000 Emulator
  00A3*   01 04C0        C      	LD	BC,004C0H	;HS-Speicher auf Standard (1) umschalten
  00A6*   21 00AD*       C      	LD	HL,SY.OUTB1
  00A9*   ED B3          C      	OTIR
  00AB*   18 04          C      	JR	SY.INRE2
  00AD*                  C      SY.OUTB1:
  00AD*   F0             C      	DB	0F0H	;Startbyte
  00AE*   03             C      	DB	003H	;wahl
  00AF*   04             C      	DB	004H	;SYS 1.2
  00B0*   FF             C      	DB	0FFH	;Endbyte
                         C      	ENDIF
                         C      
  00B1*                  C      SY.INRE2:
  00B1*   21 0F70*       C      	LD	HL,SM.EADRU	;E-/A-Tabellen loeschen
  00B4*   11 0F71*       C      	LD	DE,SM.EADRU+1
  00B7*   01 008F        C      	LD	BC,8FH
  00BA*   36 00          C      	LD	(HL),0
  00BC*   ED B0          C      	LDIR
  00BE*   3E C3          C      	LD	A,0C3H	;Sprung zur RST38-Routine
  00C0*   32 0FF9        C      	LD	(SM.RST38),A
  00C3*   21 0153*       C      	LD	HL,SY.INSTC
  00C6*   22 0FFA        C      	LD	(SM.RST38+1),HL
  00C9*   21 FC00        C      	LD	HL,SM.PTSC	;setzen der Variablen SM.PTS
  00CC*   22 0FF7        C      	LD	(SM.PTS),HL
  00CF*                  C      SY.INRE:
  00CF*   CD 0121*       C      	CALL	SY.INI	;Initialisierung der Speicher
  00D2*   2A 4001*       C      	LD	HL,(TR.TINIT+1)	;Initialisierung der Tastatur
  00D5*   CD 41A4*       C      	CALL	TA.MM1
  00D8*   CD 429E*       C      	CALL	TA.E0IN
  00DB*   CD 012D*       C      	CALL	SY.INI1	;Initialisierung der Bildanzeige
                         C      
  00DE*   AF             C      	XOR	A
  00DF*   32 0FFD        C      	LD	(SM.KGMER),A	;Grundstellung: Grossbuchstaben
                         C      	IF SD.GENE AND 16
  00E2*   06 08          C      	LD	B,8
  00E4*   CD 446C*       C      	CALL TR.PST
                         C      	ENDIF
  00E7*   32 0FFE        C      	LD	(SM.IMERK),A
                         C      
                         C      
                         C      SY.ZAN MACRO  Z
                         C          LD    C,Z	;Zeichenausgabe
                         C          CALL  SY.AEIN
                         C          ENDM
                         C      
                         C      	SY.ZAN	'D'
  00EA*   0E 44          C+         LD    C,'D'	;Zeichenausgabe
  00EC*   CD 042C*       C+         CALL  SY.AEIN
                         C      	SY.ZAN	'A'
  00EF*   0E 41          C+         LD    C,'A'	;Zeichenausgabe
  00F1*   CD 042C*       C+         CALL  SY.AEIN
                         C      	SY.ZAN	'T'
  00F4*   0E 54          C+         LD    C,'T'	;Zeichenausgabe
  00F6*   CD 042C*       C+         CALL  SY.AEIN
                         C      	SY.ZAN	'E'
  00F9*   0E 45          C+         LD    C,'E'	;Zeichenausgabe
  00FB*   CD 042C*       C+         CALL  SY.AEIN
                         C      	SY.ZAN	' '
  00FE*   0E 20          C+         LD    C,' '	;Zeichenausgabe
  0100*   CD 042C*       C+         CALL  SY.AEIN
  0103*   3E 0B          C      	LD	A,11	;Systembildfenster setzen
  0105*   32 0DB6*       C      	LD	(SM.ZMIN),A
  0108*   32 0DB8*       C      	LD	(SM.ZMAX),A
  010B*   3E 08          C      	LD	A,8
  010D*   32 0DB7*       C      	LD	(SM.SMIN),A
  0110*   3E 0F          C      	LD	A,15
  0112*   32 0DB9*       C      	LD	(SM.SMAX),A
  0115*   CD 01D7*       C      	CALL	SY.SETC	;Cursor setzen
  0118*                  C      SY.ININ1	EQU	$
                         C      
'Betriebssystemkern DEG2000 Version 1.2'	MACRO-80 3.44	09-Dec-81	PAGE	1-8


                         C      	IF	SD.GENE AND 00000001B
                         C      	OUT	(0C3H),A	;RESET - Sperre ein
                         C      	ENDIF
                         C      
  0118*                  C      SY.ININ3:
  0118*   21 0FF0        C      	LD	HL,SM.DATUM
  011B*   CD 0726*       C      	CALL	S1.ANZG
  011E*   C3 41CF*       C      	JP	TA.TFE
                         C      
  0121*                  C      SY.INI:
  0121*   AF             C      	XOR	A
  0122*   ED 47          C      	LD	I,A	;I - Register laden
                         C      
                         C      	IF	SD.GENE AND 00000001B
                         C      	OUT	(0C4H),A	;RESET - Sperre aus ---   S B S T
                         C      	OUT	(0C2H),A	;SYS 1 aktivieren
                         C      	OUT	(0C1H),A
                         C      	OUT	(0C0H),A
                         C      	ENDIF
                         C      
  0124*   ED 5E          C      	IM	2		;Interrupt - Mode 2
  0126*   FB             C      	EI
  0127*   3E FF          C      	LD	A,-1
  0129*   32 0FFF        C      	LD	(SM.SPMER),A
  012C*   C9             C      	RET
                         C      
  012D*                  C      SY.INI1:
  012D*   CD 03EA*       C      	CALL	SY.PRUEF
  0130*   CD 03B7*       C      	CALL	SY.MEMLA
  0133*                  C      SY.INI2:
  0133*   CD 036E*       C      	CALL	SY.BILO
  0136*                  C      SY.INI3:
  0136*   21 000A        C      	LD	HL,10
  0139*   22 0DB4*       C      	LD	(SM.ZPOS),HL
  013C*   CD 01B6*       C      	CALL	SY.BILAD
  013F*   CD 01D7*       C      	CALL	SY.SETC
  0142*   C9             C      	RET
                         C      
  0143*                  C      SY.INNMI:
  0143*   CD 0133*       C      	CALL	SY.INI2
  0146*   18 D0          C      	JR	SY.ININ3
                         C      
  0148*                  C      SY.INSTB:
  0148*   31 0CE0        C      	LD	SP,SM.STACK
  014B*   CD 0121*       C      	CALL	SY.INI
  014E*   CD 012D*       C      	CALL	SY.INI1
  0151*   18 C5          C      	JR	SY.ININ1
                         C      
  0153*                  C      SY.INSTC:
  0153*   31 0CE0        C      	LD	SP,SM.STACK
  0156*   CD 0136*       C      	CALL	SY.INI3
  0159*   18 BD          C      	JR	SY.ININ3
                         C      
  015B*                  C      SY.INFKT:
  015B*   22 0D14*       C      	LD	(SM.FKTAB+(2*SM.FSYS)),HL
  015E*   21 0183*       C      	LD	HL,SY.IFKT1	;Taste: HOME
  0161*   22 0CEC*       C      	LD	(SM.FKTAB+(2*SM.FPOS1)),HL
  0164*   21 0190*       C      	LD	HL,SY.IFKT2	;Taste: CNZA
  0167*   22 0CE4*       C      	LD	(SM.FKTAB+(2*SM.FNL)),HL
  016A*   21 019B*       C      	LD	HL,SY.IFKT3	;Taste: 000
  016D*   22 0D10*       C      	LD	(SM.FKTAB+(2*SM.F000)),HL
  0170*   21 01A5*       C      	LD	HL,SY.IFKT4	;Taste: 00
  0173*   22 0D0E*       C      	LD	(SM.FKTAB+(2*SM.F00)),HL
                         C      
                         C      	IF	SD.GENE AND 00000001B
                         C      	LD	HL,PF.S2	;Taste: ABS	;Kommando 'S2  '
                         C      	LD	(SM.FKTAB+(2*SM.FABS)),HL
                         C      	LD	HL,TE.TEST+6	;Taste: DEL	;Kommando 'TEST'
                         C      	LD	(SM.FKTAB+(2*SM.FDEL)),HL
                         C      	ENDIF
                         C      
                         C      	IF	SD.GENE AND 00010001B
  0176*   21 51D6*       C      	LD	HL,PF.S3M	;PF3
  0179*   22 0D26*       C      	LD	(SM.FKTAB+(2*SM.FP03)),HL
  017C*   21 5242*       C      	LD	HL,PF.S4	;PF4
  017F*   22 0D28*       C      	LD	(SM.FKTAB+(2*SM.FP04)),HL
                         C      	ENDIF
                         C      
  0182*   C9             C      	RET
                         C      
  0183*                  C      SY.IFKT1:
  0183*   2A 0DB6*       C      	LD	HL,(SM.ZMIN)
  0186*   22 0DB4*       C      	LD	(SM.ZPOS),HL
'Betriebssystemkern DEG2000 Version 1.2'	MACRO-80 3.44	09-Dec-81	PAGE	1-9


  0189*   CD 02DE*       C      	CALL	SY.DZPOS
  018C*   CD 02EB*       C      	CALL	SY.DSPOS
  018F*   C9             C      	RET
                         C      
  0190*                  C      SY.IFKT2:
  0190*   3A 0DB7*       C      	LD	A,(SM.SMIN)
  0193*   3D             C      	DEC	A
  0194*   32 0DB5*       C      	LD	(SM.SPOS),A
  0197*   CD 02FD*       C      	CALL	SY.IZPOS
  019A*   C9             C      	RET
                         C      
  019B*                  C      SY.IFKT3:
  019B*   CD 02AA*       C      	CALL	SY.CPOS
  019E*   36 30          C      	LD	(HL),'0'
  01A0*   CD 0324*       C      	CALL	SY.ICPOS
  01A3*   18 03          C      	JR	$+5
  01A5*                  C      SY.IFKT4:
  01A5*   CD 02AA*       C      	CALL	SY.CPOS
  01A8*   36 30          C      	LD	(HL),'0'
  01AA*   CD 0324*       C      	CALL	SY.ICPOS
  01AD*   36 30          C      	LD	(HL),'0'
  01AF*   CD 0324*       C      	CALL	SY.ICPOS
  01B2*   C9             C      	RET
                         C      
                         C      	PAGE
'Betriebssystemkern DEG2000 Version 1.2'	MACRO-80 3.44	09-Dec-81	PAGE	1-10


                         C      
                         C      ;****************************************************************
                         C      ;	ORG	00280H
                         C      
                         C      	IF	SD.GENE AND 00001110B
                         C      	LD	HL,00000H	;ZRE umladen
                         C      	LD	DE,08000H
                         C      	LD	BC,00C00H
                         C      	LDIR
                         C      	LD	HL,01000H	;OFS umladen
                         C      	LD	BC,01800H
                         C      	LDIR
                         C      	JP	0C267H
                         C      	ENDIF
                         C      
                         C      	PAGE
'Betriebssystemkern DEG2000 Version 1.2'	MACRO-80 3.44	09-Dec-81	PAGE	1-11


                         C      
                         C      ;****************************************************************
                         C      ;	ORG	00400H
                         C      			;Sprung zur Tastaturroutine
                         C      ;SY.ABFR:
                         C      ;	JP	TA.TAST
                         C      ;
                         C      ;
                         C      ;
  01B3*                  C      SY.IO:
  01B3*   FB             C      	EI
  01B4*   ED 4D          C      	RETI
                         C      ;****************************************************************
                         C      ;	ORG	0048DH
                         C      			;Bildausschrift Systemgrundzustand
  01B6*                  C      SY.BILAD:
  01B6*   21 024F*       C      	LD	HL,SY.ZSY2
  01B9*                  C      SY.BILA1:
  01B9*   E5             C      	PUSH	HL
  01BA*   CD 040F*       C      	CALL	SY.MELDE
  01BD*   11 3020        C      	LD	DE,SD.BWSA+20H
  01C0*   E1             C      	POP	HL
  01C1*   CD 0415*       C      	CALL	SY.MELD
  01C4*   18 67          C      	JR	SY.KOM2
  01C6*                  C      	DEFS	3,0
  01C9*                  C      SY.KOM:
  01C9*   0E 3A          C      	LD	C,':'
  01CB*   CD 042C*       C      	CALL	SY.AEIN
  01CE*   CD 030A*       C      	CALL	SY.ISPOS
  01D1*   3A 0DB5*       C      	LD	A,(SM.SPOS)
  01D4*   3C             C      	INC	A
  01D5*   18 4A          C      	JR	SY.KOM1
                         C      
  01D7*                  C      SY.SETC:
  01D7*   F5             C      	PUSH	AF
  01D8*   C5             C      	PUSH	BC
  01D9*   E5             C      	PUSH	HL
  01DA*   3A 0DB5*       C      	LD	A,(SM.SPOS)	;X-Koordinate
  01DD*   32 01F7*       C      	LD	(SY.SETC1+2),A
  01E0*   3A 0DB4*       C      	LD	A,(SM.ZPOS) ;Y-Koordinate
  01E3*   32 01F8*       C      	LD	(SY.SETC1+3),A
  01E6*   21 01F5*       C      	LD	HL,SY.SETC1
  01E9*   01 0540        C      	LD	BC,00540H
  01EC*   ED B3          C      	OTIR
  01EE*   E1             C      	POP	HL
  01EF*   C1             C      	POP	BC
  01F0*   F1             C      	POP	AF
  01F1*   CD 02AA*       C      	CALL	SY.CPOS	;HL := Cursorposition
  01F4*   C9             C      	RET
  01F5*                  C      SY.SETC1:
  01F5*   F0             C      	DB	0F0H
  01F6*   01             C      	DB	001H	;Cursor Ein
  01F7*   00             C      	DB	0		;X
  01F8*   00             C      	DB	0		;Y
  01F9*   FF             C      	DB	0FFH
                         C      
  01FA*                  C      SY.SETCHL:
  01FA*   E5             C      	PUSH	HL
  01FB*   C5             C      	PUSH	BC
  01FC*   22 020E*       C      	LD	(SY.SETCHL2),HL
  01FF*   21 020A*       C      	LD	HL,SY.SETCHL1
  0202*   01 0740        C      	LD	BC,00740H
  0205*   ED B3          C      	OTIR
  0207*   C1             C      	POP	BC
  0208*   E1             C      	POP	HL
  0209*   C9             C      	RET
  020A*                  C      SY.SETCHL1:
  020A*   F0             C      	DB	0F0H
  020B*   04             C      	DB	004H	;Cursor Ein mit HL
  020C*   3000           C      	DW	SD.BWSA
  020E*                  C      SY.SETCHL2:
  020E*   0000           C      	DW	0
  0210*   FF             C      	DB	0FFH
                         C      
  0211*                  C      SY.RESC:
  0211*   C5             C      	PUSH	BC
  0212*   E5             C      	PUSH	HL
  0213*   21 021E*       C      	LD	HL,SY.RESC1
  0216*   01 0340        C      	LD	BC,00340H
  0219*   ED B3          C      	OTIR
  021B*   E1             C      	POP	HL
  021C*   C1             C      	POP	BC
'Betriebssystemkern DEG2000 Version 1.2'	MACRO-80 3.44	09-Dec-81	PAGE	1-12


  021D*   C9             C      	RET
  021E*                  C      SY.RESC1:
  021E*   F0             C      	DB	0F0H
  021F*   02             C      	DB	002H	;Cursor Aus
  0220*   FF             C      	DB	0FFH
                         C      
  0221*                  C      SY.KOM1:
  0221*   32 0DB7*       C      	LD	(SM.SMIN),A
  0224*   3E 0B          C      	LD	A,11	;Begrenzung Bildbereich Kommandozeile
  0226*   32 0DB6*       C      	LD	(SM.ZMIN),A
  0229*   32 0DB8*       C      	LD	(SM.ZMAX),A
  022C*   C9             C      	RET
                         C      
  022D*                  C      SY.KOM2:
  022D*   21 025E*       C      	LD	HL,SY.ZSY3
  0230*   11 3060        C      	LD	DE,SD.BWSA+060H
  0233*   CD 0415*       C      	CALL	SY.MELD
  0236*   21 026A*       C      	LD	HL,SY.ZSY4
  0239*   11 30B0        C      	LD	DE,SD.BWSA+0B0H
  023C*   CD 0415*       C      	CALL	SY.MELD
  023F*   3E 0A          C      	LD	A,10
  0241*   32 0DB4*       C      	LD	(SM.ZPOS),A
  0244*   18 83          C      	JR	SY.KOM
                         C      ;****************************************************************
                         C      ;*                  Zeichenketten                               *
                         C      ;****************************************************************
  0246*                  C      SY.ZSY1:
  0246*   08             C      	DB	LOW(SY.LZSY1)
  0247*   44 45 47 20    C      	DB	'DEG 2000'
  024B*   32 30 30 30    C      
  0008                   C      SY.LZSY1	EQU	$-SY.ZSY1-1
  024F*                  C      SY.ZSY2:
  024F*   0E             C      	DB	LOW(SY.LZSY2)
  0250*   42 65 74 72    C      	DB	'Betriebssystem'
  0254*   69 65 62 73    C      
  0258*   73 79 73 74    C      
  025C*   65 6D          C      
  000E                   C      SY.LZSY2	EQU	$-SY.ZSY2-1
  025E*                  C      SY.ZSY3:
  025E*   0B             C      	DB	LOW(SY.LZSY3)
  025F*   56 65 72 73    C      	DB	'Version 1.2'
  0263*   69 6F 6E 20    C      
  0267*   31 2E 32       C      
  000B                   C      SY.LZSY3	EQU	$-SY.ZSY3-1
  026A*                  C      SY.ZSY4:
  026A*   08             C      	DB	LOW(SY.LZSY4)
  026B*   44 61 74 75    C      	DB	'Datum:  '
  026F*   6D 3A 20 20    C      
  0008                   C      SY.LZSY4	EQU	$-SY.ZSY4-1
                         C      ;****************************************************************
  0273*                  C      SY.QTABL:       ;Standard TABs setzen (0,9,15,34)
  0273*   F5             C      	PUSH	AF
  0274*   E5             C      	PUSH	HL
  0275*   21 0D9B*       C      	LD	HL,SM.TABZ
  0278*   36 00          C      	LD	(HL),SD.QTAB1
  027A*   23             C      	INC	HL
  027B*   36 09          C      	LD	(HL),SD.QTAB2
  027D*   23             C      	INC	HL
  027E*   36 0F          C      	LD	(HL),SD.QTAB3
  0280*   23             C      	INC	HL
  0281*   36 22          C      	LD	(HL),SD.QTAB4
  0283*   23             C      	INC	HL
  0284*   36 FF          C      	LD	(HL),-1
  0286*   E5             C      	PUSH	HL
  0287*   D1             C      	POP	DE
  0288*   13             C      	INC	DE
  0289*   01 0005        C      	LD	BC,5
  028C*   ED B0          C      	LDIR
  028E*   E1             C      	POP	HL
  028F*   F1             C      	POP	AF
  0290*   C9             C      	RET
                         C      ;****************************************************************
                         C      ;	ORG	00548H
  0291*                  C      SY.BWSAF:
  0291*   CD 02B6*       C      	CALL	SY.POSA	;Format--BWS--Anfang
  0294*   18 03          C      	JR	SY.POS5
  0296*                  C      SY.SPPOF:
  0296*   CD 02BC*       C      	CALL	SY.SPPOS	;Formatspaltenanfang
  0299*                  C      SY.POS5:
  0299*   F5             C      	PUSH	AF
  029A*   3A 0DB6*       C      	LD	A,(SM.ZMIN)
  029D*   3D             C      	DEC	A
  029E*   18 11          C      	JR	SY.POS4
'Betriebssystemkern DEG2000 Version 1.2'	MACRO-80 3.44	09-Dec-81	PAGE	1-13


  02A0*                  C      SY.ZLPOF:
  02A0*   CD 02B6*       C      	CALL	SY.POSA
  02A3*   18 08          C      	JR	SY.POS3
  02A5*                  C      SY.ZLPOS:
  02A5*   21 3000        C      	LD	HL,SD.BWSA	;Zeilenanfang
  02A8*   18 03          C      	JR	SY.POS3
  02AA*                  C      SY.CPOS:
  02AA*   CD 02BC*       C      	CALL	SY.SPPOS	;Cursorposition
  02AD*                  C      SY.POS3:
  02AD*   F5             C      	PUSH	AF
  02AE*   3A 0DB4*       C      	LD	A,(SM.ZPOS)
  02B1*                  C      SY.POS4:
  02B1*   CD 02D2*       C      	CALL	SY.AMSZ
  02B4*                  C      SY.POS1:
  02B4*   F1             C      	POP	AF
  02B5*   C9             C      	RET
  02B6*                  C      SY.POSA:
  02B6*   2A 0DB7*       C      	LD	HL,(SM.SMIN)
  02B9*   2D             C      	DEC	L
  02BA*   18 03          C      	JR	SY.POS7
  02BC*                  C      SY.SPPOS:
  02BC*   2A 0DB5*       C      	LD	HL,(SM.SPOS)	;Spaltenanfang
  02BF*                  C      SY.POS7:
  02BF*   26 30          C      	LD	H,HIGH(SD.BWSA)
  02C1*   C9             C      	RET
  02C2*                  C      SY.BWSL:
  02C2*   E5             C      	PUSH	HL
  02C3*   21 0000        C      	LD	HL,0
  02C6*   CD 02CF*       C      	CALL	SY.ADDBL
  02C9*   E3             C      	EX	(SP),HL
  02CA*   C1             C      	POP	BC	;BC=BWSL  A=0
  02CB*   C9             C      	RET		;HL,DE unveraendert
  02CC*                  C      SY.BWSE:
  02CC*   21 2FFF        C      	LD	HL,SD.BWSA-1	;HL:=BWSE
  02CF*                  C      SY.ADDBL:
  02CF*   3A 0DC0*       C      	LD	A,(SM.ZANZ)	;HL=HL+BWSL
  02D2*                  C      SY.AMSZ:
  02D2*   B7             C      	OR	A	;HL:=HL+A*(SPANZ)
  02D3*   C8             C      	RET	Z
  02D4*   D5             C      	PUSH	DE
  02D5*   CD 034F*       C      	CALL	SY.DESZ
  02D8*                  C      SY.AMSZ1:
  02D8*   19             C      	ADD	HL,DE
  02D9*   3D             C      	DEC	A
  02DA*   20 FC          C      	JR	NZ,SY.AMSZ1
  02DC*   D1             C      	POP	DE
  02DD*   C9             C      	RET
  02DE*                  C      SY.DZPOS:
  02DE*   C5             C      	PUSH	BC	;Zeilennr. decrementieren
  02DF*   21 0DB4*       C      	LD	HL,SM.ZPOS
  02E2*   3A 0DB8*       C      	LD	A,(SM.ZMAX)
  02E5*   47             C      	LD	B,A
  02E6*   3A 0DB6*       C      	LD	A,(SM.ZMIN)
  02E9*   18 0B          C      	JR	SY.DEC2
  02EB*                  C      SY.DSPOS:
  02EB*   C5             C      	PUSH	BC	;Spaltennr. decrementieren
  02EC*   21 0DB5*       C      	LD	HL,SM.SPOS
  02EF*   3A 0DB9*       C      	LD	A,(SM.SMAX)
  02F2*   47             C      	LD	B,A
  02F3*   3A 0DB7*       C      	LD	A,(SM.SMIN)
  02F6*                  C      SY.DEC2:
  02F6*   3D             C      	DEC	A
  02F7*   BE             C      	CP	M
  02F8*   28 21          C      	JR	Z,SY.INC3	;Z=1,CY=0 falls Uebertrag
  02FA*   35             C      	DEC	M
  02FB*   18 21          C      	JR	SY.INC4
  02FD*                  C      SY.IZPOS:
  02FD*   C5             C      	PUSH	BC	;Zeilennr. incrementieren
  02FE*   21 0DB4*       C      	LD	HL,SM.ZPOS
  0301*   3A 0DB6*       C      	LD	A,(SM.ZMIN)
  0304*   47             C      	LD	B,A
  0305*   3A 0DB8*       C      	LD	A,(SM.ZMAX)
  0308*   18 0B          C      	JR	SY.INC2
  030A*                  C      SY.ISPOS:
  030A*   C5             C      	PUSH	BC	;Spaltennr. incrementieren
  030B*   3A 0DB7*       C      	LD	A,(SM.SMIN)
  030E*   47             C      	LD	B,A
  030F*   3A 0DB9*       C      	LD	A,(SM.SMAX)
  0312*   21 0DB5*       C      	LD	HL,SM.SPOS
  0315*                  C      SY.INC2:
  0315*   4F             C      	LD	C,A
  0316*   7E             C      	LD	A,M
  0317*   3C             C      	INC	A
'Betriebssystemkern DEG2000 Version 1.2'	MACRO-80 3.44	09-Dec-81	PAGE	1-14


  0318*   B9             C      	CP	C
  0319*   38 02          C      	JR	C,SY.INC1
  031B*                  C      SY.INC3:
  031B*   05             C      	DEC	B
  031C*   78             C      	LD	A,B
  031D*                  C      SY.INC1:
  031D*   77             C      	LD	M,A
  031E*                  C      SY.INC4:
  031E*   CD 02AA*       C      	CALL	SY.CPOS
  0321*   C1             C      	POP	BC
  0322*   3F             C      	CCF
  0323*   C9             C      	RET		;Z=CY=1 falls Uebertrag
  0324*                  C      SY.ICPOS:
  0324*   CD 030A*       C      	CALL	SY.ISPOS	;Schreibcursorpos. increment.
  0327*   DC 02FD*       C      	CALL	C,SY.IZPOS
  032A*   C9             C      	RET		;Z=CY=1 falls CPOS=SD.BWSA
  032B*                  C      SY.DCPOS:
  032B*   CD 02EB*       C      	CALL	SY.DSPOS	;Schreibcursorpos. decrement.
  032E*   DC 02DE*       C      	CALL	C,SY.DZPOS
  0331*   C9             C      	RET		;Z=CY=1 falls CPOS=BWSEnde
  0332*                  C      SY.LCPOS:
  0332*   E5             C      	PUSH	HL	;HL-->ZPOS/SPOS
  0333*   D5             C      	PUSH	DE
  0334*   11 3000        C      	LD	DE,SD.BWSA
  0337*   B7             C      	OR	A
  0338*   ED 52          C      	SBC	HL,DE
  033A*   CD 034F*       C      	CALL	SY.DESZ
  033D*   AF             C      	XOR	A
  033E*                  C      SY.LCP1:
  033E*   ED 52          C      	SBC	HL,DE
  0340*   3C             C      	INC	A
  0341*   30 FB          C      	JR	NC,SY.LCP1
  0343*   19             C      	ADD	HL,DE
  0344*   3D             C      	DEC	A
  0345*   32 0DB4*       C      	LD	(SM.ZPOS),A
  0348*   7D             C      	LD	A,L
  0349*   32 0DB5*       C      	LD	(SM.SPOS),A
  034C*   D1             C      	POP	DE
  034D*   E1             C      	POP	HL
  034E*   C9             C      	RET
  034F*                  C      SY.DESZ:
  034F*   ED 5B 0DC1*    C      	LD	DE,(SM.SPANZ)
  0353*   16 00          C      	LD	D,0
  0355*   C9             C      	RET
                         C      			;Schreibcursor Operationen
  0356*                  C      SY.CNRS:
  0356*   CD 0324*       C      	CALL	SY.ICPOS	;-->
  0359*   18 0D          C      	JR	SY.CURS
  035B*                  C      SY.CNLS:
  035B*   CD 032B*       C      	CALL	SY.DCPOS	;<--
  035E*   18 08          C      	JR	SY.CURS
  0360*                  C      SY.CNUS:
  0360*   CD 02FD*       C      	CALL	SY.IZPOS	;Runter
  0363*   18 03          C      	JR	SY.CURS
  0365*                  C      SY.CNOS:
  0365*   CD 02DE*       C      	CALL	SY.DZPOS	;Hoch
  0368*                  C      SY.CURS:
  0368*   3E 01          C      	LD	A,1
  036A*   32 0D8E*       C      	LD	(SM.ZSMER),A
  036D*   C9             C      	RET
                         C      			;Bild loeschen
  036E*                  C      SY.BILO:
  036E*   21 3000        C      	LD	HL,SD.BWSA
  0371*   11 3001        C      	LD	DE,SD.BWSA+1
  0374*   CD 02C2*       C      	CALL	SY.BWSL
  0377*   0B             C      	DEC	BC
  0378*   C5             C      	PUSH	BC
  0379*   36 20          C      	LD	M,SD.SPACE
  037B*   ED B0          C      	LDIR
  037D*   C1             C      	POP	BC
  037E*   3A 0DC0*       C      	LD	A,(SM.ZANZ)
  0381*   FE 20          C      	CP	32
  0383*   C0             C      	RET	NZ
  0384*   23             C      	INC	HL
  0385*   13             C      	INC	DE
  0386*   36 00          C      	LD	M,0	;SD.SW
  0388*   ED B0          C      	LDIR
  038A*   C9             C      	RET
                         C      			;Funktionsadressen laden
  038B*                  C      SY.FKTLA:
  038B*   21 0CE0*       C      	LD	HL,SM.FKTAB
  038E*   36 00          C      	LD	M,0
  0390*   11 0CE1*       C      	LD	DE,SM.FKTAB+1
'Betriebssystemkern DEG2000 Version 1.2'	MACRO-80 3.44	09-Dec-81	PAGE	1-15


  0393*   01 009F        C      	LD	BC,SM.TK-SM.FKTAB-1
  0396*   ED B0          C      	LDIR
  0398*   21 0365*       C      	LD	HL,SY.CNOS
  039B*   22 0CF2*       C      	LD	(SM.FKTAB+(2*SM.FUP)),HL
  039E*   21 035B*       C      	LD	HL,SY.CNLS
  03A1*   22 0CEA*       C      	LD	(SM.FKTAB+(2*SM.FLEFT)),HL
  03A4*   21 0356*       C      	LD	HL,SY.CNRS
  03A7*   22 0CEE*       C      	LD	(SM.FKTAB+(2*SM.FRIGHT)),HL
  03AA*   21 0360*       C      	LD	HL,SY.CNUS
  03AD*   22 0CE6*       C      	LD	(SM.FKTAB+(2*SM.FDOWN)),HL
  03B0*   21 0148*       C      	LD	HL,SY.INSTB
  03B3*   C3 015B*       C      	JP	SY.INFKT
  03B6*   C9             C      	RET
                         C      			;ArbeitsRAM und Tabellen laden
  03B7*                  C      SY.MEMLA:
  03B7*   CD 038B*       C      	CALL	SY.FKTLA
  03BA*   CD 03D0*       C      	CALL	SY.RALO
  03BD*   21 0437*       C      	LD	HL,SY.NL
  03C0*                  C      SY.MEML1:
  03C0*   22 0DB0*       C      	LD	(SM.NEWL),HL
  03C3*   21 042C*       C      	LD	HL,SY.AEIN
  03C6*   22 0DB2*       C      	LD	(SM.EINA),HL
  03C9*   21 041C*       C      	LD	HL,SY.DELZL
  03CC*   22 0DAC*       C      	LD	(SM.DELZ),HL
  03CF*   C9             C      	RET
                         C      			;ArbeitsRAM loeschen
  03D0*                  C      SY.RALO:
  03D0*   21 0D8E*       C      	LD	HL,SM.ZSMER
  03D3*   36 00          C      	LD	M,0
  03D5*   11 0D8F*       C      	LD	DE,SM.ZSMER+1
  03D8*   C3 03F1*       C      	JP	SY.RALO2	;LD    BC,SM.LOE-1
  03DB*                  C      SY.RALO1:
  03DB*   ED B0          C      	LDIR
  03DD*   23             C      	INC	HL	;Format = volles Bild
  03DE*   36 01          C      	LD	M,1
  03E0*   23             C      	INC	HL
  03E1*   36 01          C      	LD	M,1
  03E3*   2A 0DC0*       C      	LD	HL,(SM.ZANZ)	;H=(SPANZ) L=(ZANZ)
  03E6*   22 0DB8*       C      	LD	(SM.ZMAX),HL	;(SMAX)=L  (ZMAX)=H
  03E9*   C9             C      	RET
                         C      			;ABS K7024
  03EA*                  C      SY.PRUEF:
  03EA*   21 5018        C      	LD	HL,5018H	;H=80 L=24
  03ED*   22 0DC0*       C      	LD	(SM.ZANZ),HL	;(SPANZ):=H (ZANZ):=L
  03F0*   C9             C      	RET
                         C      
  03F1*                  C      SY.RALO2:
  03F1*   01 000C        C      	LD	BC,12
  03F4*   ED B0          C      	LDIR
  03F6*   21 0DA7*       C      	LD	HL,SM.UMERK
  03F9*   11 0DA8*       C      	LD	DE,SM.USCH
  03FC*   01 000E        C      	LD	BC,14
  03FF*   36 00          C      	LD	(HL),0
  0401*   C3 03DB*       C      	JP	SY.RALO1
                         C      
  0404*                  C      	DEFS	3,0	;Adresskorrektur
                         C      			;pruefen RAM-Bereich
  0407*                  C      SY.RAMPR:
  0407*   23             C      	INC	HL
  0408*   7E             C      	LD	A,M
  0409*   34             C      	INC	M
  040A*   BE             C      	CP	M
  040B*   77             C      	LD	M,A
  040C*   20 F9          C      	JR	NZ,SY.RAMPR
  040E*   C9             C      	RET		;HL=RAMEnde+1
  040F*                  C      SY.MELDE:
  040F*   11 3010        C      	LD	DE,SD.BWSA+10H
  0412*   21 0246*       C      	LD	HL,SY.ZSY1
  0415*                  C      SY.MELD:
  0415*   06 00          C      	LD	B,0	;Zeichenkette uebertragen
  0417*   4E             C      	LD	C,M
  0418*   23             C      	INC	HL
  0419*   ED B0          C      	LDIR
  041B*   C9             C      	RET
  041C*                  C      SY.DELZL:
  041C*   CD 02A0*       C      	CALL	SY.ZLPOF
  041F*   CD 0332*       C      	CALL	SY.LCPOS
  0422*   CD 047C*       C      	CALL	SY.SZAHL
  0425*                  C      SY.DEL2:
  0425*   47             C      	LD	B,A
  0426*                  C      SY.DEL1:
  0426*   36 20          C      	LD	M,SD.SPACE
  0428*   23             C      	INC	HL
'Betriebssystemkern DEG2000 Version 1.2'	MACRO-80 3.44	09-Dec-81	PAGE	1-16


  0429*   10 FB          C      	DJNZ	SY.DEL1
  042B*   C9             C      	RET
  042C*                  C      SY.AEIN:
  042C*   CD 02AA*       C      	CALL	SY.CPOS	;<A> --> Cursorposition
  042F*   71             C      	LD	M,C
  0430*   CD 030A*       C      	CALL	SY.ISPOS
  0433*   DC 02EB*       C      	CALL	C,SY.DSPOS
  0436*   C9             C      	RET
  0437*                  C      SY.NL:
  0437*   CD 02A5*       C      	CALL	SY.ZLPOS	;Startroutine (NEWLINE Taste)
  043A*   7E             C      	LD	A,M
  043B*   FE 3A          C      	CP	':'
  043D*   C0             C      	RET	NZ
  043E*   CD 046F*       C      	CALL	SY.SZEI
  0441*   C8             C      	RET	Z
  0442*   EB             C      	EX	DE,HL
  0443*                  C      SY.SUCHE:
  0443*   21 0000        C      	LD	HL,0
  0446*   E5             C      	PUSH	HL
  0447*   E5             C      	PUSH	HL
  0448*                  C      SY.SUCH2:
  0448*   C1             C      	POP	BC
  0449*   E1             C      	POP	HL
  044A*                  C      SY.SUCH1:
  044A*   7D             C      	LD	A,L
  044B*   ED A1          C      	CPI
  044D*   E2 0006        C      	JP	PO,SD.SYSTA+6
  0450*   20 F8          C      	JR	NZ,SY.SUCH1
  0452*   7C             C      	LD	A,H
  0453*   BE             C      	CP	M
  0454*   20 F4          C      	JR	NZ,SY.SUCH1
  0456*   E5             C      	PUSH	HL
  0457*   C5             C      	PUSH	BC
  0458*   06 04          C      	LD	B,4	;Programmanfang suchen
  045A*   23             C      	INC	HL
  045B*   CD 0464*       C      	CALL	SY.VERGL
  045E*   20 E8          C      	JR	NZ,SY.SUCH2
  0460*   C1             C      	POP	BC
  0461*   D1             C      	POP	DE
  0462*   FB             C      	EI
  0463*   E9             C      	JP	(HL)
  0464*                  C      SY.VERGL:
  0464*   D5             C      	PUSH	DE	;DE = gegebene  ZK
  0465*                  C      SY.VERG1:
  0465*   1A             C      	LD	A,(DE)	;B  = Laenge
  0466*   BE             C      	CP	M	;HL = vermutete ZK
  0467*   20 04          C      	JR	NZ,SY.VERG2
  0469*   13             C      	INC	DE
  046A*   23             C      	INC	HL
  046B*   10 F8          C      	DJNZ	SY.VERG1
  046D*                  C      SY.VERG2:
  046D*   D1             C      	POP	DE	;Z=1: Kette gefunden B=0
  046E*   C9             C      	RET		;HL=Kette+1  DE:=DE
  046F*                  C      SY.SZEI:
  046F*   3A 0DC1*       C      	LD	A,(SM.SPANZ)	;Zeichen suchen
  0472*                  C      SY.SZEI1:
  0472*   47             C      	LD	B,A
  0473*   05             C      	DEC	B
  0474*                  C      SY.SZEI3:
  0474*   23             C      	INC	HL
  0475*                  C      SY.SZEI4:
  0475*   7E             C      	LD	A,M
  0476*   FE 20          C      	CP	SD.SPACE
  0478*   C0             C      	RET	NZ
  0479*                  C      SY.SZEI2:
  0479*   10 F9          C      	DJNZ	SY.SZEI3
  047B*   C9             C      	RET		;Z=0 falls kein Zeichen
  047C*                  C      SY.SZAHL:
  047C*   E5             C      	PUSH	HL
  047D*   2A 0DB7*       C      	LD	HL,(SM.SMIN)
  0480*                  C      SY.SZA1:
  0480*   3A 0DB9*       C      	LD	A,(SM.SMAX)
  0483*   18 07          C      	JR	SY.ZAHL
  0485*                  C      SY.ZZAHL:
  0485*   E5             C      	PUSH	HL
  0486*   2A 0DB6*       C      	LD	HL,(SM.ZMIN)
  0489*                  C      SY.ZZA1:
  0489*   3A 0DB8*       C      	LD	A,(SM.ZMAX)
  048C*                  C      SY.ZAHL:
  048C*   95             C      	SUB	L
  048D*   3C             C      	INC	A
  048E*   E1             C      	POP	HL
  048F*   C9             C      	RET		;A=Zeilen- bzw. Spaltenanzahl
'Betriebssystemkern DEG2000 Version 1.2'	MACRO-80 3.44	09-Dec-81	PAGE	1-17


                         C      
                         C      			;Stand: 28.Januar 85 - K EAW/wfvm..MSH
                         C      
                         C      ;	END
                         C      	INCLUDE S101.MAC
                         C      	TITLE	'Systemroutinen  DEG 2000    Version 1.2'
                         C      	PAGE
'Systemroutinen  DEG 2000    Version 1.2'	MACRO-80 3.44	09-Dec-81	PAGE	1-18


                         C      
                         C      ;	PN	S101
                         C      ;****************************************************************
                         C      ;*                  Systemroutinen  DEG2000    Version 1.2      *
                         C      ;*  Version         --------------------------------------------*
                         C      ;*                  Programmierer: M. Herbote  K EAW  ZFT (WFT) *
                         C      ;*  V 1 . 2         --------------------------------------------*
                         C      ;*                  Stand        : 30.Januar 1985               *
                         C      ;****************************************************************
  0490*   0490*          C      	DW	$
  0492*   42 49 4C 44    C      	DB	'BILD'
                         C      
  0496*   11 3327        C      	LD	DE,SD.BWSA + 10*80 + 7	;327H
  0499*   CD 5761        C      	CALL	UC.CVDB
  049C*   D8             C      	RET	C
  049D*   AF             C      	XOR	A
  049E*   BC             C      	CP	H
  049F*   C0             C      	RET	NZ
  04A0*   3E 10          C      	LD	A,16
  04A2*   BD             C      	CP	L
  04A3*   D8             C      	RET	C
  04A4*   45             C      	LD	B,L
  04A5*   C5             C      	PUSH	BC
  04A6*   21 8830        C      	LD	HL,SD.TPA
  04A9*   E5             C      	PUSH	HL
  04AA*   11 8831        C      	LD	DE,SD.TPA+1
  04AD*   36 20          C      	LD	(HL),20H
  04AF*   01 73CE        C      	LD	BC,SD.TPE-SD.TPA-1
  04B2*   ED B0          C      	LDIR
  04B4*   E1             C      	POP	HL
  04B5*   C1             C      	POP	BC
  04B6*                  C      S1.BI1:
  04B6*   C5             C      	PUSH	BC
  04B7*   CD 04D6*       C      	CALL	S1.STR
  04BA*   06 14          C      	LD	B,20
  04BC*   11 004E        C      	LD	DE,78
  04BF*                  C      S1.BI2:
  04BF*   36 7C          C      	LD	(HL),7CH
  04C1*   19             C      	ADD	HL,DE
  04C2*   36 7C          C      	LD	(HL),7CH
  04C4*   23             C      	INC	HL
  04C5*   36 1E          C      	LD	(HL),1EH
  04C7*   23             C      	INC	HL
  04C8*   10 F5          C      	DJNZ	S1.BI2
  04CA*   CD 04D6*       C      	CALL	S1.STR
  04CD*   C1             C      	POP	BC
  04CE*   10 E6          C      	DJNZ	S1.BI1
  04D0*   22 0DC6*       C      	LD	(SM.END),HL
  04D3*   C3 000B*       C      	JP	SY.SYSTB
                         C      
  04D6*                  C      S1.STR:
  04D6*   E5             C      	PUSH	HL
  04D7*   D1             C      	POP	DE
  04D8*   13             C      	INC	DE
  04D9*   01 004F        C      	LD	BC,79
  04DC*   36 2D          C      	LD	(HL),2DH
  04DE*   ED B0          C      	LDIR
  04E0*   36 1E          C      	LD	(HL),1EH
  04E2*   23             C      	INC	HL
  04E3*   C9             C      	RET
                         C      
                         C      	PAGE
'Systemroutinen  DEG 2000    Version 1.2'	MACRO-80 3.44	09-Dec-81	PAGE	1-19


                         C      
                         C      ;****************************************************************
                         C      ;*                  Hardcopy-Tastenfunktion Version 1.1         *
                         C      ;****************************************************************
  04E4*                  C      S1.COPG:
  04E4*   F5             C      	PUSH	AF
  04E5*   C5             C      	PUSH	BC
  04E6*   E5             C      	PUSH	HL
  04E7*   06 16          C      	LD	B,22	;Anzahl der Zeilen
  04E9*   0E 50          C      	LD	C,80	;Anzahl der Spalten
  04EB*   21 3000        C      	LD	HL,SD.BWSA	;Bildschirmanfang
  04EE*   CD 04FD*       C      	CALL	S1.HCP
  04F1*   3E 1E          C      	LD	A,1EH
  04F3*   CD 4881*       C      	CALL	P1.PRINT
  04F6*   CD 4881*       C      	CALL	P1.PRINT
  04F9*   E1             C      	POP	HL
  04FA*   C1             C      	POP	BC
  04FB*   F1             C      	POP	AF
  04FC*   C9             C      	RET
                         C      
  04FD*                  C      S1.HCP:
  04FD*   F5             C      	PUSH	AF
  04FE*   C5             C      	PUSH	BC
  04FF*   D5             C      	PUSH	DE
  0500*   E5             C      	PUSH	HL
  0501*   11 0050        C      	LD	DE,80
  0504*                  C      S1.M1:
  0504*   C5             C      	PUSH	BC
  0505*   E5             C      	PUSH	HL
  0506*   41             C      	LD	B,C	;Spaltenanzahl
                         C      
  0507*                  C      S1.M2:
  0507*   7E             C      	LD	A,(HL)
  0508*   CD 0520*       C      	CALL	S1.KODE
  050B*   CD 4881*       C      	CALL	P1.PRINT
  050E*   23             C      	INC	HL
  050F*   10 F6          C      	DJNZ	S1.M2
                         C      
  0511*   3E 1E          C      	LD	A,1EH
  0513*   CD 4881*       C      	CALL	P1.PRINT
  0516*   E1             C      	POP	HL
  0517*   19             C      	ADD	HL,DE
  0518*   C1             C      	POP	BC
  0519*   10 E9          C      	DJNZ	S1.M1
                         C      
  051B*   E1             C      	POP	HL
  051C*   D1             C      	POP	DE
  051D*   C1             C      	POP	BC
  051E*   F1             C      	POP	AF
  051F*   C9             C      	RET
                         C      
  0520*                  C      S1.KODE:
  0520*   CB BF          C      	RES	7,A
  0522*   FE 7F          C      	CP	7FH
  0524*   20 02          C      	JR	NZ,S1.KODE1
  0526*   3E 2E          C      	LD	A,2EH
  0528*                  C      S1.KODE1:
  0528*   FE 20          C      	CP	20H
  052A*   D0             C      	RET	NC
  052B*   3E 20          C      	LD	A,20H
  052D*   C9             C      	RET
                         C      
                         C      ;	DEFS	8,0
                         C      
                         C      	PAGE
'Systemroutinen  DEG 2000    Version 1.2'	MACRO-80 3.44	09-Dec-81	PAGE	1-20


                         C      
                         C      ;****************************************************************
                         C      ;	ORG	00800H
                         C      			;
  052E*                  C      S1.STANL:
  052E*   CD 0542*       C      	CALL	S1.SPOSN
  0531*   CD 02AA*       C      	CALL	SY.CPOS
  0534*   CD 0425*       C      	CALL	SY.DEL2	;RESTZEILE LOESCHEN
  0537*   CD 02A0*       C      	CALL	SY.ZLPOF
  053A*   CD 047C*       C      	CALL	SY.SZAHL
  053D*   47             C      	LD	B,A
  053E*   CD 0475*       C      	CALL	SY.SZEI4	;ZEICHEN SUCHEN
  0541*   C9             C      	RET		;A=ZEICH. SONST Z=0
                         C      
                         C      ;ZEILENLAENGE HINTER EINSCHLIESSLICH CPOS
                         C      
  0542*                  C      S1.SPOSN:
  0542*   C5             C      	PUSH	BC
  0543*   ED 4B 0DB5*    C      	LD	BC,(SM.SPOS)
  0547*   3A 0DB9*       C      	LD	A,(SM.SMAX)
  054A*   91             C      	SUB	C
  054B*   C1             C      	POP	BC
  054C*   C9             C      	RET		;A=SPALTENZAHL DER RESTZEILE
                         C      
                         C      ;FORMATZEILENENDE
                         C      
  054D*                  C      S1.ZENDF:
  054D*   CD 02A5*       C      	CALL	SY.ZLPOS
  0550*                  C      S1.ENDF2:
  0550*   ED 5B 0DB9*    C      	LD	DE,(SM.SMAX)
  0554*                  C      S1.ENDF1:
  0554*   16 00          C      	LD	D,0
  0556*   1D             C      	DEC	E
  0557*   19             C      	ADD	HL,DE	;HL=ADR.ZEILENENDE
  0558*   C9             C      	RET
                         C      
                         C      ;AUSTAUSCH FORMATMERKER <--> ZWEITMERKER
                         C      
  0559*                  C      S1.FOEX:
  0559*   21 0DB4*       C      	LD	HL,SM.ZPOS
  055C*   11 0DBA*       C      	LD	DE,SM.ZPOS2
  055F*   06 06          C      	LD	B,6
  0561*                  C      S1.FOEX1:
  0561*   4E             C      	LD	C,M
  0562*   1A             C      	LD	A,(DE)
  0563*   77             C      	LD	M,A
  0564*   79             C      	LD	A,C
  0565*   12             C      	LD	(DE),A
  0566*   23             C      	INC	HL
  0567*   13             C      	INC	DE
  0568*   10 F7          C      	DJNZ	S1.FOEX1
  056A*   C9             C      	RET
                         C      
                         C      ;KONVERTIERUNG HEXA.WERT IN HL --> ISO.-DEZ.ZAHL AB (DE)
                         C      
  056B*                  C      S1.HDI:
  056B*   01 2710        C      	LD	BC,10000
  056E*   CD 0589*       C      	CALL	S1.HDI1
  0571*   01 03E8        C      	LD	BC,1000
  0574*   CD 0589*       C      	CALL	S1.HDI1
  0577*   01 0064        C      	LD	BC,100
  057A*   CD 0589*       C      	CALL	S1.HDI1
  057D*   01 000A        C      	LD	BC,10
  0580*   CD 0589*       C      	CALL	S1.HDI1
  0583*   7D             C      	LD	A,L
  0584*   F6 30          C      	OR	30H
  0586*   13             C      	INC	DE
  0587*   12             C      	LD	(DE),A
  0588*   C9             C      	RET
  0589*                  C      S1.HDI1:
  0589*   CD 059C*       C      	CALL	S1.DIV
  058C*   F6 30          C      	OR	30H
  058E*   FE 30          C      	CP	30H
  0590*   20 07          C      	JR	NZ,S1.HDI3
  0592*   47             C      	LD	B,A
  0593*   1A             C      	LD	A,(DE)
  0594*   FE 20          C      	CP	SD.SPACE
  0596*   28 01          C      	JR	Z,S1.HDI3
  0598*   78             C      	LD	A,B
  0599*                  C      S1.HDI3:
  0599*   13             C      	INC	DE
  059A*   12             C      	LD	(DE),A
'Systemroutinen  DEG 2000    Version 1.2'	MACRO-80 3.44	09-Dec-81	PAGE	1-21


  059B*   C9             C      	RET
                         C      
                         C      ;DIVISION HL/BC
                         C      
  059C*                  C      S1.DIV:
  059C*   AF             C      	XOR	A
  059D*                  C      S1.DIV1:
  059D*   ED 42          C      	SBC	HL,BC
  059F*   3C             C      	INC	A
  05A0*   30 FB          C      	JR	NC,S1.DIV1
  05A2*   09             C      	ADD	HL,BC
  05A3*   3D             C      	DEC	A	;A:=HL/BC  HL:=REST
  05A4*   C9             C      	RET
                         C      
                         C      ;KONVERTIERUNG ISO.-DEZ.-ZAHL AB (DE) --> HEXA.-WERT IN HL
                         C      ;ZAHL <10000H
                         C      
  05A5*                  C      S1.IDH:
  05A5*   0E 06          C      	LD	C,6
  05A7*   CD 05C4*       C      	CALL	S1.IDH1
  05AA*   D8             C      	RET	C	;CY=1 FEHLER: KEINE ZAHL AB (DE)
  05AB*   26 00          C      	LD	H,0
  05AD*                  C      S1.IDH2:
  05AD*   6F             C      	LD	L,A
  05AE*   13             C      	INC	DE
  05AF*   0D             C      	DEC	C
  05B0*   C8             C      	RET	Z		;Z=1 FEHLER: STELLENZAHL >5
  05B1*                  C      S1.IDH3:
  05B1*   CD 05C4*       C      	CALL	S1.IDH1
  05B4*   38 0A          C      	JR	C,S1.IDHE	;CY=1 WENN ZAHL ZUENDE
  05B6*   CD 05D3*       C      	CALL	S1.MUL10
  05B9*   38 03          C      	JR	C,S1.IDHF	;CY=1 WENN ZAHL >FFFFH
  05BB*   C3 06BD*       C      	JP	S1.IDH41
  05BE*                  C      S1.IDHF:
  05BE*   AF             C      	XOR	A
  05BF*   C9             C      	RET		;Z=1 FEHLER: ZAHL >FFFFH
  05C0*                  C      S1.IDHE:
  05C0*   3E 01          C      	LD	A,1
  05C2*   B7             C      	OR	A
  05C3*   C9             C      	RET		;Z=CY=0 KEIN FEHLER
                         C      
  05C4*                  C      S1.IDH1:
  05C4*   1A             C      	LD	A,(DE)
  05C5*   CD 05CC*       C      	CALL	S1.SIEBD
  05C8*   D8             C      	RET	C
  05C9*   E6 0F          C      	AND	0FH
  05CB*   C9             C      	RET
                         C      
                         C      ;TEST: ISOZEICHEN = ZIFFER ?
                         C      
  05CC*                  C      S1.SIEBD:
  05CC*   FE 30          C      	CP	'0'
  05CE*   D8             C      	RET	C
  05CF*   FE 3A          C      	CP	3AH
  05D1*   3F             C      	CCF
  05D2*   C9             C      	RET		;CY=1 WENN A KEINE DEZ. ZIFFER
                         C      
                         C      ;MULTIPLIKATION HL*10
                         C      
  05D3*                  C      S1.MUL10:
  05D3*   D5             C      	PUSH	DE
  05D4*   E5             C      	PUSH	HL
  05D5*   D1             C      	POP	DE
  05D6*   29             C      	ADD	HL,HL
  05D7*   29             C      	ADD	HL,HL
  05D8*   19             C      	ADD	HL,DE
  05D9*   29             C      	ADD	HL,HL
  05DA*   D1             C      	POP	DE
  05DB*   C9             C      	RET		;HL:=HL*10
                         C      
                         C      ;MELDUNGEN
                         C      ;DE=AUSZUGEBENDE ZEICHENKETTE, HL=DEZIMAL AUSZUGEBENDE HEXA-
                         C      ;ZAHL, A=ZEILENNUMMER, BC=DISTANZ VON ZEILENANFANG (AUCH
                         C      ;NEGATIV ZUGELASSEN
                         C      
  05DC*                  C      S1.MELDN:
  05DC*   3D             C      	DEC	A	;A=ZEILENNUMMER
  05DD*                  C      S1.MELDE:
  05DD*   E5             C      	PUSH	HL	;A=ZEILENNUMMER-1
  05DE*   21 3000        C      	LD	HL,SD.BWSA
  05E1*   09             C      	ADD	HL,BC
  05E2*   CD 02D2*       C      	CALL	SY.AMSZ
  05E5*   EB             C      	EX	DE,HL	;DE=BWSA+BC+ A*(SPANZ)
'Systemroutinen  DEG 2000    Version 1.2'	MACRO-80 3.44	09-Dec-81	PAGE	1-22


  05E6*   CD 0415*       C      	CALL	SY.MELD	;HL=ZEICHENKETTE
  05E9*   E1             C      	POP	HL	;HL=ZAHL
  05EA*   C3 056B*       C      	JP	S1.HDI
                         C      
                         C      ;FEHLERMELDUNGEN
                         C      
  05ED*                  C      S1.ERROR:
  05ED*   CD 0332*       C      	CALL	SY.LCPOS
  05F0*                  C      S1.ERRO:
  05F0*   26 00          C      	LD	H,0
  05F2*   69             C      	LD	L,C
  05F3*   3A 0DB4*       C      	LD	A,(SM.ZPOS)
  05F6*   3C             C      	INC	A
  05F7*   01 FFF5        C      	LD	BC,-11
  05FA*   11 05FF*       C      	LD	DE,S1.ZS11
  05FD*   18 DE          C      	JR	S1.MELDE
                         C      
                         C      ;ZEICHENKETTEN FUER MELDUNGEN
                         C      
  05FF*                  C      S1.ZS11:
  05FF*   05             C      	DB	LOW(S1.LZS11)
  0600*   45 52 52 4F    C      	DB	'ERROR'
  0604*   52             C      
  0005                   C      S1.LZS11	EQU	$-S1.ZS11-1
  0605*                  C      S1.ZS12:
  0605*   05             C      	DB	LOW(S1.LZS12)
  0606*   5A 45 49 4C    C      	DB	'ZEILE'
  060A*   45             C      
  0005                   C      S1.LZS12	EQU	$-S1.ZS12-1
  060B*                  C      S1.ZS13:
  060B*   0E             C      	DB	LOW(S1.LZS13)
  060C*   4D 45 4D 4F    C      	DB	'MEMORY RESERVE'
  0610*   52 59 20 52    C      
  0614*   45 53 45 52    C      
  0618*   56 45          C      
  000E                   C      S1.LZS13	EQU	$-S1.ZS13-1
                         C      
                         C      ;ZEICHENKETTE LAENGE ERMITTELN
                         C      
  061A*                  C      S1.KETTE:
  061A*   48             C      	LD	C,B	;B=LAENGE SUCHBEREICH
  061B*   18 04          C      	JR	S1.KET3
  061D*                  C      S1.KET1:
  061D*   23             C      	INC	HL
  061E*   BE             C      	CP	M
  061F*   28 04          C      	JR	Z,S1.KET2
  0621*                  C      S1.KET3:
  0621*   10 FA          C      	DJNZ	S1.KET1
  0623*   37             C      	SCF
  0624*   C9             C      	RET		;CY=1=FEHLER
  0625*                  C      S1.KET2:
  0625*   79             C      	LD	A,C
  0626*   3D             C      	DEC	A
  0627*   90             C      	SUB	B	;A=LAENGE ZEICHENKETTE
  0628*   C9             C      	RET
                         C      
                         C      ;ZEICHEN SUCHEN  (DE),(DE+1),...=SUCHBEREICH, B=LAENGE
                         C      
  0629*                  C      S1.SUZEI:
  0629*   EB             C      	EX	DE,HL
  062A*   CD 0479*       C      	CALL	SY.SZEI2
  062D*   EB             C      	EX	DE,HL	;A=ZEICHEN,DE=ADR.
  062E*   C9             C      	RET		;Z=1 WENN KEIN ZEICHEN
                         C      
                         C      ;ZAHL SUCHEN (DE),(DE+1),...=SUCHBEREICH, B=LAENGE
                         C      
  062F*                  C      S1.SUZA:
  062F*   CD 0629*       C      	CALL	S1.SUZEI
  0632*   C8             C      	RET	Z		;Z=1: KEIN ZEICHEN
  0633*                  C      S1.SUZA1:
  0633*   CD 05A5*       C      	CALL	S1.IDH
  0636*   D8             C      	RET	C	;Z=0 CY=1: FALSCHE ZAHL
  0637*   C0             C      	RET	NZ		;CY=Z=0: HL=ZAHL
  0638*                  C      S1.SUZA3:
  0638*   3E 01          C      	LD	A,1
  063A*   B7             C      	OR	A
  063B*   37             C      	SCF
  063C*   C9             C      	RET		;Z=0 CY=1: FALSCHE ZAHL
                         C      
                         C      ;ZAHL LESEN U. PRUEFEN: A'< ZAHL =< (IX+0)
                         C      ;FALLS BEDINGUNG ERFUELLT: L=ZAHL Z=CY=0
                         C      ;FALLS KEINE ZEICHEN: Z=1
                         C      ;FALLS FALSCHE ZAHL: CY=1
'Systemroutinen  DEG 2000    Version 1.2'	MACRO-80 3.44	09-Dec-81	PAGE	1-23


                         C      
  063D*                  C      S1.LT1Z:
  063D*   CD 062F*       C      	CALL	S1.SUZA
  0640*   D8             C      	RET	C
  0641*   C8             C      	RET	Z
  0642*   7C             C      	LD	A,H
  0643*   B7             C      	OR	A
  0644*   20 F2          C      	JR	NZ,S1.SUZA3
  0646*   DD 7E 00       C      	LD	A,(IX+0)
  0649*   BD             C      	CP	L
  064A*   D8             C      	RET	C
  064B*   08             C      	EX	AF,AF'	;'
  064C*   BD             C      	CP	L
  064D*   3F             C      	CCF
  064E*   C9             C      	RET
                         C      
  064F*                  C      S1.MX:
  064F*   DD E9          C      	JP	(IX)
                         C      
  0651*                  C      S1.RNR:
  0651*   E5             C      	PUSH	HL	;RECHTSROTIEREN VOR (HL)
  0652*   D1             C      	POP	DE	;BC=ANZAHL
  0653*   1A             C      	LD	A,(DE)
  0654*   2B             C      	DEC	HL
  0655*   ED B8          C      	LDDR
  0657*   12             C      	LD	(DE),A
  0658*   C9             C      	RET
                         C      
  0659*                  C      S1.RNL:
  0659*   E5             C      	PUSH	HL	;LINKSROTIEREN HINTER (HL)
  065A*   D1             C      	POP	DE	;BC=ANZAHL
  065B*   1A             C      	LD	A,(DE)
  065C*   23             C      	INC	HL
  065D*   ED B0          C      	LDIR
  065F*   12             C      	LD	(DE),A
  0660*   C9             C      	RET
                         C      
                         C      ;UMSCHALTEN AUF KLEINBUCHSTABEN
                         C      
  0661*                  C      S1.UMS:
  0661*   21 0DA7*       C      	LD	HL,SM.UMERK
  0664*   7E             C      	LD	A,M
  0665*   EE 20          C      	XOR	20H
  0667*   77             C      	LD	M,A
  0668*   C9             C      	RET
                         C      
                         C      ;INPTR --UNTERPROGRAMM BESTIMMT PARAMETER NACH BEFEHLSNAME
                         C      ;D=PARAMETER BINAER
                         C      ;SM.PARAM -- SM.PARAM + 3 = PARAMETER HEXA
                         C      ;
  0669*                  C      S1.INPTR:
  0669*   21 3327        C      	LD	HL,SD.BWSA + 10*80 + 7	;327H
  066C*   01 0004        C      	LD	BC,4
  066F*   11 0E22*       C      	LD	DE,SM.PARAM
  0672*   ED B0          C      	LDIR
  0674*   CD 036E*       C      	CALL	SY.BILO
  0677*   21 0E22*       C      	LD	HL,SM.PARAM
  067A*   CD 067F*       C      	CALL	S1.HBKON
  067D*   57             C      	LD	D,A
  067E*   C9             C      	RET
                         C      ;
                         C      ;HBKON -- HEXADEZIMAL BINAER KONVERTIERUNG
                         C      ;         HL = ANFANGSADRESSE DES HEXAZEICHEN
                         C      ;         A = BINAERZEICHEN
                         C      ;
  067F*                  C      S1.HBKON:
  067F*   C5             C      	PUSH	BC
  0680*   7E             C      	LD	A,(HL)	;1.ZEICHEN
  0681*   06 00          C      	LD	B,0
  0683*   CD 0696*       C      	CALL	S1.KON1
  0686*   CB 10          C      	RL	B
  0688*   CB 10          C      	RL	B
  068A*   CB 10          C      	RL	B
  068C*   CB 10          C      	RL	B
  068E*   23             C      	INC	HL
  068F*   7E             C      	LD	A,(HL)
  0690*   CD 0696*       C      	CALL	S1.KON1
  0693*   78             C      	LD	A,B
  0694*   C1             C      	POP	BC
  0695*   C9             C      	RET
                         C      ;
  0696*                  C      S1.KON1:
  0696*   D6 30          C      	SUB	30H
'Systemroutinen  DEG 2000    Version 1.2'	MACRO-80 3.44	09-Dec-81	PAGE	1-24


  0698*   FE 0A          C      	CP	10	;CHARACTER?
  069A*   38 04          C      	JR	C,S1.ZAHL
  069C*   E6 0F          C      	AND	0FH	;NO
  069E*   C6 09          C      	ADD	A,9
  06A0*                  C      S1.ZAHL:
  06A0*   B0             C      	OR	B
  06A1*   47             C      	LD	B,A
  06A2*   C9             C      	RET
                         C      ;
                         C      ;BHKON -- KONVERTIERE 8 BIT VON REG. A IN ASCII HEXA AUF (HL)
                         C      ;
  06A3*                  C      S1.BHKON:
  06A3*   F5             C      	PUSH	AF	;RETTE A
  06A4*   1F             C      	RRA
  06A5*   1F             C      	RRA
  06A6*   1F             C      	RRA
  06A7*   1F             C      	RRA
  06A8*   CD 06B1*       C      	CALL	S1.KON2	;KONVERTIERE HIGH ORDER 4 BITS
  06AB*   F1             C      	POP	AF
  06AC*   23             C      	INC	HL
  06AD*   CD 06B1*       C      	CALL	S1.KON2	;KONVERTIERE LOW ORDER 4 BITS
  06B0*   C9             C      	RET
                         C      ;
  06B1*                  C      S1.KON2:
  06B1*   E6 0F          C      	AND	0FH	;MASKE FUER LOW ORDER 4 BITS
  06B3*   FE 0A          C      	CP	10
  06B5*   38 02          C      	JR	C,S1.HB10
  06B7*   C6 07          C      	ADD	A,7
  06B9*                  C      S1.HB10:
  06B9*   C6 30          C      	ADD	A,30H
  06BB*   77             C      	LD	(HL),A
  06BC*   C9             C      	RET
                         C      ;
  06BD*                  C      S1.IDH41:
  06BD*   85             C      	ADD	A,L
  06BE*   D2 05AD*       C      	JP	NC,S1.IDH2
  06C1*   24             C      	INC	H
  06C2*   C3 05AD*       C      	JP	S1.IDH2
                         C      
                         C      	PAGE
'Systemroutinen  DEG 2000    Version 1.2'	MACRO-80 3.44	09-Dec-81	PAGE	1-25


                         C      
                         C      ;****************************************************************
                         C      ;*                  E X E C --- Starten eines Programmes        *
                         C      ;****************************************************************
  06C5*   06C5*          C      	DW	$
  06C7*   45 58 45 43    C      	DB	'EXEC'
  06CB*   CD 0669*       C      	CALL	S1.INPTR
  06CE*   23             C      	INC	HL
  06CF*   CD 067F*       C      	CALL	S1.HBKON
  06D2*   5F             C      	LD	E,A
  06D3*   31 0CE0        C      	LD	SP,SM.STACK
  06D6*   01 000B*       C      	LD	BC,SY.SYSTB
  06D9*   C5             C      	PUSH	BC
  06DA*   D5             C      	PUSH	DE
  06DB*   C9             C      	RET
                         C      ;****************************************************************
                         C      
  06DC*   06DC*          C      	DW	$
  06DE*   44 41 54 45    C      	DB	'DATE'
  06E2*   11 3327        C      	LD	DE,SD.BWSA + 10*80 + 7	;327H
  06E5*   1A             C      	LD	A,(DE)
  06E6*   FE 20          C      	CP	20H
  06E8*   20 0A          C      	JR	NZ,S1.DA1
                         C      ;			;Kein Parameter, dann akt. Datum holen
  06EA*   21 076A*       C      	LD	HL,S1.STAB	;Date location
  06ED*   01 03FE        C      	LD	BC,003FEH	;actual Date ermitteln
  06F0*   ED B2          C      	INIR
  06F2*   18 09          C      	JR	S1.DA2
                         C      ;
  06F4*                  C      S1.DA1:
  06F4*   21 0FF0        C      	LD	HL,SM.DATUM
  06F7*   E5             C      	PUSH	HL
  06F8*   CD 0703*       C      	CALL	S1.EING
  06FB*   E1             C      	POP	HL
  06FC*   D8             C      	RET	C
                         C      ;
  06FD*                  C      S1.DA2:
  06FD*   CD 0726*       C      	CALL	S1.ANZG
  0700*   C3 000B*       C      	JP	SY.SYSTB
                         C      ;
  0703*                  C      S1.EING:
  0703*   06 03          C      	LD	B,3
  0705*   11 3327        C      	LD	DE,SD.BWSA + 10*80 + 7	;327H
  0708*   1A             C      	LD	A,(DE)
  0709*   FE 20          C      	CP	20H
  070B*   C8             C      	RET	Z
  070C*                  C      S1.EIN1:
  070C*   E5             C      	PUSH	HL
  070D*   CD 5761        C      	CALL	UC.CVDB
  0710*   38 11          C      	JR	C,S1.RET
  0712*   AF             C      	XOR	A
  0713*   BC             C      	CP	H
  0714*   20 0D          C      	JR	NZ,S1.RET
  0716*   7D             C      	LD	A,L
  0717*   FE 64          C      	CP	100
  0719*   30 08          C      	JR	NC,S1.RET
  071B*   E1             C      	POP	HL
  071C*   77             C      	LD	(HL),A
  071D*   23             C      	INC	HL
  071E*   13             C      	INC	DE
  071F*   10 EB          C      	DJNZ	S1.EIN1
  0721*   AF             C      	XOR	A
  0722*   C9             C      	RET
  0723*                  C      S1.RET:
  0723*   E1             C      	POP	HL
  0724*   37             C      	SCF
  0725*   C9             C      	RET
                         C      
  0726*                  C      S1.ANZG:
  0726*   E5             C      	PUSH	HL
  0727*   CD 0747*       C      	CALL	S1.TEST
  072A*   DC 075E*       C      	CALL	C,S1.STAND
  072D*   E1             C      	POP	HL
  072E*   11 30B8        C      	LD	DE,SD.BWSA + 2*80 + 24 ;0B8H
  0731*   06 03          C      	LD	B,3
  0733*                  C      S1.ANZ1:
  0733*   E5             C      	PUSH	HL
  0734*   6E             C      	LD	L,(HL)
  0735*   26 00          C      	LD	H,0
  0737*   CD 571C        C      	CALL	UC.CVBD2
  073A*   3E 2E          C      	LD	A,2EH
  073C*   12             C      	LD	(DE),A
'Systemroutinen  DEG 2000    Version 1.2'	MACRO-80 3.44	09-Dec-81	PAGE	1-26


  073D*   13             C      	INC	DE
  073E*   E1             C      	POP	HL
  073F*   23             C      	INC	HL
  0740*   10 F1          C      	DJNZ	S1.ANZ1
  0742*   1B             C      	DEC	DE
  0743*   3E 20          C      	LD	A,20H
  0745*   12             C      	LD	(DE),A
  0746*   C9             C      	RET
                         C      
  0747*                  C      S1.TEST:
  0747*   AF             C      	XOR	A
  0748*   BE             C      	CP	(HL)
  0749*   28 11          C      	JR	Z,S1.TE1
  074B*   3E 1F          C      	LD	A,31
  074D*   BE             C      	CP	(HL)
  074E*   38 0C          C      	JR	C,S1.TE1
  0750*   23             C      	INC	HL
  0751*   AF             C      	XOR	A
  0752*   BE             C      	CP	(HL)
  0753*   28 07          C      	JR	Z,S1.TE1
  0755*   3E 0C          C      	LD	A,12
  0757*   BE             C      	CP	(HL)
  0758*   38 02          C      	JR	C,S1.TE1
  075A*   AF             C      	XOR	A
  075B*   C9             C      	RET
  075C*                  C      S1.TE1:
  075C*   37             C      	SCF
  075D*   C9             C      	RET
                         C      
  075E*                  C      S1.STAND:
  075E*   21 076A*       C      	LD	HL,S1.STAB
  0761*   11 0FF0        C      	LD	DE,SM.DATUM
  0764*   01 0003        C      	LD	BC,3
  0767*   ED B0          C      	LDIR
  0769*   C9             C      	RET
                         C      
  076A*                  C      S1.STAB:
  076A*   0F             C      	DB	15
  076B*   02             C      	DB	2
  076C*   55             C      	DB	85
                         C      
                         C      
                         C      	PAGE
'Systemroutinen  DEG 2000    Version 1.2'	MACRO-80 3.44	09-Dec-81	PAGE	1-27


                         C      
                         C      ;****************************************************************
                         C      ;*                  Editorkommandos  'EDN'                      *
                         C      ;****************************************************************
  076D*                  C      S1.EDN:
  076D*   F3             C      	DI
  076E*   AF             C      	XOR	A
  076F*   2A 0DC6*       C      	LD	HL,(SM.END)
  0772*   11 8830        C      	LD	DE,SD.TPA
  0775*   ED 52          C      	SBC	HL,DE
                         C      ;	JP	C,SY.SYSTB
  0777*   D8             C      	RET	C
                         C      
  0778*   3E 1C          C      	LD	A,01CH
  077A*   32 0E28*       C      	LD	(SM.NUTZK),A
                         C      
  077D*   D5             C      	PUSH	DE
  077E*   2A 0FF7        C      	LD	HL,(SM.PTS)
  0781*   01 03FF        C      	LD	BC,03FFH	;0400H loescht sonst 0000H ein Byte
  0784*   E5             C      	PUSH	HL
  0785*   C5             C      	PUSH	BC
  0786*   ED 5B 0FF7     C      	LD	DE,(SM.PTS)
  078A*   13             C      	INC	DE
  078B*   36 00          C      	LD	(HL),0
  078D*   ED B0          C      	LDIR
  078F*   C1             C      	POP	BC
  0790*   D1             C      	POP	DE
  0791*   E1             C      	POP	HL
                         C      
  0792*                  C      S1.ED1:
  0792*   3E 3A          C      	LD	A,03AH
  0794*   BE             C      	CP	(HL)
  0795*   23             C      	INC	HL
  0796*   28 05          C      	JR	Z,S1.ED11
  0798*   CD 07D3*       C      	CALL	S1.ETEST
  079B*   18 F5          C      	JR	S1.ED1
                         C      
  079D*                  C      S1.ED11:
  079D*   23             C      	INC	HL
  079E*   CD 07D3*       C      	CALL	S1.ETEST
  07A1*                  C      S1.ED2:
  07A1*   AF             C      	XOR	A
  07A2*   BE             C      	CP	(HL)
  07A3*   28 0D          C      	JR	Z,S1.ED3
  07A5*                  C      S1.ED6:
  07A5*   ED A0          C      	LDI
  07A7*   E2 07BD*       C      	JP	PO,S1.ED4
  07AA*   CD 07D3*       C      	CALL	S1.ETEST
  07AD*   B7             C      	OR	A
  07AE*   20 E2          C      	JR	NZ,S1.ED1
  07B0*   18 EF          C      	JR	S1.ED2
                         C      
  07B2*                  C      S1.ED3:
  07B2*   3A 0E28*       C      	LD	A,(SM.NUTZK)
  07B5*   3D             C      	DEC	A
  07B6*   32 0E28*       C      	LD	(SM.NUTZK),A
  07B9*   20 EA          C      	JR	NZ,S1.ED6
  07BB*   18 09          C      	JR	S1.ED5
  07BD*                  C      S1.ED4:
  07BD*   3A 0E28*       C      	LD	A,(SM.NUTZK)
  07C0*   47             C      	LD	B,A
  07C1*   AF             C      	XOR	A
  07C2*                  C      S1.ED7:
  07C2*   1B             C      	DEC	DE
  07C3*   12             C      	LD	(DE),A
  07C4*   10 FC          C      	DJNZ	S1.ED7
  07C6*                  C      S1.ED5:
  07C6*   2A 0FF7        C      	LD	HL,(SM.PTS)
  07C9*   22 0E19*       C      	LD	(SM.PTSA),HL
  07CC*   21 FFFF        C      	LD	HL,0FFFFH
  07CF*   22 0E17*       C      	LD	(SM.PTSE),HL
                         C      ;	JP	ED.MEL1
  07D2*   C9             C      	RET
                         C      
  07D3*                  C      S1.ETEST:
  07D3*   D5             C      	PUSH	DE
  07D4*   E5             C      	PUSH	HL
  07D5*   B7             C      	OR	A
  07D6*   ED 5B 0DC6*    C      	LD	DE,(SM.END)
  07DA*   ED 52          C      	SBC	HL,DE
  07DC*   E1             C      	POP	HL
  07DD*   D1             C      	POP	DE
'Systemroutinen  DEG 2000    Version 1.2'	MACRO-80 3.44	09-Dec-81	PAGE	1-28


  07DE*   D8             C      	RET	C
  07DF*   E1             C      	POP	HL
  07E0*   18 E4          C      	JR	S1.ED5
                         C      
                         C      			;Stand: 30.Januar 85 - K EAW/wfvm..MSH
                         C      
                         C      ;	END
                                
                                ;	INCLUDE ED01.MAC
                                ;	INCLUDE E101.MAC
                                ;	INCLUDE E201.MAC
                                ;	INCLUDE E301.MAC
                                ;	INCLUDE E401.MAC	;
                         C      	INCLUDE ED01.MAC	; Editor
                         C      	TITLE	'EDITOR --- Meldephase'
                         C      	PAGE
'EDITOR --- Meldephase'	MACRO-80 3.44	09-Dec-81	PAGE	1-29


                         C      
                         C      ;	PN	ED01
                         C      ;****************************************************************
                         C      ;*                  DEG 2000   V. 1.2     EDITOR --- Meldephase *
                         C      ;*  Version         --------------------------------------------*
                         C      ;*                  Programmierer: M. Herbote  K EAW  ZFT (WFT) *
                         C      ;*  V 1 . 2         --------------------------------------------*
                         C      ;*                  Stand        : 30.Januar 1985               *
                         C      ;****************************************************************
                         C      
                         C      	ORG	SD.EDITA
                         C      
  1000*   1000*          C      	DW	$
  1002*   45 44 49 54    C      	DB	'EDIT'          ;Editor normaler Start
  1006*                  C      ED.MELAN:
  1006*   F3             C      	DI
                         C      ; Parameter auswerten
                         C      ; EDIT  { |L|0|1|2|3}
                         C      ; EDIT N{ |L|0|1|2|3}
                         C      ; EDIT R{ |L|0|1|2|3}
  1007*   21 3327        C      	LD	HL,SD.BWSA + 10*80 +7
  100A*   7E             C      	LD	A,(HL)          ;erster Parameter { |N|R}
  100B*   FE 20          C      	CP	SD.SPACE
  100D*   20 08          C      	JR	NZ,ED.MEL12
  100F*   23             C      	INC	HL
  1010*   7E             C      	LD	A,(HL)          ;zweiter Parameter { |L|0|1|2|3}
  1011*   FE 20          C      	CP	SD.SPACE
  1013*   28 52          C      	JR	Z,ED.MEL1       ;altes Kommando 'ED  '
  1015*   18 10          C      	JR	ED.MEL21
                         C      
  1017*                  C      ED.MEL12:
  1017*   FE 4E          C      	CP	'N'
  1019*   20 05          C      	JR	NZ,ED.MEL13
  101B*   CD 0273*       C      	CALL	SY.QTABL        ;Standard TABs setzen (0,9,15,34)
  101E*   18 05          C      	JR	ED.MEL22
                         C      
  1020*                  C      ED.MEL13:
  1020*   FE 52          C      	CP	'R'
  1022*   C2 000B*       C      	JP	NZ,SY.SYSTB	;erster Parameter nicht { |N|R}
  1025*                  C      ED.MEL22:
  1025*   23             C      	INC	HL
  1026*   7E             C      	LD	A,(HL)
  1027*                  C      ED.MEL21:
  1027*   FE 4C          C      	CP	'L'
  1029*   20 05          C      	JR	NZ,ED.MEL14
  102B*   CD 49CA*       C      	CALL	PF.INIT1        ;Init Bereich ab (SM.PTS)
  102E*   18 37          C      	JR	ED.MEL1
                         C      
  1030*                  C      ED.MEL14:
  1030*   FE 30          C      	CP	'0'
  1032*   20 05          C      	JR	NZ,ED.MEL15
  1034*   CD 076D*       C      	CALL	S1.EDN          ;Uebernahme aus Editorbereich nach FC00H
  1037*   18 2E          C      	JR	ED.MEL1
                         C      
  1039*                  C      ED.MEL15:
  1039*   FE 31          C      	CP	'1'
  103B*   20 08          C      	JR	NZ,ED.MEL16
  103D*   21 49DD*       C      	LD	HL,PF.O1ANF
  1040*   11 4DB2*       C      	LD	DE,PF.O1END
  1043*   18 16          C      	JR	ED.MEL18
  1045*                  C      ED.MEL16:
  1045*   FE 32          C      	CP	'2'
  1047*   20 08          C      	JR	NZ,ED.MEL17
  1049*   21 4DB3*       C      	LD	HL,PF.O2ANF
  104C*   11 51CC*       C      	LD	DE,PF.O2END
  104F*   18 0A          C      	JR	ED.MEL18
  1051*                  C      ED.MEL17:
  1051*   FE 33          C      	CP	'3'
  1053*   20 0D          C      	JR	NZ,ED.MEL19
  1055*   21 51CD*       C      	LD	HL,PF.O3ANF
  1058*   11 51CF*       C      	LD	DE,PF.O3END
                         C      
  105B*                  C      ED.MEL18:
  105B*   22 0E19*       C      	LD	(SM.PTSA),HL
  105E*   ED 53 0E17*    C      	LD	(SM.PTSE),DE
  1062*                  C      ED.MEL19:
  1062*   18 03          C      	JR	ED.MEL1
                         C      
  1064*                  C      ED.MEL2:
  1064*   CD 1169*       C      	CALL	ED.UMLKP
                         C      
                         C      ; Eintrittspunkt fuer 'ED  ' und 'EDN '
'EDITOR --- Meldephase'	MACRO-80 3.44	09-Dec-81	PAGE	1-30


  1067*                  C      ED.MEL1:
  1067*   CD 036E*       C      	CALL	SY.BILO         ;Bild loeschen
  106A*                  C      ED.MEL11:
  106A*   CD 14F5*       C      	CALL	E2.RESET
  106D*   CD 12BC*       C      	CALL	E1.PUFLO        ;TP loeschen
  1070*   CD 03B7*       C      	CALL	SY.MEMLA        ;Fkt.Tast. u. RAM definieren
  1073*   21 109E*       C      	LD	HL,ED.MELNL
  1076*   22 0CE8*       C      	LD	(SM.FKTAB+(2*SM.FPQ)),HL
  1079*   21 0000        C      	LD	HL,0
  107C*   22 0DB0*       C      	LD	(SM.NEWL),HL	;NL--Taste def.
  107F*   3A 0DC0*       C      	LD	A,(SM.ZANZ)
  1082*   3D             C      	DEC	A
  1083*   32 0DB6*       C      	LD	(SM.ZMIN),A
  1086*   32 0DB8*       C      	LD	(SM.ZMAX),A	;Format: vorletzte Zeile
  1089*   CD 0291*       C      	CALL	SY.BWSAF
  108C*   EB             C      	EX	DE,HL
  108D*   21 1224*       C      	LD	HL,ED.ZED1
  1090*   CD 0415*       C      	CALL	SY.MELD	;Ausschrift
  1093*   EB             C      	EX	DE,HL
  1094*                  C      ED.MEL3:
  1094*   CD 0332*       C      	CALL	SY.LCPOS
  1097*   CD 01C9*       C      	CALL	SY.KOM	;Format ab CPOS
  109A*   CD 041C*       C      	CALL	SY.DELZL
  109D*   C9             C      	RET
                         C      
                         C      ;NL-Funktion in Meldephase
                         C      
  109E*                  C      ED.MELNL:
  109E*   AF             C      	XOR	A
  109F*   32 0D93*       C      	LD	(SM.FSTAT),A
  10A2*   CD 052E*       C      	CALL	S1.STANL	;Z=0 falls nur Space
  10A5*   28 20          C      	JR	Z,ED.VOLLF
  10A7*   FE 46          C      	CP	'F'
  10A9*   28 34          C      	JR	Z,ED.FREI
  10AB*   FE 51          C      	CP	'Q'
  10AD*   28 05          C      	JR	Z,ED.QUELL
  10AF*                  C      ED.ERRO1:
  10AF*   0E 01          C      	LD	C,1	;falsche Formatanweisung
  10B1*   C3 05ED*       C      	JP	S1.ERROR
                         C      
  10B4*                  C      ED.QUELL:
  10B4*   3E 80          C      	LD	A,80H
  10B6*   32 0D93*       C      	LD	(SM.FSTAT),A	;Quellcode Status
  10B9*   21 0D9B*       C      	LD	HL,SM.TABZ
  10BC*   36 00          C      	LD	M,SD.QTAB1
  10BE*   23             C      	INC	HL
  10BF*   36 09          C      	LD	M,SD.QTAB2
  10C1*   23             C      	INC	HL
  10C2*   36 0F          C      	LD	M,SD.QTAB3
  10C4*   23             C      	INC	HL
  10C5*   36 22          C      	LD	M,SD.QTAB4
  10C7*                  C      ED.VOLLF:
  10C7*   2A 0DC0*       C      	LD	HL,(SM.ZANZ)	;volles Format laden
  10CA*                  C      ED.FREI2:
  10CA*   2D             C      	DEC	L
  10CB*   2D             C      	DEC	L
  10CC*   22 0DBE*       C      	LD	(SM.ZMAX2),HL
  10CF*                  C      ED.KOMA2:
  10CF*   21 0000        C      	LD	HL,0
  10D2*   22 0DBA*       C      	LD	(SM.ZPOS2),HL
  10D5*   24             C      	INC	H
  10D6*   2C             C      	INC	L
  10D7*   22 0DBC*       C      	LD	(SM.ZMIN2),HL	;SPOS2,ZPOS2=SMIN2-1,ZMIN2-1
  10DA*   21 1067*       C      	LD	HL,ED.MEL1
  10DD*   18 1E          C      	JR	ED.KOMA3
                         C      
  10DF*                  C      ED.FREI:
  10DF*   EB             C      	EX	DE,HL
  10E0*   DD 21 0DC1*    C      	LD	IX,SM.SPANZ
  10E4*   AF             C      	XOR	A
  10E5*   08             C      	EX	AF,AF'	;'
  10E6*   CD 063D*       C      	CALL	S1.LT1Z	;freies Format
  10E9*   EB             C      	EX	DE,HL	;A<E=<(IX+0) BEI Z=CY=0
  10EA*   28 DB          C      	JR	Z,ED.VOLLF
  10EC*   38 C1          C      	JR	C,ED.ERRO1
  10EE*   2A 0DC0*       C      	LD	HL,(SM.ZANZ)
  10F1*   63             C      	LD	H,E
  10F2*   18 D6          C      	JR	ED.FREI2
                         C      
                         C      ;Kommandophase
                         C      
  10F4*                  C      ED.KOMA1:
  10F4*   CD 0559*       C      	CALL	S1.FOEX	;CPOS + Arb.Form. --> Zweitmerker
'EDITOR --- Meldephase'	MACRO-80 3.44	09-Dec-81	PAGE	1-31


  10F7*   CD 038B*       C      	CALL	SY.FKTLA	;RAM neu laden
  10FA*   21 1064*       C      	LD	HL,ED.MEL2	;Syst.Taste neu
  10FD*                  C      ED.KOMA3:
  10FD*   22 0D14*       C      	LD	(SM.FKTAB+(2*SM.FSYS)),HL
  1100*   21 1130*       C      	LD	HL,ED.KONEV
  1103*   22 0CE8*       C      	LD	(SM.FKTAB+(2*SM.FPQ)),HL
  1106*   21 113B*       C      	LD	HL,ED.KONER
  1109*   22 0CE8*       C      	LD	(SM.FKTAB+(2*SM.FPQ)),HL
  110C*   21 0DA7*       C      	LD	HL,SM.UMERK
  110F*   36 00          C      	LD	M,0
  1111*   11 0DA8*       C      	LD	DE,SM.UMERK+1
  1114*   01 000E        C      	LD	BC,SM.LOE1-1
  1117*   CD 03DB*       C      	CALL	SY.RALO1	;volles Format
  111A*   7D             C      	LD	A,L
  111B*   32 0DB6*       C      	LD	(SM.ZMIN),A	;Format letzte Zeile
  111E*   21 042C*       C      	LD	HL,SY.AEIN
  1121*   CD 03C0*       C      	CALL	SY.MEML1	;NEWL,DELZ,EINA laden
  1124*   21 0661*       C      	LD	HL,S1.UMS
  1127*   22 0DA8*       C      	LD	(SM.USCH),HL
  112A*   CD 0291*       C      	CALL	SY.BWSAF
  112D*   C3 1094*       C      	JP	ED.MEL3
                         C      
                         C      ;Start--Funktion in Kommandophase
                         C      
  1130*                  C      ED.KONEV:
  1130*   CD 1146*       C      	CALL	ED.KOEIN
  1133*   21 0D94*       C      	LD	HL,SM.STAT
  1136*   CB FE          C      	SET	7,M
  1138*   C3 14AF*       C      	JP	E2.TEX
                         C      
  113B*                  C      ED.KONER:
  113B*   CD 1146*       C      	CALL	ED.KOEIN
  113E*   21 0D94*       C      	LD	HL,SM.STAT
  1141*   CB BE          C      	RES	7,M
  1143*   C3 14AF*       C      	JP	E2.TEX
                         C      
  1146*                  C      ED.KOEIN:
  1146*   CD 1169*       C      	CALL	ED.UMLKP
  1149*   CD 052E*       C      	CALL	S1.STANL
  114C*   C4 1914*       C      	CALL	NZ,E3.KOMAN
  114F*                  C      ED.ARBPH:
  114F*   CD 0559*       C      	CALL	S1.FOEX
  1152*                  C      ED.ARBFK:
  1152*   21 1182*       C      	LD	HL,ED.FALFT     ;Fkt. fuer Arb.Phase init.
  1155*   11 0CE0*       C      	LD	DE,SM.FKTAB
  1158*   01 00A0        C      	LD	BC,0A0H
  115B*   ED B0          C      	LDIR
  115D*   21 1176*       C      	LD	HL,ED.FALAT
  1160*   11 0DA8*       C      	LD	DE,SM.USCH
  1163*   01 000C        C      	LD	BC,12
  1166*   ED B0          C      	LDIR
  1168*   C9             C      	RET
                         C      
  1169*                  C      ED.UMLKP:
  1169*   CD 0559*       C      	CALL	S1.FOEX         ;AUSTAUSCH FORMATMERKER <--> ZWEITMERKER
  116C*   CD 1822*       C      	CALL	E2.UML
  116F*   CD 12B1*       C      	CALL	E1.LOEBP        ;Bildpuffer loeschen
  1172*   CD 0559*       C      	CALL	S1.FOEX         ;AUSTAUSCH FORMATMERKER <--> ZWEITMERKER
  1175*   C9             C      	RET
                         C      
                         C      ;Fkt.Adressliste Alphatastatur
  1176*                  C      ED.FALAT:
  1176*   0661*          C      	DW	S1.UMS
  1178*   12EB*          C      	DW	E1.TAB
  117A*   13DB*          C      	DW	E1.DELZ
  117C*   12D4*          C      	DW	E1.LEERZ
  117E*   1243*          C      	DW	E1.CNEW
  1180*   1234*          C      	DW	E1.ZSCHS
                         C      
                         C      ;Funktionsadressliste Funktionstastatur
  1182*                  C      ED.FALFT:
  1182*   147F*          C      	DW	E1.HT      ;00	ET2
  1184*   136C*          C      	DW	E1.TCNZA   ;01	ET1
                         C      
  1186*   135D*          C      	DW	E1.TCNLS   ;02	NewLine
  1188*   1367*          C      	DW	E1.TCNUS   ;03  Down
  118A*   1484*          C      	DW	E2.TEXV    ;04	PosQuit
                         C      
  118C*   135D*          C      	DW	E1.TCNLS   ;05	Left
  118E*   1371*          C      	DW	E1.THOME   ;06	Home / Pos1
  1190*   1358*          C      	DW	E1.TCNRS   ;07	Right
                         C      
  1192*   13B4*          C      	DW	E1.ATTR    ;08	TAB Left
'EDITOR --- Meldephase'	MACRO-80 3.44	09-Dec-81	PAGE	1-32


  1194*   1362*          C      	DW	E1.TCNOS   ;09	Up
  1196*   13CE*          C      	DW	E1.REPEL   ;10	TAB Right
                         C      
  1198*   0000           C      	DW	0          ;11	INS MOD
  119A*   0000           C      	DW	0          ;12	DEL
  119C*   0000           C      	DW	0          ;13	INS LIN
  119E*   0000           C      	DW	0          ;14	DEL LIN
                         C      
  11A0*   1318*          C      	DW	E1.TABS    ;15	TAB setzen
  11A2*   1338*          C      	DW	E1.TABL    ;16	TAB loeschen
                         C      
  11A4*   1459*          C      	DW	E1.PS      ;17	CI
  11A6*   0000           C      	DW	0          ;18	M
  11A8*   0000           C      	DW	0          ;19	RESET
                         C      
  11AA*   0000           C      	DW	0          ;20	ESC
  11AC*   0000           C      	DW	0          ;21	CTRL
  11AE*   0000           C      	DW	0          ;22	CE
                         C      
  11B0*   01A5*          C      	DW	SY.IFKT4   ;23	00
  11B2*   019B*          C      	DW	SY.IFKT3   ;24	000
  11B4*   148B*          C      	DW	E2.TEXR    ;25	NeqQuit
  11B6*   10F4*          C      	DW	ED.KOMA1   ;26	SYS
  11B8*   0000           C      	DW	0          ;27	END
  11BA*   139F*          C      	DW	E1.ABS     ;28	ABS
                         C      
  11BC*   0000           C      	DW	0          ;29	E=0
  11BE*   0000           C      	DW	0          ;30	E=1
  11C0*   0000           C      	DW	0          ;31	E=2
  11C2*   0000           C      	DW	0          ;32	E=3
                         C      
  11C4*   13E8*          C      	DW	E1.PTS1    ;33	PF01
  11C6*   13E9*          C      	DW	E1.PTS2    ;34	PF02
  11C8*   13EA*          C      	DW	E1.PTS3    ;35	PF03
  11CA*   13EB*          C      	DW	E1.PTS4    ;36	PF04
  11CC*   13EC*          C      	DW	E1.PTS5    ;37	PF05
  11CE*   13ED*          C      	DW	E1.PTS6    ;38	PF06
  11D0*   13EE*          C      	DW	E1.PTS7    ;39	PF07
  11D2*   13EF*          C      	DW	E1.PTS8    ;40	PF08
  11D4*   13F0*          C      	DW	E1.PTS9    ;41	PF09
  11D6*   13F1*          C      	DW	E1.PTS10   ;42	PF10
  11D8*   13F2*          C      	DW	E1.PTS11   ;43	PF11
  11DA*   13F3*          C      	DW	E1.PTS12   ;44	PF12
                         C      
  11DC*   13F4*          C      	DW	E1.PTS13
  11DE*   13F5*          C      	DW	E1.PTS14
  11E0*   13F6*          C      	DW	E1.PTS15
  11E2*   13F7*          C      	DW	E1.PTS16
  11E4*   13F8*          C      	DW	E1.PTS17
  11E6*   13F9*          C      	DW	E1.PTS18
  11E8*   13FA*          C      	DW	E1.PTS19
  11EA*   13FB*          C      	DW	E1.PTS20
  11EC*   13FC*          C      	DW	E1.PTS21
  11EE*   13FD*          C      	DW	E1.PTS22
  11F0*   13FE*          C      	DW	E1.PTS23
  11F2*   13FF*          C      	DW	E1.PTS24
  11F4*   1400*          C      	DW	E1.PTS25
  11F6*   1401*          C      	DW	E1.PTS26
  11F8*   1402*          C      	DW	E1.PTS27
  11FA*   1403*          C      	DW	E1.PTS28
  11FC*   1404*          C      	DW	E1.PTS29
  11FE*   1405*          C      	DW	E1.PTS30
  1200*   1406*          C      	DW	E1.PTS31
  1202*   1407*          C      	DW	E1.PTS32
  1204*   1408*          C      	DW	E1.PTS33
  1206*   1409*          C      	DW	E1.PTS34
  1208*   140A*          C      	DW	E1.PTS35
  120A*   140B*          C      	DW	E1.PTS36
  120C*   140C*          C      	DW	E1.PTS37
  120E*   140D*          C      	DW	E1.PTS38
  1210*   140E*          C      	DW	E1.PTS39
  1212*   140F*          C      	DW	E1.PTS40
  1214*   1410*          C      	DW	E1.PTS41
  1216*   1411*          C      	DW	E1.PTS42
  1218*   1412*          C      	DW	E1.PTS43
  121A*   1413*          C      	DW	E1.PTS44
  121C*   1414*          C      	DW	E1.PTS45
  121E*   1415*          C      	DW	E1.PTS46
  1220*   1416*          C      	DW	E1.PTS47
  1222*   1417*          C      	DW	E1.PTS48
                         C      
  1224*                  C      ED.ZED1:
  1224*   0F             C      	DB	LOW(ED.LZED1)
'EDITOR --- Meldephase'	MACRO-80 3.44	09-Dec-81	PAGE	1-33


  1225*   45 44 49 54    C      	DB	'EDITOR   FORMAT'
  1229*   4F 52 20 20    C      
  122D*   20 46 4F 52    C      
  1231*   4D 41 54       C      
  000F                   C      ED.LZED1 EQU    $-ED.ZED1-1
                         C      
                         C      			;Stand: 30.Januar 85 - K EAW/wfvm..MSH
                         C      
                         C      ;	END
                         C      	TITLE 'EDITOR --- Arbeitsphase'
                         C      	PAGE
'EDITOR --- Arbeitsphase'	MACRO-80 3.44	09-Dec-81	PAGE	1-34


                         C      
                         C      ;	PN	E101
                         C      ;****************************************************************
                         C      ;*                  DEG2000 V. 1.2    EDITOR --- Arbeitsphase   *
                         C      ;*  Version         --------------------------------------------*
                         C      ;*                  Programmierer: M. Herbote  K EAW  ZFT (WFT) *
                         C      ;*  V 1 . 2         --------------------------------------------*
                         C      ;*                  Stand        : 30.Januar 1985               *
                         C      ;****************************************************************
                         C      
                         C      ;Alphazeichen schreiben
                         C      
  1234*                  C      E1.ZSCHS:
  1234*   3E 01          C      	LD	A,1
  1236*   32 0D8E*       C      	LD	(SM.ZSMER),A
  1239*                  C      E1.ZSCHR:
  1239*   79             C      	LD	A,C
  123A*                  C      E1.ZSCH1:
  123A*   CD 02AA*       C      	CALL	SY.CPOS
  123D*   77             C      	LD	M,A
  123E*   CD 0324*       C      	CALL	SY.ICPOS
  1241*   18 2C          C      	JR	E1.CNEW2
                         C      
                         C      ;NL-Funktion
                         C      
  1243*                  C      E1.CNEW:
  1243*   CD 02AA*       C      	CALL	SY.CPOS
  1246*   71             C      	LD	M,C
  1247*   ED 4B 0DB5*    C      	LD	BC,(SM.SPOS)
  124B*   06 00          C      	LD	B,0
  124D*   0C             C      	INC	C
  124E*   0D             C      	DEC	C
  124F*   28 09          C      	JR	Z,E1.CNEW3
  1251*   7E             C      	LD	A,M
  1252*   2B             C      	DEC	HL
  1253*   ED B9          C      	CPDR
  1255*   20 03          C      	JR	NZ,E1.CNEW3
  1257*   23             C      	INC	HL
  1258*   36 20          C      	LD	M,SD.SPACE
  125A*                  C      E1.CNEW3:
  125A*   CD 030A*       C      	CALL	SY.ISPOS
  125D*   38 0D          C      	JR	C,E1.CNEW1
  125F*   CD 0542*       C      	CALL	S1.SPOSN
  1262*   CD 0425*       C      	CALL	SY.DEL2
  1265*   3A 0DB7*       C      	LD	A,(SM.SMIN)
  1268*   3D             C      	DEC	A
  1269*   32 0DB5*       C      	LD	(SM.SPOS),A
  126C*                  C      E1.CNEW1:
  126C*   CD 02FD*       C      	CALL	SY.IZPOS
  126F*                  C      E1.CNEW2:
  126F*   DC 02DE*       C      	CALL	C,SY.DZPOS
  1272*   DC 1293*       C      	CALL	C,E1.LIFT
  1275*   CD 1387*       C      	CALL	E1.ZNUM
  1278*   C9             C      	RET
                         C      
                         C      ;1.Bildzeile umladen
                         C      
  1279*                  C      E1.UMLZ1:
  1279*   ED 4B 0DC1*    C      	LD	BC,(SM.SPANZ)
  127D*   06 00          C      	LD	B,0
  127F*   CD 182E*       C      	CALL	E2.UMLT
  1282*   22 0DC2*       C      	LD	(SM.WINA),HL
  1285*                  C      E1.ZEINR:
  1285*   01 8830        C      	LD	BC,SD.TPA
  1288*   CD 1603*       C      	CALL	E2.LANG
  128B*   CD 16AC*       C      	CALL	E2.ZNX2
  128E*   ED 53 0D96*    C      	LD	(SM.ZEIZ),DE
  1292*   C9             C      	RET
                         C      
  1293*                  C      E1.LIFT:
  1293*   CD 1279*       C      	CALL	E1.UMLZ1
  1296*   3A 0DB8*       C      	LD	A,(SM.ZMAX)
  1299*                  C      E1.LIFT1:
  1299*   3D             C      	DEC	A
  129A*   CD 12CD*       C      	CALL	E1.BIL1
  129D*   E5             C      	PUSH	HL
  129E*   C1             C      	POP	BC
  129F*   CD 034F*       C      	CALL	SY.DESZ
  12A2*   D5             C      	PUSH	DE
  12A3*   EB             C      	EX	DE,HL
  12A4*   11 3000        C      	LD	DE,SD.BWSA
  12A7*   19             C      	ADD	HL,DE	;HL=BWSA+(SPANZ)
'EDITOR --- Arbeitsphase'	MACRO-80 3.44	09-Dec-81	PAGE	1-35


  12A8*   ED B0          C      	LDIR
  12AA*   C1             C      	POP	BC
  12AB*   41             C      	LD	B,C
  12AC*   EB             C      	EX	DE,HL
  12AD*   CD 0426*       C      	CALL	SY.DEL1
  12B0*   C9             C      	RET
                         C      
                         C      ;Bildpuffer loeschen
  12B1*                  C      E1.LOEBP:
  12B1*   CD 12CA*       C      	CALL	E1.BIL
  12B4*                  C      E1.LOBP1:
  12B4*   01 03FF        C      	LD	BC,SD.BWSA-SD.BPA-1
  12B7*   09             C      	ADD	HL,BC
  12B8*   E5             C      	PUSH	HL
  12B9*   C1             C      	POP	BC
  12BA*   18 03          C      	JR	E1.PULO
  12BC*                  C      E1.PUFLO:
  12BC*   01 03FF        C      	LD	BC,SD.BWSA-SD.BPA-1
  12BF*                  C      E1.PULO:
  12BF*   21 2C00        C      	LD	HL,SD.BPA
  12C2*   36 20          C      	LD	M,SD.SPACE
  12C4*   11 2C01        C      	LD	DE,SD.BPA+1
  12C7*   ED B0          C      	LDIR
  12C9*   C9             C      	RET
                         C      
                         C      ;BWS Laenge
                         C      
  12CA*                  C      E1.BIL:
  12CA*   3A 0DB8*       C      	LD	A,(SM.ZMAX)
  12CD*                  C      E1.BIL1:
  12CD*   21 0000        C      	LD	HL,0
  12D0*   CD 02D2*       C      	CALL	SY.AMSZ
  12D3*   C9             C      	RET		;HL=Laenge   BC,DE unveraendert
                         C      
                         C      ;Leerzeile einfuegen
                         C      
  12D4*                  C      E1.LEERZ:
  12D4*   21 0DB4*       C      	LD	HL,SM.ZPOS
  12D7*   AF             C      	XOR	A
  12D8*   B6             C      	OR	M
  12D9*   C8             C      	RET	Z
  12DA*   35             C      	DEC	M
  12DB*   F5             C      	PUSH	AF
  12DC*   CD 1279*       C      	CALL	E1.UMLZ1
  12DF*   F1             C      	POP	AF
  12E0*   20 B7          C      	JR	NZ,E1.LIFT1
  12E2*   3A 0DC1*       C      	LD	A,(SM.SPANZ)
  12E5*   21 3000        C      	LD	HL,SD.BWSA
  12E8*   C3 0425*       C      	JP	SY.DEL2
                         C      
                         C      ;Tabulator Aufruf
                         C      
  12EB*                  C      E1.TAB:
  12EB*   CD 130A*       C      	CALL	E1.TAUP
  12EE*   30 14          C      	JR	NC,E1.TAB1
  12F0*   7E             C      	LD	A,M
  12F1*   2A 0DB9*       C      	LD	HL,(SM.SMAX)
  12F4*   BD             C      	CP	L
  12F5*   30 0D          C      	JR	NC,E1.TAB1
  12F7*                  C      E1.TAB2:
  12F7*   32 0DB5*       C      	LD	(SM.SPOS),A
  12FA*   C8             C      	RET	Z
  12FB*   CD 16B8*       C      	CALL	E2.RUFTF
  12FE*   C0             C      	RET	NZ
  12FF*   3E 09          C      	LD	A,SD.TAB
  1301*   C3 123A*       C      	JP	E1.ZSCH1
                         C      
  1304*                  C      E1.TAB1:
  1304*   3A 0DB7*       C      	LD	A,(SM.SMIN)
  1307*   3D             C      	DEC	A
  1308*   18 ED          C      	JR	E1.TAB2
                         C      
  130A*                  C      E1.TAUP:
  130A*   3A 0DB5*       C      	LD	A,(SM.SPOS)
  130D*                  C      E1.TAUP2:
  130D*   21 0D9B*       C      	LD	HL,SM.TABZ
  1310*   06 0A          C      	LD	B,SD.TABZA
  1312*                  C      E1.TAUP1:
  1312*   BE             C      	CP	M
  1313*   D8             C      	RET	C	;CY=1: gefunden
  1314*   23             C      	INC	HL
  1315*   10 FB          C      	DJNZ	E1.TAUP1
  1317*   C9             C      	RET
'EDITOR --- Arbeitsphase'	MACRO-80 3.44	09-Dec-81	PAGE	1-36


                         C      
                         C      ;Tabulator setzen
                         C      
  1318*                  C      E1.TABS:
  1318*   CD 130A*       C      	CALL	E1.TAUP
  131B*   38 02          C      	JR	C,E1.TABS1
  131D*   2B             C      	DEC	HL
  131E*   04             C      	INC	B
  131F*                  C      E1.TABS1:
  131F*   10 02          C      	DJNZ	E1.TABS3
  1321*   77             C      	LD	M,A
  1322*   C9             C      	RET
  1323*                  C      E1.TABS3:
  1323*   4F             C      	LD	C,A
  1324*   3E 0A          C      	LD	A,SD.TABZA
  1326*   B8             C      	CP	B
  1327*   79             C      	LD	A,C
  1328*   28 03          C      	JR	Z,E1.TABS4
  132A*   2B             C      	DEC	HL
  132B*   BE             C      	CP	M
  132C*   C8             C      	RET	Z
  132D*                  C      E1.TABS4:
  132D*   48             C      	LD	C,B
  132E*   06 00          C      	LD	B,0
  1330*   09             C      	ADD	HL,BC
  1331*   E5             C      	PUSH	HL
  1332*   D1             C      	POP	DE
  1333*   13             C      	INC	DE
  1334*   ED B8          C      	LDDR
  1336*   12             C      	LD	(DE),A
  1337*   C9             C      	RET
                         C      
                         C      ;Tabulator loeschen
                         C      
  1338*                  C      E1.TABL:
  1338*   CD 130A*       C      	CALL	E1.TAUP
  133B*   38 06          C      	JR	C,E1.TABL1
  133D*   2B             C      	DEC	HL
  133E*   BE             C      	CP	M
  133F*   C0             C      	RET	NZ
  1340*   36 FF          C      	LD	M,-1
  1342*   C9             C      	RET
  1343*                  C      E1.TABL1:
  1343*   4F             C      	LD	C,A
  1344*   3E 0A          C      	LD	A,SD.TABZA
  1346*   B8             C      	CP	B
  1347*   C8             C      	RET	Z
  1348*   79             C      	LD	A,C
  1349*   2B             C      	DEC	HL
  134A*   BE             C      	CP	M
  134B*   C0             C      	RET	NZ
  134C*   48             C      	LD	C,B
  134D*   06 00          C      	LD	B,0
  134F*   E5             C      	PUSH	HL
  1350*   D1             C      	POP	DE
  1351*   23             C      	INC	HL
  1352*   ED B0          C      	LDIR
  1354*   3E FF          C      	LD	A,-1
  1356*   12             C      	LD	(DE),A
  1357*   C9             C      	RET
                         C      
                         C      ;Cursor Funktionen
                         C      
  1358*                  C      E1.TCNRS:
  1358*   CD 0356*       C      	CALL	SY.CNRS
  135B*   18 17          C      	JR	E1.TCUR
  135D*                  C      E1.TCNLS:
  135D*   CD 035B*       C      	CALL	SY.CNLS
  1360*   18 12          C      	JR	E1.TCUR
  1362*                  C      E1.TCNOS:
  1362*   CD 0365*       C      	CALL	SY.CNOS
  1365*   18 0D          C      	JR	E1.TCUR
  1367*                  C      E1.TCNUS:
  1367*   CD 0360*       C      	CALL	SY.CNUS
  136A*   18 08          C      	JR	E1.TCUR
  136C*                  C      E1.TCNZA:
  136C*   CD 0190*       C      	CALL	SY.IFKT2
  136F*   18 03          C      	JR	E1.TCUR
  1371*                  C      E1.THOME:
  1371*   CD 0183*       C      	CALL	SY.IFKT1
  1374*                  C      E1.TCUR:
  1374*   CD 1387*       C      	CALL	E1.ZNUM
  1377*   C9             C      	RET
'EDITOR --- Arbeitsphase'	MACRO-80 3.44	09-Dec-81	PAGE	1-37


                         C      
                         C      ;Anzahl der NL zwischen BWSA und ZLPOS
                         C      
  1378*                  C      E1.BIZA:
  1378*   CD 02A5*       C      	CALL	SY.ZLPOS
  137B*   23             C      	INC	HL
  137C*   01 3000        C      	LD	BC,SD.BWSA
  137F*   CD 1603*       C      	CALL	E2.LANG
  1382*   CD 16AC*       C      	CALL	E2.ZNX2
  1385*   1B             C      	DEC	DE	;DE=NL Anzahl
  1386*   C9             C      	RET
                         C      
                         C      ;Zeilennummer ausschreiben
                         C      
  1387*                  C      E1.ZNUM:
  1387*   CD 1378*       C      	CALL	E1.BIZA
  138A*   2A 0D96*       C      	LD	HL,(SM.ZEIZ)
  138D*   19             C      	ADD	HL,DE
  138E*   18 03          C      	JR	E1.NUM1
  1390*                  C      E1.NUM:
  1390*   2A 0D96*       C      	LD	HL,(SM.ZEIZ)
  1393*                  C      E1.NUM1:
  1393*   01 FFF3        C      	LD	BC,-13
  1396*   3A 0DC0*       C      	LD	A,(SM.ZANZ)
  1399*   11 0605*       C      	LD	DE,S1.ZS12
  139C*   C3 05DC*       C      	JP	S1.MELDN
                         C      
                         C      ;Absatz einfuegen
                         C      
  139F*                  C      E1.ABS:
  139F*   CD 13CE*       C      	CALL	E1.REPEL
  13A2*   CD 02AA*       C      	CALL	SY.CPOS
  13A5*   36 1E          C      	LD	M,SD.NL
  13A7*   3E 00          C      	LD	A,0
  13A9*   32 0D8E*       C      	LD	(SM.ZSMER),A
  13AC*   21 0D94*       C      	LD	HL,SM.STAT
  13AF*   CB E6          C      	SET	4,M
  13B1*   C3 1495*       C      	JP	E2.TEXL
                         C      
                         C      ;Zeichen rechts von Cursor heranziehen
                         C      
  13B4*                  C      E1.ATTR:
  13B4*   CD 02AA*       C      	CALL	SY.CPOS
  13B7*   DD 21 0659*    C      	LD	IX,S1.RNL
  13BB*   36 20          C      	LD	M,SD.SPACE
  13BD*                  C      E1.ATTR1:
  13BD*   CD 0542*       C      	CALL	S1.SPOSN
  13C0*   3D             C      	DEC	A
  13C1*   C8             C      	RET	Z
  13C2*   4F             C      	LD	C,A
  13C3*   06 00          C      	LD	B,0
  13C5*   CD 064F*       C      	CALL	S1.MX
  13C8*   21 0D8E*       C      	LD	HL,SM.ZSMER
  13CB*   36 01          C      	LD	M,1
  13CD*   C9             C      	RET
                         C      
                         C      ;Zeichen rechts von Cursor wegschieben
                         C      
  13CE*                  C      E1.REPEL:
  13CE*   CD 054D*       C      	CALL	S1.ZENDF
  13D1*   7E             C      	LD	A,M
  13D2*   FE 20          C      	CP	SD.SPACE
  13D4*   C0             C      	RET	NZ
  13D5*   DD 21 0651*    C      	LD	IX,S1.RNR
  13D9*   18 E2          C      	JR	E1.ATTR1
                         C      
                         C      ;Zeile loeschen
                         C      
  13DB*                  C      E1.DELZ:
  13DB*   CD 041C*       C      	CALL	SY.DELZL
  13DE*   CD 02FD*       C      	CALL	SY.IZPOS
  13E1*   DC 02DE*       C      	CALL	C,SY.DZPOS
  13E4*   CD 1387*       C      	CALL	E1.ZNUM
  13E7*   C9             C      	RET
                         C      
                         C      	PAGE
'EDITOR --- Arbeitsphase'	MACRO-80 3.44	09-Dec-81	PAGE	1-38


                         C      
                         C      ;Aufruf programmierter Textelemente
                         C      
  13E8*   00             C      E1.PTS1:	NOP
  13E9*   00             C      E1.PTS2:	NOP
  13EA*   00             C      E1.PTS3:	NOP
  13EB*   00             C      E1.PTS4:	NOP
  13EC*   00             C      E1.PTS5:	NOP
  13ED*   00             C      E1.PTS6:	NOP
  13EE*   00             C      E1.PTS7:	NOP
  13EF*   00             C      E1.PTS8:	NOP
  13F0*   00             C      E1.PTS9:	NOP
  13F1*   00             C      E1.PTS10:	NOP
  13F2*   00             C      E1.PTS11:	NOP
  13F3*   00             C      E1.PTS12:	NOP
  13F4*   00             C      E1.PTS13:	NOP
  13F5*   00             C      E1.PTS14:	NOP
  13F6*   00             C      E1.PTS15:	NOP
  13F7*   00             C      E1.PTS16:	NOP
  13F8*   00             C      E1.PTS17:	NOP
  13F9*   00             C      E1.PTS18:	NOP
  13FA*   00             C      E1.PTS19:	NOP
  13FB*   00             C      E1.PTS20:	NOP
  13FC*   00             C      E1.PTS21:	NOP
  13FD*   00             C      E1.PTS22:	NOP
  13FE*   00             C      E1.PTS23:	NOP
  13FF*   00             C      E1.PTS24:	NOP
  1400*   00             C      E1.PTS25:	NOP
  1401*   00             C      E1.PTS26:	NOP
  1402*   00             C      E1.PTS27:	NOP
  1403*   00             C      E1.PTS28:	NOP
  1404*   00             C      E1.PTS29:	NOP
  1405*   00             C      E1.PTS30:	NOP
  1406*   00             C      E1.PTS31:	NOP
  1407*   00             C      E1.PTS32:	NOP
  1408*   00             C      E1.PTS33:	NOP
  1409*   00             C      E1.PTS34:	NOP
  140A*   00             C      E1.PTS35:	NOP
  140B*   00             C      E1.PTS36:	NOP
  140C*   00             C      E1.PTS37:	NOP
  140D*   00             C      E1.PTS38:	NOP
  140E*   00             C      E1.PTS39:	NOP
  140F*   00             C      E1.PTS40:	NOP
  1410*   00             C      E1.PTS41:	NOP
  1411*   00             C      E1.PTS42:	NOP
  1412*   00             C      E1.PTS43:	NOP
  1413*   00             C      E1.PTS44:	NOP
  1414*   00             C      E1.PTS45:	NOP
  1415*   00             C      E1.PTS46:	NOP
  1416*   00             C      E1.PTS47:	NOP
  1417*                  C      E1.PTS48:
  1417*   11 13E7*       C      	LD	DE,E1.PTS1-1
  141A*   B7             C      	OR	A
  141B*   ED 52          C      	SBC	HL,DE
  141D*   CD 1437*       C      	CALL	E1.PTSNR
  1420*   D8             C      	RET	C
  1421*   E0             C      	RET	PO
  1422*                  C      E1.PTS92:
  1422*   AF             C      	XOR	A
  1423*   B6             C      	OR	M
  1424*   C8             C      	RET	Z
  1425*   E5             C      	PUSH	HL
  1426*   FE 1E          C      	CP	SD.NL
  1428*   28 05          C      	JR	Z,E1.PTS91
  142A*   CD 123A*       C      	CALL	E1.ZSCH1
  142D*   18 04          C      	JR	E1.PTS93
  142F*                  C      E1.PTS91:
  142F*   4F             C      	LD	C,A
  1430*   CD 1243*       C      	CALL	E1.CNEW
  1433*                  C      E1.PTS93:
  1433*   E1             C      	POP	HL
  1434*   23             C      	INC	HL
  1435*   18 EB          C      	JR	E1.PTS92
                         C      
  1437*                  C      E1.PTSNR:
  1437*   EB             C      	EX	DE,HL
  1438*   ED 4B 0E19*    C      	LD	BC,(SM.PTSA)
  143C*   2A 0E17*       C      	LD	HL,(SM.PTSE)
  143F*   CD 1603*       C      	CALL	E2.LANG
  1442*   D8             C      	RET	C
  1443*   AF             C      	XOR	A
  1444*                  C      E1.PTSN1:
'EDITOR --- Arbeitsphase'	MACRO-80 3.44	09-Dec-81	PAGE	1-39


  1444*   1D             C      	DEC	E
  1445*   28 05          C      	JR	Z,E1.PTSN2
  1447*   ED B1          C      	CPIR
  1449*   E0             C      	RET	PO
  144A*   18 F8          C      	JR	E1.PTSN1
  144C*                  C      E1.PTSN2:
  144C*   AF             C      	XOR	A
  144D*   C9             C      	RET		;P/V=1
                         C      
  144E*                  C      E1.PTEST:
  144E*   ED 4B 0FF7     C      	LD	BC,(SM.PTS)
  1452*   2A 0E19*       C      	LD	HL,(SM.PTSA)
  1455*   AF             C      	XOR	A
  1456*   ED 42          C      	SBC	HL,BC
  1458*   C9             C      	RET
  1459*                  C      E1.PS:
  1459*   CD 144E*       C      	CALL	E1.PTEST
  145C*   28 16          C      	JR	Z,E1.PS1
  145E*   ED 43 0E19*    C      	LD	(SM.PTSA),BC
  1462*   21 0FFF        C      	LD	HL,SD.RAM+3FFH
  1465*   AF             C      	XOR	A
  1466*   ED 42          C      	SBC	HL,BC
  1468*   C5             C      	PUSH	BC
  1469*   E3             C      	EX	(SP),HL
  146A*   C1             C      	POP	BC
  146B*                  C      E1.PS2:
  146B*   1E 31          C      	LD	E,SD.PSANZ+1
  146D*   CD 1444*       C      	CALL	E1.PTSN1
  1470*   22 0E17*       C      	LD	(SM.PTSE),HL
  1473*   C9             C      	RET
  1474*                  C      E1.PS1:
  1474*   21 49DD*       C      	LD	HL,PF.O1ANF	;PF.PFT1
  1477*   22 0E19*       C      	LD	(SM.PTSA),HL
  147A*   01 03FF        C      	LD	BC,3FFH
  147D*   18 EC          C      	JR	E1.PS2
  147F*                  C      E1.HT:
  147F*   3E 09          C      	LD	A,9
  1481*   C3 123A*       C      	JP	E1.ZSCH1
                         C      			;Stand: 30.Januar 85 - K EAW/wfvm..MSH
                         C      
                         C      ;	END
                         C      	TITLE	'EDITOR --- Textaufruf'
                         C      	PAGE
'EDITOR --- Textaufruf'	MACRO-80 3.44	09-Dec-81	PAGE	1-40


                         C      
                         C      ;	PN	E201
                         C      ;****************************************************************
                         C      ;*                  DEG2000  V. 1.2   EDITOR --- Textaufruf     *
                         C      ;*  Version         --------------------------------------------*
                         C      ;*                  Programmierer: M. Herbote  K EAW  ZFT (WFT) *
                         C      ;*  V 1 . 2         --------------------------------------------*
                         C      ;*                  Stand        : 30.Januar 1985               *
                         C      ;****************************************************************
  1484*                  C      E2.TEXV:
  1484*   21 0D94*       C      	LD	HL,SM.STAT
  1487*   CB FE          C      	SET	7,M
  1489*   18 05          C      	JR	E2.TEXS
  148B*                  C      E2.TEXR:
  148B*   21 0D94*       C      	LD	HL,SM.STAT
  148E*   CB BE          C      	RES	7,M
  1490*                  C      E2.TEXS:
  1490*   3E 01          C      	LD	A,1
  1492*   32 0D8E*       C      	LD	(SM.ZSMER),A
  1495*                  C      E2.TEXL:
  1495*   CD 1822*       C      	CALL	E2.UML
  1498*   CD 12B1*       C      	CALL	E1.LOEBP
  149B*   ED 5B 0DC6*    C      	LD	DE,(SM.END)
  149F*   2A 0FF7        C      	LD	HL,(SM.PTS)
  14A2*   B7             C      	OR	A
  14A3*   ED 52          C      	SBC	HL,DE
  14A5*   38 5E          C      	JR	C,E2.ERR99
  14A7*   11 1388        C      	LD	DE,5000
  14AA*   ED 52          C      	SBC	HL,DE
  14AC*   DC 14E8*       C      	CALL	C,E2.TEXW
  14AF*                  C      E2.TEX:
  14AF*   CD 15FD*       C      	CALL	E2.QLANG
  14B2*   D8             C      	RET	C
  14B3*   CD 1524*       C      	CALL	E2.TEXV1
  14B6*   E5             C      	PUSH	HL
  14B7*   C1             C      	POP	BC	;BC=WINE
  14B8*   CD 1600*       C      	CALL	E2.LANG1
  14BB*   D4 14FE*       C      	CALL	NC,E2.SET
  14BE*   DC 14F5*       C      	CALL	C,E2.RESET
  14C1*   CD 02AA*       C      	CALL	SY.CPOS
  14C4*   E5             C      	PUSH	HL
  14C5*   AF             C      	XOR	A
  14C6*   32 0DB4*       C      	LD	(SM.ZPOS),A
  14C9*                  C      E2.TEXV3:
  14C9*   ED 4B 0DC4*    C      	LD	BC,(SM.WINE)
  14CD*   CD 1600*       C      	CALL	E2.LANG1
  14D0*   38 0E          C      	JR	C,E2.TEXV2
  14D2*   CD 16BE*       C      	CALL	E2.RUFT	;Zeilenaufruf
  14D5*   21 0DB4*       C      	LD	HL,SM.ZPOS
  14D8*   34             C      	INC	M
  14D9*   3A 0DB8*       C      	LD	A,(SM.ZMAX)
  14DC*   3D             C      	DEC	A
  14DD*   BE             C      	CP	M
  14DE*   30 E9          C      	JR	NC,E2.TEXV3
  14E0*                  C      E2.TEXV2:
  14E0*   E1             C      	POP	HL
  14E1*   CD 0332*       C      	CALL	SY.LCPOS	;Cursor einsetzen
  14E4*   CD 1387*       C      	CALL	E1.ZNUM
  14E7*   C9             C      	RET
                         C      
  14E8*                  C      E2.TEXW:
  14E8*   19             C      	ADD	HL,DE	;Warnung Speicher voll
  14E9*   11 060B*       C      	LD	DE,S1.ZS13
  14EC*   3A 0DC0*       C      	LD	A,(SM.ZANZ)
  14EF*   01 FFEA        C      	LD	BC,-22
  14F2*   C3 05DD*       C      	JP	S1.MELDE
                         C      
  14F5*                  C      E2.RESET:
  14F5*   21 0001        C      	LD	HL,1
  14F8*   22 0D96*       C      	LD	(SM.ZEIZ),HL
  14FB*   21 8830        C      	LD	HL,SD.TPA
  14FE*                  C      E2.SET:
  14FE*   22 0DC2*       C      	LD	(SM.WINA),HL
  1501*   22 0DC4*       C      	LD	(SM.WINE),HL
  1504*   C9             C      	RET
                         C      
  1505*                  C      E2.ERR99:
  1505*   0E 63          C      	LD	C,99	;Speicherueberlauf
  1507*   18 06          C      	JR	E2.ERR5A
  1509*                  C      E2.ERR7A:
  1509*   0E 07          C      	LD	C,7	;Zeichenkette nicht vorhanden
  150B*   18 02          C      	JR	E2.ERR5A
'EDITOR --- Textaufruf'	MACRO-80 3.44	09-Dec-81	PAGE	1-41


  150D*                  C      E2.ERRO5:
  150D*   0E 05          C      	LD	C,5	;Zeilennummer zu gross
  150F*                  C      E2.ERR5A:
  150F*   C3 1BF2*       C      	JP	E3.ERRR
                         C      
  1512*                  C      E2.TEX0:
  1512*   E5             C      	PUSH	HL
  1513*   21 0D94*       C      	LD	HL,SM.STAT
  1516*   CB A6          C      	RES	4,M
  1518*   2A 0D96*       C      	LD	HL,(SM.ZEIZ)
  151B*   ED 5B 0D98*    C      	LD	DE,(SM.BZA)
  151F*   16 00          C      	LD	D,0
  1521*   19             C      	ADD	HL,DE
  1522*   18 40          C      	JR	E2.ZNR2
                         C      
  1524*                  C      E2.TEXV1:
  1524*   3A 0D94*       C      	LD	A,(SM.STAT)	;pruefen Statusbits
  1527*   CB 67          C      	BIT	4,A
  1529*   20 E7          C      	JR	NZ,E2.TEX0
  152B*   CB 5F          C      	BIT	3,A
  152D*   20 4C          C      	JR	NZ,E2.NZEI
  152F*   CB 57          C      	BIT	2,A
  1531*   C2 1662*       C      	JP	NZ,E2.MRK
  1534*   CB 4F          C      	BIT	1,A
  1536*   20 23          C      	JR	NZ,E2.ZNR
  1538*   CB 7F          C      	BIT	7,A
  153A*   28 17          C      	JR	Z,E2.SPR
  153C*   2A 0DC4*       C      	LD	HL,(SM.WINE)
  153F*   E5             C      	PUSH	HL
  1540*   ED 4B 0DC2*    C      	LD	BC,(SM.WINA)
  1544*   CD 1603*       C      	CALL	E2.LANG
  1547*   CD 16AC*       C      	CALL	E2.ZNX2
  154A*   2A 0D96*       C      	LD	HL,(SM.ZEIZ)
  154D*   19             C      	ADD	HL,DE
  154E*   22 0D96*       C      	LD	(SM.ZEIZ),HL
  1551*   E1             C      	POP	HL
  1552*   C9             C      	RET
                         C      
  1553*                  C      E2.SPR:
  1553*   ED 5B 0DB8*    C      	LD	DE,(SM.ZMAX)
  1557*   16 00          C      	LD	D,0
  1559*   18 24          C      	JR	E2.NZEI8
                         C      
  155B*                  C      E2.ZNR:
  155B*   3E 01          C      	LD	A,1
  155D*   32 0D94*       C      	LD	(SM.STAT),A
  1560*   E5             C      	PUSH	HL
  1561*   2A 0D96*       C      	LD	HL,(SM.ZEIZ)
  1564*                  C      E2.ZNR2:
  1564*   CD 15E4*       C      	CALL	E2.NKORR
  1567*   EB             C      	EX	DE,HL
  1568*   E1             C      	POP	HL
  1569*   CD 1570*       C      	CALL	E2.ZNR1
  156C*   E2 150D*       C      	JP	PO,E2.ERRO5
  156F*   C9             C      	RET
                         C      
  1570*                  C      E2.ZNR1:
  1570*   1B             C      	DEC	DE	;BC=Textlaenge
  1571*                  C      E2.ZNR0:
  1571*   7A             C      	LD	A,D	;HL=Textanfang
  1572*   B3             C      	OR	E
  1573*   C8             C      	RET	Z
  1574*   3E 1E          C      	LD	A,1EH
  1576*   ED B1          C      	CPIR
  1578*   E0             C      	RET	PO
  1579*   18 F5          C      	JR	E2.ZNR1	;HL=WINE neu
                         C      
  157B*                  C      E2.NZEI:
  157B*   ED 5B 0D99*    C      	LD	DE,(SM.WEITE)	;+/- n Zeilen
  157F*                  C      E2.NZEI8:
  157F*   ED 4B 0D96*    C      	LD	BC,(SM.ZEIZ)
  1583*   2A 0D98*       C      	LD	HL,(SM.BZA)
  1586*   26 00          C      	LD	H,0
  1588*   09             C      	ADD	HL,BC
  1589*   CB 7F          C      	BIT	7,A
  158B*   20 18          C      	JR	NZ,E2.NZEIV
  158D*   37             C      	SCF
  158E*   ED 52          C      	SBC	HL,DE
  1590*   23             C      	INC	HL
  1591*   30 21          C      	JR	NC,E2.NZEIR
  1593*   EB             C      	EX	DE,HL
  1594*                  C      E2.NZEI7:
  1594*   D5             C      	PUSH	DE
'EDITOR --- Textaufruf'	MACRO-80 3.44	09-Dec-81	PAGE	1-42


  1595*   CD 16A9*       C      	CALL	E2.ZNUMX
  1598*   E1             C      	POP	HL
  1599*   19             C      	ADD	HL,DE	;HL<=0!
  159A*   22 0D96*       C      	LD	(SM.ZEIZ),HL
  159D*   EB             C      	EX	DE,HL
  159E*                  C      E2.NZEI6:
  159E*   CD 15FD*       C      	CALL	E2.QLANG
  15A1*   CD 1570*       C      	CALL	E2.ZNR1
  15A4*   C9             C      	RET
                         C      
  15A5*                  C      E2.NZEIV:
  15A5*   19             C      	ADD	HL,DE
  15A6*   E5             C      	PUSH	HL
  15A7*   C5             C      	PUSH	BC
  15A8*   CD 16A9*       C      	CALL	E2.ZNUMX
  15AB*   C1             C      	POP	BC
  15AC*   E1             C      	POP	HL
  15AD*   B7             C      	OR	A
  15AE*   ED 52          C      	SBC	HL,DE
  15B0*   D2 14F5*       C      	JP	NC,E2.RESET
  15B3*   19             C      	ADD	HL,DE
  15B4*                  C      E2.NZEIR:
  15B4*   CD 15E4*       C      	CALL	E2.NKORR
  15B7*   B7             C      	OR	A
  15B8*   ED 42          C      	SBC	HL,BC
  15BA*   EB             C      	EX	DE,HL	;DE=Weite
  15BB*   2A 0DC2*       C      	LD	HL,(SM.WINA)
  15BE*   C8             C      	RET	Z
  15BF*   38 0A          C      	JR	C,E2.NZEI4
  15C1*   E5             C      	PUSH	HL
  15C2*   C1             C      	POP	BC
  15C3*   CD 1600*       C      	CALL	E2.LANG1
  15C6*   D8             C      	RET	C
  15C7*   CD 1571*       C      	CALL	E2.ZNR0
  15CA*   C9             C      	RET
                         C      
  15CB*                  C      E2.NZEI4:
  15CB*   01 8830        C      	LD	BC,SD.TPA
  15CE*   CD 1603*       C      	CALL	E2.LANG
  15D1*   38 C1          C      	JR	C,E2.NZEI7
  15D3*   09             C      	ADD	HL,BC
  15D4*   2B             C      	DEC	HL
  15D5*   03             C      	INC	BC
  15D6*                  C      E2.NZEI1:
  15D6*   3E 1E          C      	LD	A,1EH
  15D8*   ED B9          C      	CPDR
  15DA*   20 05          C      	JR	NZ,E2.NZEI3
  15DC*   7A             C      	LD	A,D
  15DD*   B3             C      	OR	E
  15DE*   13             C      	INC	DE
  15DF*   20 F5          C      	JR	NZ,E2.NZEI1
  15E1*                  C      E2.NZEI3:
  15E1*   23             C      	INC	HL
  15E2*   23             C      	INC	HL
  15E3*   C9             C      	RET
                         C      
  15E4*                  C      E2.NKORR:
  15E4*   ED 5B 0DB4*    C      	LD	DE,(SM.ZPOS)
  15E8*   16 00          C      	LD	D,0
  15EA*   37             C      	SCF
  15EB*   ED 52          C      	SBC	HL,DE
  15ED*   23             C      	INC	HL
  15EE*   30 09          C      	JR	NC,E2.NKOR1
  15F0*   19             C      	ADD	HL,DE
  15F1*   7D             C      	LD	A,L
  15F2*   3D             C      	DEC	A
  15F3*   32 0DB4*       C      	LD	(SM.ZPOS),A
  15F6*   21 0001        C      	LD	HL,1
  15F9*                  C      E2.NKOR1:
  15F9*   22 0D96*       C      	LD	(SM.ZEIZ),HL
  15FC*   C9             C      	RET
                         C      
  15FD*                  C      E2.QLANG:
  15FD*   01 8830        C      	LD	BC,SD.TPA
  1600*                  C      E2.LANG1:
  1600*   2A 0DC6*       C      	LD	HL,(SM.END)
  1603*                  C      E2.LANG:
  1603*   37             C      	SCF		;HL=Q.Ende  BC=Q.Anfang
  1604*   ED 42          C      	SBC	HL,BC
  1606*   23             C      	INC	HL
  1607*   C5             C      	PUSH	BC
  1608*   E3             C      	EX	(SP),HL
  1609*   C1             C      	POP	BC	;BC=Q.Laenge   HL=Q.Anfang
'EDITOR --- Textaufruf'	MACRO-80 3.44	09-Dec-81	PAGE	1-43


  160A*   C9             C      	RET		;CY=1 falls BC<=0
                         C      
  160B*                  C      E2.SUCH:
  160B*   11 0DC9*       C      	LD	DE,SM.ZKA
  160E*   1A             C      	LD	A,(DE)
  160F*   ED B1          C      	CPIR
  1611*   37             C      	SCF
  1612*   E0             C      	RET	PO
  1613*   E5             C      	PUSH	HL
  1614*   2B             C      	DEC	HL
  1615*                  C      E2.SUCH1:
  1615*   C5             C      	PUSH	BC
  1616*   3A 0DC8*       C      	LD	A,(SM.LZA)
  1619*   47             C      	LD	B,A
  161A*   CD 0464*       C      	CALL	SY.VERGL
  161D*   37             C      	SCF
  161E*   3F             C      	CCF
  161F*   C1             C      	POP	BC
  1620*   E1             C      	POP	HL	;CY=1 Fehler
  1621*   C9             C      	RET		;CY=0 Z=1 falls Zeichenkette gefunden
                         C      
  1622*                  C      E2.SUCHR:
  1622*   11 0DC9*       C      	LD	DE,SM.ZKA
  1625*   1A             C      	LD	A,(DE)
  1626*   ED B9          C      	CPDR
  1628*   37             C      	SCF
  1629*   E0             C      	RET	PO
  162A*   E5             C      	PUSH	HL
  162B*   23             C      	INC	HL
  162C*   18 E7          C      	JR	E2.SUCH1
                         C      
  162E*                  C      E2.MARKR:
  162E*   CD 1600*       C      	CALL	E2.LANG1
  1631*   38 09          C      	JR	C,E2.MRKR1
  1633*   ED 5B 0D98*    C      	LD	DE,(SM.BZA)
  1637*   16 00          C      	LD	D,0
  1639*   CD 1571*       C      	CALL	E2.ZNR0
  163C*                  C      E2.MRKR1:
  163C*   01 8830        C      	LD	BC,SD.TPA
  163F*   CD 1603*       C      	CALL	E2.LANG
  1642*   38 0D          C      	JR	C,E2.MRKR4
  1644*   09             C      	ADD	HL,BC
  1645*   2B             C      	DEC	HL
  1646*   03             C      	INC	BC
  1647*                  C      E2.MRKR3:
  1647*   CD 1622*       C      	CALL	E2.SUCHR
  164A*   38 05          C      	JR	C,E2.MRKR4
  164C*   20 F9          C      	JR	NZ,E2.MRKR3
  164E*   23             C      	INC	HL
  164F*   18 41          C      	JR	E2.MRK2
  1651*                  C      E2.MRKR4:
  1651*   CD 15FD*       C      	CALL	E2.QLANG
  1654*   09             C      	ADD	HL,BC
  1655*   2B             C      	DEC	HL
  1656*   03             C      	INC	BC
  1657*                  C      E2.MRKR2:
  1657*   CD 1622*       C      	CALL	E2.SUCHR
  165A*   DA 1509*       C      	JP	C,E2.ERR7A
  165D*   20 F8          C      	JR	NZ,E2.MRKR2
  165F*   23             C      	INC	HL
  1660*   18 30          C      	JR	E2.MRK2
                         C      
  1662*                  C      E2.MRK:
  1662*   ED 4B 0DC2*    C      	LD	BC,(SM.WINA)
  1666*   CB 7F          C      	BIT	7,A
  1668*   28 C4          C      	JR	Z,E2.MARKR
  166A*   CD 1600*       C      	CALL	E2.LANG1
  166D*   38 17          C      	JR	C,E2.MRK4
  166F*   ED 5B 0D98*    C      	LD	DE,(SM.BZA)
  1673*   16 00          C      	LD	D,0
  1675*   1C             C      	INC	E
  1676*   CD 1571*       C      	CALL	E2.ZNR0
  1679*   E2 1686*       C      	JP	PO,E2.MRK4
  167C*                  C      E2.MRK3:
  167C*   CD 160B*       C      	CALL	E2.SUCH
  167F*   38 05          C      	JR	C,E2.MRK4
  1681*   20 F9          C      	JR	NZ,E2.MRK3
  1683*   2B             C      	DEC	HL
  1684*   18 0C          C      	JR	E2.MRK2
  1686*                  C      E2.MRK4:
  1686*   CD 15FD*       C      	CALL	E2.QLANG
  1689*                  C      E2.MRK1:
  1689*   CD 160B*       C      	CALL	E2.SUCH
'EDITOR --- Textaufruf'	MACRO-80 3.44	09-Dec-81	PAGE	1-44


  168C*   DA 1509*       C      	JP	C,E2.ERR7A
  168F*   20 F8          C      	JR	NZ,E2.MRK1
  1691*   2B             C      	DEC	HL
  1692*                  C      E2.MRK2:
  1692*   01 8830        C      	LD	BC,SD.TPA
  1695*   23             C      	INC	HL
  1696*   CD 1603*       C      	CALL	E2.LANG
  1699*   E5             C      	PUSH	HL
  169A*   C5             C      	PUSH	BC
  169B*   CD 16AC*       C      	CALL	E2.ZNX2
  169E*   EB             C      	EX	DE,HL
  169F*   CD 15E4*       C      	CALL	E2.NKORR
  16A2*   EB             C      	EX	DE,HL
  16A3*   C1             C      	POP	BC
  16A4*   E1             C      	POP	HL
  16A5*   CD 1570*       C      	CALL	E2.ZNR1
  16A8*   C9             C      	RET
                         C      
  16A9*                  C      E2.ZNUMX:
  16A9*   CD 15FD*       C      	CALL	E2.QLANG
  16AC*                  C      E2.ZNX2:
  16AC*   3E 1E          C      	LD	A,1EH
  16AE*   11 0000        C      	LD	DE,0
  16B1*   D8             C      	RET	C
  16B2*                  C      E2.ZNX1:
  16B2*   13             C      	INC	DE
  16B3*   ED B1          C      	CPIR
  16B5*   E0             C      	RET	PO		;DE=Zeilenanzahl, HL=(END)
  16B6*   18 FA          C      	JR	E2.ZNX1
                         C      
                         C      ;TEXTAUFRUF AUS TEXTPUFFER
                         C      
  16B8*                  C      E2.RUFTF:
  16B8*   3A 0D93*       C      	LD	A,(SM.FSTAT)
  16BB*   FE 80          C      	CP	80H
  16BD*   C9             C      	RET
                         C      
  16BE*                  C      E2.RUFT:
  16BE*   3A 0DB7*       C      	LD	A,(SM.SMIN)	;HL=WINE  BC=Laenge
  16C1*   3D             C      	DEC	A
  16C2*   32 0DB5*       C      	LD	(SM.SPOS),A
  16C5*   CD 0542*       C      	CALL	S1.SPOSN
  16C8*   04             C      	INC	B
  16C9*   05             C      	DEC	B
  16CA*   20 04          C      	JR	NZ,E2.RUF5
  16CC*   B9             C      	CP	C
  16CD*   38 01          C      	JR	C,E2.RUF5
  16CF*   79             C      	LD	A,C
  16D0*                  C      E2.RUF5:
  16D0*   4F             C      	LD	C,A
  16D1*   06 00          C      	LD	B,0
  16D3*   E5             C      	PUSH	HL
  16D4*   3E 1E          C      	LD	A,SD.NL
  16D6*   59             C      	LD	E,C
  16D7*   ED B1          C      	CPIR
  16D9*   28 2A          C      	JR	Z,E2.RUF3
  16DB*   2B             C      	DEC	HL
  16DC*   4B             C      	LD	C,E
  16DD*   CD 16B8*       C      	CALL	E2.RUFTF
  16E0*   28 5D          C      	JR	Z,E2.RUFQ2
  16E2*   3E 20          C      	LD	A,SD.SPACE
  16E4*   ED B9          C      	CPDR
  16E6*   28 0D          C      	JR	Z,E2.RUF2
  16E8*   4B             C      	LD	C,E
  16E9*   0D             C      	DEC	C
  16EA*   20 01          C      	JR	NZ,$+3
  16EC*   0C             C      	INC	C
  16ED*   E1             C      	POP	HL
  16EE*   CD 170E*       C      	CALL	E2.RUF1
  16F1*   3E 1E          C      	LD	A,SD.NL
  16F3*   12             C      	LD	(DE),A
  16F4*   C9             C      	RET
  16F5*                  C      E2.RUF2:
  16F5*   E2 16FE*       C      	JP	PO,E2.RUF6
  16F8*   ED A9          C      	CPD
  16FA*   28 F9          C      	JR	Z,E2.RUF2
  16FC*   23             C      	INC	HL
  16FD*   03             C      	INC	BC
  16FE*                  C      E2.RUF6:
  16FE*   23             C      	INC	HL
  16FF*   36 1E          C      	LD	M,SD.NL
  1701*   03             C      	INC	BC
  1702*   E1             C      	POP	HL
'EDITOR --- Textaufruf'	MACRO-80 3.44	09-Dec-81	PAGE	1-45


  1703*   18 09          C      	JR	E2.RUF1
                         C      
  1705*                  C      E2.RUF3:
  1705*   7B             C      	LD	A,E
  1706*   91             C      	SUB	C
  1707*   4F             C      	LD	C,A
  1708*   E1             C      	POP	HL
  1709*   CD 16B8*       C      	CALL	E2.RUFTF
  170C*   28 44          C      	JR	Z,E2.RUFQ
  170E*                  C      E2.RUF1:
  170E*   EB             C      	EX	DE,HL
  170F*   CD 02AA*       C      	CALL	SY.CPOS
  1712*   EB             C      	EX	DE,HL
  1713*                  C      E2.RUF4:
  1713*   ED B0          C      	LDIR
  1715*   22 0DC4*       C      	LD	(SM.WINE),HL
  1718*   C9             C      	RET
                         C      
  1719*                  C      E2.RUFQ4:
  1719*   13             C      	INC	DE
  171A*                  C      E2.RUFQ3:
  171A*   CD 02AA*       C      	CALL	SY.CPOS
  171D*   06 03          C      	LD	B,3
  171F*                  C      E2.RUFQ5:
  171F*   36 23          C      	LD	M,'#'
  1721*   23             C      	INC	HL
  1722*   10 FB          C      	DJNZ	E2.RUFQ5
  1724*   23             C      	INC	HL
  1725*   CD 0542*       C      	CALL	S1.SPOSN
  1728*   D6 05          C      	SUB	5
  172A*   B9             C      	CP	C
  172B*   30 01          C      	JR	NC,$+3
  172D*   4F             C      	LD	C,A
  172E*   EB             C      	EX	DE,HL
  172F*   CD 1812*       C      	CALL	E2.KOMZ3
  1732*   36 23          C      	LD	M,'#'
  1734*   C3 1807*       C      	JP	E2.KOMZ4
                         C      
  1737*                  C      E2.RUFQ1:
  1737*   CD 02AA*       C      	CALL	SY.CPOS
  173A*   EB             C      	EX	DE,HL
  173B*   0C             C      	INC	C
  173C*   C3 17EC*       C      	JP	E2.KOMTR
                         C      
  173F*                  C      E2.RUFQ2:
  173F*   D1             C      	POP	DE
  1740*   1A             C      	LD	A,(DE)
  1741*   FE 3B          C      	CP	3BH
  1743*   28 F2          C      	JR	Z,E2.RUFQ1
  1745*   FE 23          C      	CP	'#'
  1747*   28 D0          C      	JR	Z,E2.RUFQ4
  1749*   3E 3B          C      	LD	A,3BH
  174B*   C5             C      	PUSH	BC
  174C*   ED B9          C      	CPDR
  174E*   C1             C      	POP	BC
  174F*   20 C9          C      	JR	NZ,E2.RUFQ3
  1751*   EB             C      	EX	DE,HL
                         C      
  1752*                  C      E2.RUFQ:
  1752*   41             C      	LD	B,C	;Quellkodeaufruf und Sortieren
  1753*   CD 0475*       C      	CALL	SY.SZEI4
  1756*   28 46          C      	JR	Z,E2.OP1
  1758*   48             C      	LD	C,B
  1759*   06 00          C      	LD	B,0
  175B*   FE 23          C      	CP	'#'
  175D*   CA 170E*       C      	JP	Z,E2.RUF1
  1760*   FE 3B          C      	CP	3BH
  1762*   CA 170E*       C      	JP	Z,E2.RUF1
  1765*   E5             C      	PUSH	HL
  1766*   3E 3B          C      	LD	A,3BH
  1768*   59             C      	LD	E,C
  1769*   ED B1          C      	CPIR		;allgemeiner Kommentar ?
  176B*   CC 17C2*       C      	CALL	Z,E2.KOM
  176E*   E1             C      	POP	HL	;Marke ?
  176F*   E5             C      	PUSH	HL
  1770*   4B             C      	LD	C,E
  1771*   3E 3A          C      	LD	A,':'	;Doppelpunkt-Suche
  1773*   ED B1          C      	CPIR
  1775*   E1             C      	POP	HL
  1776*   20 15          C      	JR	NZ,E2.OPCO	;Sprung, falls keine Marke
  1778*                  C      E2.MARK:
  1778*   7B             C      	LD	A,E
  1779*   91             C      	SUB	C	;Markenlaenge einstellen
'EDITOR --- Textaufruf'	MACRO-80 3.44	09-Dec-81	PAGE	1-46


  177A*   4F             C      	LD	C,A
  177B*   E5             C      	PUSH	HL
  177C*   C5             C      	PUSH	BC
  177D*   3E 27          C      	LD	A,27H	;Literalsuche
  177F*   ED B1          C      	CPIR
  1781*   C1             C      	POP	BC
  1782*   E1             C      	POP	HL
  1783*   28 08          C      	JR	Z,E2.OPCO	;keine Marke falls Literal
  1785*   CD 1816*       C      	CALL	E2.POSI0
  1788*   ED B0          C      	LDIR
  178A*   CD 0475*       C      	CALL	SY.SZEI4
  178D*                  C      E2.OPCO:
  178D*   3A 0D9C*       C      	LD	A,(SM.TABZ+1)
  1790*   CD 1819*       C      	CALL	E2.POSIT
  1793*                  C      E2.OP2:
  1793*   7E             C      	LD	A,M
  1794*   FE 20          C      	CP	SD.SPACE
  1796*   28 0A          C      	JR	Z,E2.OPRD
  1798*   ED A0          C      	LDI
  179A*   FE 1E          C      	CP	SD.NL
  179C*   20 F5          C      	JR	NZ,E2.OP2
  179E*                  C      E2.OP1:
  179E*   22 0DC4*       C      	LD	(SM.WINE),HL
  17A1*   C9             C      	RET
                         C      
  17A2*                  C      E2.OPRD:
  17A2*   3A 0D9D*       C      	LD	A,(SM.TABZ+2)
  17A5*   CD 1819*       C      	CALL	E2.POSIT
  17A8*   CD 0479*       C      	CALL	SY.SZEI2
  17AB*                  C      E2.OP3:
  17AB*   FE 3B          C      	CP	3BH	;Semikolon
  17AD*   C8             C      	RET	Z
  17AE*   ED A0          C      	LDI
  17B0*   FE 1E          C      	CP	SD.NL
  17B2*   28 EA          C      	JR	Z,E2.OP1
  17B4*   FE 27          C      	CP	27H
  17B6*   7E             C      	LD	A,M
  17B7*   20 F2          C      	JR	NZ,E2.OP3
  17B9*                  C      E2.OP4:
  17B9*   ED A0          C      	LDI
  17BB*   FE 27          C      	CP	27H
  17BD*   7E             C      	LD	A,M
  17BE*   28 EB          C      	JR	Z,E2.OP3
  17C0*   18 F7          C      	JR	E2.OP4
                         C      
  17C2*                  C      E2.KOM:
  17C2*   E5             C      	PUSH	HL
  17C3*   C5             C      	PUSH	BC
  17C4*   7B             C      	LD	A,E
  17C5*   91             C      	SUB	C
  17C6*   4F             C      	LD	C,A
  17C7*   3E 27          C      	LD	A,27H
  17C9*   2B             C      	DEC	HL
  17CA*   ED B9          C      	CPDR
  17CC*   20 0B          C      	JR	NZ,E2.KOM3
  17CE*   ED B9          C      	CPDR
  17D0*   28 07          C      	JR	Z,E2.KOM3
  17D2*   C1             C      	POP	BC
  17D3*   E1             C      	POP	HL
  17D4*   3E 3B          C      	LD	A,3BH
  17D6*   ED B1          C      	CPIR
  17D8*   C0             C      	RET	NZ
  17D9*                  C      E2.KOM3:
  17D9*   C1             C      	POP	BC
  17DA*   E1             C      	POP	HL
  17DB*   7B             C      	LD	A,E
  17DC*   91             C      	SUB	C
  17DD*   5F             C      	LD	E,A
  17DE*   D5             C      	PUSH	DE
  17DF*   03             C      	INC	BC
  17E0*   2B             C      	DEC	HL
  17E1*   3A 0D9E*       C      	LD	A,(SM.TABZ+3)
  17E4*   CD 1819*       C      	CALL	E2.POSIT
  17E7*   CD 17EC*       C      	CALL	E2.KOMTR
  17EA*   D1             C      	POP	DE
  17EB*   C9             C      	RET
                         C      
  17EC*                  C      E2.KOMTR:
  17EC*   CD 0542*       C      	CALL	S1.SPOSN
  17EF*   91             C      	SUB	C
  17F0*   D2 1713*       C      	JP	NC,E2.RUF4
  17F3*   81             C      	ADD	A,C
  17F4*   3D             C      	DEC	A
'EDITOR --- Textaufruf'	MACRO-80 3.44	09-Dec-81	PAGE	1-47


  17F5*   4F             C      	LD	C,A
  17F6*   C5             C      	PUSH	BC
  17F7*   E5             C      	PUSH	HL
  17F8*   09             C      	ADD	HL,BC
  17F9*   3E 20          C      	LD	A,SD.SPACE
  17FB*   ED B9          C      	CPDR
  17FD*   E1             C      	POP	HL
  17FE*   CC 180E*       C      	CALL	Z,E2.KOMZ2
  1801*   C1             C      	POP	BC
  1802*   C4 1812*       C      	CALL	NZ,E2.KOMZ3
  1805*   36 3B          C      	LD	M,3BH
  1807*                  C      E2.KOMZ4:
  1807*   3E 1E          C      	LD	A,SD.NL
  1809*   12             C      	LD	(DE),A
  180A*   22 0DC4*       C      	LD	(SM.WINE),HL
  180D*   C9             C      	RET
                         C      
  180E*                  C      E2.KOMZ2:
  180E*   03             C      	INC	BC
  180F*   ED B0          C      	LDIR
  1811*   C9             C      	RET
                         C      
  1812*                  C      E2.KOMZ3:
  1812*   ED B0          C      	LDIR
  1814*   2B             C      	DEC	HL
  1815*   C9             C      	RET
                         C      
  1816*                  C      E2.POSI0:
  1816*   3A 0D9B*       C      	LD	A,(SM.TABZ)
  1819*                  C      E2.POSIT:
  1819*   32 0DB5*       C      	LD	(SM.SPOS),A
  181C*   EB             C      	EX	DE,HL
  181D*   CD 02AA*       C      	CALL	SY.CPOS
  1820*   EB             C      	EX	DE,HL
  1821*   C9             C      	RET
                         C      
  1822*                  C      E2.UML:
  1822*   CD 1378*       C      	CALL	E1.BIZA
  1825*   7B             C      	LD	A,E
  1826*   32 0D98*       C      	LD	(SM.BZA),A
  1829*   CD 12CA*       C      	CALL	E1.BIL
  182C*                  C      E2.UMLT1:
  182C*   E5             C      	PUSH	HL
  182D*   C1             C      	POP	BC
  182E*                  C      E2.UMLT:
  182E*   21 3000        C      	LD	HL,SD.BWSA
  1831*   11 2C00        C      	LD	DE,SD.BPA
  1834*   D5             C      	PUSH	DE
  1835*   CD 188F*       C      	CALL	E2.UMLBT	;Komprimieren
  1838*   E1             C      	POP	HL
  1839*   EB             C      	EX	DE,HL
  183A*   B7             C      	OR	A
  183B*   ED 52          C      	SBC	HL,DE
  183D*   E5             C      	PUSH	HL	;HL=Laenge
  183E*   CD 1854*       C      	CALL	E2.UMLAD
  1841*   C1             C      	POP	BC
  1842*   21 2C00        C      	LD	HL,SD.BPA
  1845*                  C      E2.UMLA:
  1845*   ED 5B 0DC2*    C      	LD	DE,(SM.WINA)
  1849*   78             C      	LD	A,B
  184A*   B1             C      	OR	C
  184B*   28 02          C      	JR	Z,E2.UMLE
  184D*   ED B0          C      	LDIR
  184F*                  C      E2.UMLE:
  184F*   EB             C      	EX	DE,HL
  1850*   22 0DC4*       C      	LD	(SM.WINE),HL
  1853*   C9             C      	RET
                         C      
  1854*                  C      E2.UMLAD:
  1854*   ED 4B 0DC2*    C      	LD	BC,(SM.WINA)	;HL=Laenge Text im BPUF
  1858*   09             C      	ADD	HL,BC	;HL=WINE neu
  1859*   E5             C      	PUSH	HL
  185A*   ED 5B 0DC4*    C      	LD	DE,(SM.WINE)
  185E*   B7             C      	OR	A
  185F*   ED 52          C      	SBC	HL,DE	;CY=1 falls WINE neu < alt
  1861*   E1             C      	POP	HL
  1862*   C8             C      	RET	Z
  1863*   E5             C      	PUSH	HL
  1864*   F5             C      	PUSH	AF
  1865*   2A 0DC6*       C      	LD	HL,(SM.END)
  1868*   37             C      	SCF
  1869*   ED 52          C      	SBC	HL,DE
  186B*   23             C      	INC	HL
'EDITOR --- Textaufruf'	MACRO-80 3.44	09-Dec-81	PAGE	1-48


  186C*   30 06          C      	JR	NC,E2.UMLC	;HL=Laenge Q.Rest
  186E*   F1             C      	POP	AF
  186F*   E1             C      	POP	HL
  1870*   22 0DC6*       C      	LD	(SM.END),HL
  1873*   C9             C      	RET
  1874*                  C      E2.UMLC:
  1874*   F1             C      	POP	AF
  1875*   E5             C      	PUSH	HL
  1876*   C1             C      	POP	BC	;BC=Laenge Q.Rest
  1877*   E1             C      	POP	HL	;HL=WINE neu
  1878*   38 0D          C      	JR	C,E2.UMLR
  187A*   09             C      	ADD	HL,BC	;Luecke vergroessern
  187B*   EB             C      	EX	DE,HL	;DE=END neu
  187C*   2A 0DC6*       C      	LD	HL,(SM.END)
  187F*   ED 53 0DC6*    C      	LD	(SM.END),DE
  1883*   03             C      	INC	BC
  1884*   ED B8          C      	LDDR
  1886*   C9             C      	RET
  1887*                  C      E2.UMLR:
  1887*   EB             C      	EX	DE,HL	;DE=WINE neu   HL= alt
  1888*   ED B0          C      	LDIR
  188A*   ED 53 0DC6*    C      	LD	(SM.END),DE
  188E*   C9             C      	RET
                         C      
  188F*                  C      E2.UMLBT:
  188F*   78             C      	LD	A,B
  1890*   B1             C      	OR	C
  1891*   C8             C      	RET	Z
  1892*   3A 0D93*       C      	LD	A,(SM.FSTAT)
  1895*   FE 80          C      	CP	80H
  1897*   28 44          C      	JR	Z,E2.UML1
  1899*                  C      E2.UMLF:
  1899*   C5             C      	PUSH	BC
  189A*   E3             C      	EX	(SP),HL	;HL=Laenge (SP)=Quelle
  189B*   ED 4B 0DC1*    C      	LD	BC,(SM.SPANZ)
  189F*   06 00          C      	LD	B,0
  18A1*   CD 059C*       C      	CALL	S1.DIV	;A=Zeilenazahl  BC=Zeilenlaenge
  18A4*   E1             C      	POP	HL	;HL=Quelle
  18A5*                  C      E2.UMLF0:
  18A5*   F5             C      	PUSH	AF
  18A6*   C5             C      	PUSH	BC
  18A7*   E5             C      	PUSH	HL
  18A8*   41             C      	LD	B,C
  18A9*   CD 0475*       C      	CALL	SY.SZEI4	;Z=1 wenn nur space
  18AC*   28 14          C      	JR	Z,E2.UMLF1
  18AE*   ED 4B 0DB7*    C      	LD	BC,(SM.SMIN)
  18B2*   06 00          C      	LD	B,0
  18B4*   0D             C      	DEC	C
  18B5*   E1             C      	POP	HL
  18B6*   E5             C      	PUSH	HL
  18B7*   09             C      	ADD	HL,BC
  18B8*   F5             C      	PUSH	AF
  18B9*   3A 0DB9*       C      	LD	A,(SM.SMAX)
  18BC*   91             C      	SUB	C
  18BD*   4F             C      	LD	C,A
  18BE*   F1             C      	POP	AF
  18BF*   CD 18D7*       C      	CALL	E2.UMLFR
  18C2*                  C      E2.UMLF1:
  18C2*   E1             C      	POP	HL
  18C3*   C1             C      	POP	BC
  18C4*   09             C      	ADD	HL,BC
  18C5*   F1             C      	POP	AF
  18C6*   3D             C      	DEC	A
  18C7*   20 DC          C      	JR	NZ,E2.UMLF0
  18C9*   C9             C      	RET
                         C      
  18CA*                  C      E2.UMLF2:
  18CA*   3E 20          C      	LD	A,SD.SPACE
  18CC*   ED A1          C      	CPI
  18CE*   E0             C      	RET	PO
  18CF*   28 F9          C      	JR	Z,E2.UMLF2
  18D1*   2B             C      	DEC	HL
  18D2*   03             C      	INC	BC
  18D3*                  C      E2.UMLF3:
  18D3*   7E             C      	LD	A,M
  18D4*   ED A0          C      	LDI
  18D6*   E0             C      	RET	PO
  18D7*                  C      E2.UMLFR:
  18D7*   FE 1E          C      	CP	SD.NL
  18D9*   20 F8          C      	JR	NZ,E2.UMLF3
  18DB*   18 ED          C      	JR	E2.UMLF2
                         C      
  18DD*                  C      E2.UML1:
'EDITOR --- Textaufruf'	MACRO-80 3.44	09-Dec-81	PAGE	1-49


  18DD*   3E 20          C      	LD	A,SD.SPACE	;Komprimieren
  18DF*   ED A1          C      	CPI
  18E1*   E0             C      	RET	PO
  18E2*   28 F9          C      	JR	Z,E2.UML1
  18E4*   2B             C      	DEC	HL
  18E5*   03             C      	INC	BC
  18E6*   7E             C      	LD	A,M	;kein space
  18E7*   FE 1E          C      	CP	1EH	;NL ?  ;SD.NL ???
  18E9*   28 10          C      	JR	Z,E2.UML2
  18EB*   FE 27          C      	CP	27H	;Literal ?
  18ED*   28 11          C      	JR	Z,E2.UML4
  18EF*   FE 3B          C      	CP	3BH	;Semikolon ?
  18F1*   28 17          C      	JR	Z,E2.UML5
  18F3*                  C      E2.UML6:
  18F3*   ED A0          C      	LDI		;Text uebertragen mit nachgestelltem SP
  18F5*   E0             C      	RET	PO
  18F6*   3E 20          C      	LD	A,SD.SPACE
  18F8*   BE             C      	CP	M
  18F9*   20 E2          C      	JR	NZ,E2.UML1
  18FB*                  C      E2.UML2:
  18FB*   ED A0          C      	LDI		;Text uebertragen ohne nachgestelltes SP
  18FD*   E0             C      	RET	PO
  18FE*   18 DD          C      	JR	E2.UML1
  1900*                  C      E2.UML4:
  1900*   ED A0          C      	LDI
  1902*   E0             C      	RET	PO
  1903*   3E 27          C      	LD	A,27H
  1905*   BE             C      	CP	M
  1906*   20 F8          C      	JR	NZ,E2.UML4
  1908*   18 E9          C      	JR	E2.UML6
  190A*                  C      E2.UML5:
  190A*   ED A0          C      	LDI
  190C*   E0             C      	RET	PO
  190D*   3E 1E          C      	LD	A,1EH
  190F*   BE             C      	CP	M
  1910*   20 F8          C      	JR	NZ,E2.UML5
  1912*   18 E7          C      	JR	E2.UML2
                         C      
                         C      			;Stand: 30.Januar 85 - K EAW/wfvm..MSH
                         C      
                         C      ;	END
                         C      	TITLE	'EDITOR --- Kommandointerpreter'
                         C      	PAGE
'EDITOR --- Kommandointerpreter'	MACRO-80 3.44	09-Dec-81	PAGE	1-50


                         C      
                         C      ;	PN	E301
                         C      ;****************************************************************
                         C      ;*                  DEG2000 V.1.2   EDITOR --- Kommandointerpr. *
                         C      ;*  Version         --------------------------------------------*
                         C      ;*                  Programmierer: M. Herbote  K EAW  ZFT (WFT) *
                         C      ;*  V 1 . 2         --------------------------------------------*
                         C      ;*                  Stand        : 30.Januar 1985               *
                         C      ;****************************************************************
  1914*                  C      E3.KOMAN:
  1914*   FE 5A          C      	CP	'Z'	;(HL)=A=1.Kommandozeichen
  1916*   CA 1949*       C      	JP	Z,E3.ZET	;B=Zaehler
  1919*   FE 54          C      	CP	'T'
  191B*   CA 19AE*       C      	JP	Z,E3.TAUS
  191E*   FE 59          C      	CP	'Y'
  1920*   CA 1A4E*       C      	JP	Z,E3.STAN
  1923*   FE 58          C      	CP	'X'
  1925*   CA 1A35*       C      	JP	Z,E3.LESE
  1928*   FE 4D          C      	CP	'M'
  192A*   CA 1AAB*       C      	JP	Z,E3.MOVE
  192D*   FE 4E          C      	CP	'N'
  192F*   CA 1A1E*       C      	JP	Z,E3.NEUST
  1932*   FE 50          C      	CP	'P'
  1934*   CA 1B5C*       C      	JP	Z,E3.PTSL
  1937*   FE 45          C      	CP	'E'
  1939*   20 06          C      	JR	NZ,E3.ERRO2
  193B*   CD 14F5*       C      	CALL	E2.RESET
  193E*   C3 000B*       C      	JP	SY.SYSTB
  1941*                  C      E3.ERRO2:
  1941*   0E 02          C      	LD	C,2	;KOMMANDO FALSCH
  1943*                  C      E3.FEHL:
  1943*   CD 0332*       C      	CALL	SY.LCPOS
  1946*                  C      E3.FEHL1:
  1946*   C3 1BF2*       C      	JP	E3.ERRR
                         C      
                         C      ;Kommando       Statusbyte     Bedeutung
                         C      ;  Z                1          fortlaufend  Blaettern
                         C      ;  Z n              2          ab Zeile  n  Blaettern
                         C      ;  Z '...'          4          ab naechster Zeichenkette
                         C      ;  Z +n             8          ab Zeilenstand  +n
                         C      ;  Z +              8          ''      ''      +1
                         C      ;  Z*....       wie oben       wie oben ab Zeile 1 beginnend
                         C      ;  T '..' '..'   ''  ''+10H    Tausch von Zeichenketten
                         C      ;  Y ....        ''  ''  ''    Stanzen
                         C      ;  M ....        ''  ''  ''    Verschieben
                         C      
                         C      
  1949*                  C      E3.ZET:
  1949*   EB             C      	EX	DE,HL
  194A*   21 0D94*       C      	LD	HL,SM.STAT	;DE=Anfang Rest Kommando
  194D*   36 01          C      	LD	M,1
  194F*   CD 0629*       C      	CALL	S1.SUZEI
  1952*   C8             C      	RET	Z
  1953*   FE 2A          C      	CP	'*'
  1955*   20 0B          C      	JR	NZ,E3.Z1
  1957*   CD 14F5*       C      	CALL	E2.RESET
  195A*   AF             C      	XOR	A
  195B*   32 0D98*       C      	LD	(SM.BZA),A
  195E*   CD 0629*       C      	CALL	S1.SUZEI
  1961*   C8             C      	RET	Z		;Blaettern ab #
  1962*                  C      E3.Z1:
  1962*   CD 05A5*       C      	CALL	S1.IDH
  1965*   38 0B          C      	JR	C,E3.Z4
  1967*   28 1F          C      	JR	Z,E3.ERRO3
  1969*                  C      E3.ZET1:
  1969*   3E 02          C      	LD	A,2
  196B*   32 0D94*       C      	LD	(SM.STAT),A
  196E*                  C      E3.Z3:
  196E*   22 0D96*       C      	LD	(SM.ZEIZ),HL
  1971*   C9             C      	RET
  1972*                  C      E3.Z4:
  1972*   FE 2B          C      	CP	'+'
  1974*   20 18          C      	JR	NZ,E3.ZEIK
  1976*   3E 08          C      	LD	A,8
  1978*   32 0D94*       C      	LD	(SM.STAT),A
  197B*   21 0001        C      	LD	HL,1
  197E*                  C      E3.PL3:
  197E*   CD 062F*       C      	CALL	S1.SUZA
  1981*   38 05          C      	JR	C,E3.ERRO3
  1983*   22 0D99*       C      	LD	(SM.WEITE),HL
  1986*   C9             C      	RET
                         C      
'EDITOR --- Kommandointerpreter'	MACRO-80 3.44	09-Dec-81	PAGE	1-51


  1987*                  C      E3.ERR3A:
  1987*   F1             C      	POP	AF
  1988*                  C      E3.ERRO3:
  1988*   0E 03          C      	LD	C,3	;falsche Zahleneingabe
  198A*   EB             C      	EX	DE,HL
  198B*   C3 1943*       C      	JP	E3.FEHL
                         C      
  198E*                  C      E3.ZEIK:
  198E*   21 0D94*       C      	LD	HL,SM.STAT
  1991*   36 04          C      	LD	M,4
  1993*   D5             C      	PUSH	DE
  1994*   E1             C      	POP	HL
  1995*                  C      E3.ZEIKA:
  1995*   CD 061A*       C      	CALL	S1.KETTE
  1998*   38 0F          C      	JR	C,E3.ERRO4
  199A*   28 0D          C      	JR	Z,E3.ERRO4
  199C*                  C      E3.ZEIKC:
  199C*   21 0DC8*       C      	LD	HL,SM.LZA
  199F*                  C      E3.ZEIKB:
  199F*   EB             C      	EX	DE,HL
  19A0*   12             C      	LD	(DE),A
  19A1*   13             C      	INC	DE
  19A2*   23             C      	INC	HL
  19A3*   06 00          C      	LD	B,0
  19A5*   4F             C      	LD	C,A
  19A6*   ED B0          C      	LDIR
  19A8*   C9             C      	RET
                         C      
  19A9*                  C      E3.ERRO4:
  19A9*   0E 04          C      	LD	C,4	;falsch eingegebene Zeichenkette
  19AB*   C3 1946*       C      	JP	E3.FEHL1
                         C      
  19AE*                  C      E3.TAUS:
  19AE*   CD 0479*       C      	CALL	SY.SZEI2
  19B1*   C8             C      	RET	Z
  19B2*   E5             C      	PUSH	HL
  19B3*   D1             C      	POP	DE
  19B4*   CD 061A*       C      	CALL	S1.KETTE
  19B7*   38 F0          C      	JR	C,E3.ERRO4
  19B9*   28 EE          C      	JR	Z,E3.ERRO4
  19BB*   C5             C      	PUSH	BC
  19BC*   CD 199C*       C      	CALL	E3.ZEIKC
  19BF*   C1             C      	POP	BC
  19C0*   CD 0479*       C      	CALL	SY.SZEI2
  19C3*   28 07          C      	JR	Z,E3.TAU3
  19C5*   E5             C      	PUSH	HL
  19C6*   D1             C      	POP	DE
  19C7*   CD 061A*       C      	CALL	S1.KETTE
  19CA*   38 DD          C      	JR	C,E3.ERRO4
  19CC*                  C      E3.TAU3:
  19CC*   21 0E14*       C      	LD	HL,SM.LZN
  19CF*   36 00          C      	LD	M,0
  19D1*   28 06          C      	JR	Z,E3.TAU6
  19D3*   77             C      	LD	M,A
  19D4*   13             C      	INC	DE
  19D5*   ED 53 0E15*    C      	LD	(SM.ZKN),DE
  19D9*                  C      E3.TAU6:
  19D9*   CD 15FD*       C      	CALL	E2.QLANG
  19DC*                  C      E3.TAU4:
  19DC*   D4 160B*       C      	CALL	NC,E2.SUCH
  19DF*   38 16          C      	JR	C,E3.ERRO7
  19E1*   20 F9          C      	JR	NZ,E3.TAU4
  19E3*                  C      E3.TAU1:
  19E3*   CC 19FC*       C      	CALL	Z,E3.EXCH
  19E6*   D4 160B*       C      	CALL	NC,E2.SUCH
  19E9*   30 F8          C      	JR	NC,E3.TAU1
  19EB*                  C      E3.TAU2:
  19EB*   21 0D94*       C      	LD	HL,SM.STAT
  19EE*   CB 56          C      	BIT	2,M
  19F0*   28 02          C      	JR	Z,E3.TAU5
  19F2*   36 01          C      	LD	M,1
  19F4*                  C      E3.TAU5:
  19F4*   CB E6          C      	SET	4,M
  19F6*   C9             C      	RET
                         C      
  19F7*                  C      E3.ERRO7:
  19F7*   0E 07          C      	LD	C,7	;Zeichenkette nicht vorhanden
  19F9*   C3 1943*       C      	JP	E3.FEHL
                         C      
  19FC*                  C      E3.EXCH:
  19FC*   2B             C      	DEC	HL
  19FD*   22 0DC2*       C      	LD	(SM.WINA),HL
  1A00*   ED 4B 0DC8*    C      	LD	BC,(SM.LZA)
'EDITOR --- Kommandointerpreter'	MACRO-80 3.44	09-Dec-81	PAGE	1-52


  1A04*   06 00          C      	LD	B,0
  1A06*   09             C      	ADD	HL,BC
  1A07*   22 0DC4*       C      	LD	(SM.WINE),HL
  1A0A*   2A 0E14*       C      	LD	HL,(SM.LZN)
  1A0D*   60             C      	LD	H,B
  1A0E*   E5             C      	PUSH	HL
  1A0F*   CD 1854*       C      	CALL	E2.UMLAD
  1A12*   C1             C      	POP	BC
  1A13*   2A 0E15*       C      	LD	HL,(SM.ZKN)
  1A16*   CD 1845*       C      	CALL	E2.UMLA
  1A19*   E5             C      	PUSH	HL
  1A1A*   C1             C      	POP	BC
  1A1B*   C3 1600*       C      	JP	E2.LANG1
                         C      
  1A1E*                  C      E3.NEUST:
  1A1E*   CD 14F5*       C      	CALL	E2.RESET
  1A21*   22 0DC6*       C      	LD	(SM.END),HL
  1A24*                  C      E3.NEU1:
  1A24*   CD 1390*       C      	CALL	E1.NUM
  1A27*   3E 01          C      	LD	A,1
  1A29*   32 0D94*       C      	LD	(SM.STAT),A
  1A2C*   2A 0DBC*       C      	LD	HL,(SM.ZMIN2)
  1A2F*   25             C      	DEC	H
  1A30*   2D             C      	DEC	L
  1A31*   22 0DBA*       C      	LD	(SM.ZPOS2),HL
  1A34*   C9             C      	RET
                         C      
  1A35*                  C      E3.LESE:
  1A35*   CD 0479*       C      	CALL	SY.SZEI2
  1A38*   28 08          C      	JR	Z,E3.LESE1
  1A3A*   FE 2A          C      	CP	'*'
  1A3C*   C2 1941*       C      	JP	NZ,E3.ERRO2
  1A3F*   CD 1A1E*       C      	CALL	E3.NEUST
  1A42*                  C      E3.LESE1:
  1A42*   CD 16A9*       C      	CALL	E2.ZNUMX	;HL=(END)
  1A45*   D5             C      	PUSH	DE
  1A46*   CD 1C00*       C      	CALL	E4.LESER
  1A49*   E1             C      	POP	HL
  1A4A*   23             C      	INC	HL
  1A4B*   C3 1969*       C      	JP	E3.ZET1
                         C      
  1A4E*                  C      E3.STAN:
  1A4E*   EB             C      	EX	DE,HL
  1A4F*                  C      E3.STAN2:
  1A4F*   CD 062F*       C      	CALL	S1.SUZA
  1A52*   20 0C          C      	JR	NZ,E3.STAN1
  1A54*   11 8830        C      	LD	DE,SD.TPA	;DE=Anfang
  1A57*                  C      E3.STAN3:
  1A57*   2A 0DC6*       C      	LD	HL,(SM.END)	;HL=Ende
  1A5A*                  C      E3.STAN6:
  1A5A*   2B             C      	DEC	HL
  1A5B*   CD 1C57*       C      	CALL	E4.STANZ
  1A5E*   18 8B          C      	JR	E3.TAU2
  1A60*                  C      E3.STAN1:
  1A60*   DA 1988*       C      	JP	C,E3.ERRO3
  1A63*   C5             C      	PUSH	BC
  1A64*   D5             C      	PUSH	DE
  1A65*   EB             C      	EX	DE,HL
  1A66*   CD 15FD*       C      	CALL	E2.QLANG
  1A69*   38 20          C      	JR	C,E3.ERR5C
  1A6B*   CD 1570*       C      	CALL	E2.ZNR1	;HL=Startadresse
  1A6E*   D1             C      	POP	DE	;DE=KOZEIposition
  1A6F*   C1             C      	POP	BC
  1A70*   E2 1A8C*       C      	JP	PO,E3.ERR5B
  1A73*                  C      E3.STAN5:
  1A73*   E5             C      	PUSH	HL
  1A74*   CD 062F*       C      	CALL	S1.SUZA
  1A77*   38 E7          C      	JR	C,E3.STAN1
  1A79*   D1             C      	POP	DE	;DE=Startadresse
  1A7A*   28 DB          C      	JR	Z,E3.STAN3
  1A7C*   D5             C      	PUSH	DE
  1A7D*   23             C      	INC	HL
  1A7E*   EB             C      	EX	DE,HL
  1A7F*   CD 15FD*       C      	CALL	E2.QLANG
  1A82*   CD 1570*       C      	CALL	E2.ZNR1
  1A85*   D1             C      	POP	DE
  1A86*   E2 1A57*       C      	JP	PO,E3.STAN3
  1A89*   18 CF          C      	JR	E3.STAN6
                         C      
  1A8B*                  C      E3.ERR5C:
  1A8B*   D1             C      	POP	DE
  1A8C*                  C      E3.ERR5B:
  1A8C*   EB             C      	EX	DE,HL
'EDITOR --- Kommandointerpreter'	MACRO-80 3.44	09-Dec-81	PAGE	1-53


  1A8D*   0E 05          C      	LD	C,5	;Zeilennummer zu gross
  1A8F*   C3 1943*       C      	JP	E3.FEHL
                         C      
  1A92*                  C      E3.ERRO8:
  1A92*   EB             C      	EX	DE,HL
  1A93*   0E 08          C      	LD	C,8	;Zeilennummer zu klein
  1A95*   C3 1943*       C      	JP	E3.FEHL
                         C      
  1A98*                  C      E3.MOVE2:
  1A98*   CD 062F*       C      	CALL	S1.SUZA
  1A9B*   DA 1987*       C      	JP	C,E3.ERR3A
  1A9E*   C0             C      	RET	NZ
  1A9F*   3A 0DB7*       C      	LD	A,(SM.SMIN)
  1AA2*   3D             C      	DEC	A
  1AA3*   32 0DB5*       C      	LD	(SM.SPOS),A
  1AA6*   F1             C      	POP	AF	;SP korrigieren
  1AA7*                  C      E3.ERR2A:
  1AA7*   EB             C      	EX	DE,HL
  1AA8*   C3 1941*       C      	JP	E3.ERRO2
                         C      
  1AAB*                  C      E3.MOVE:
  1AAB*   EB             C      	EX	DE,HL
  1AAC*   CD 1A98*       C      	CALL	E3.MOVE2
  1AAF*   22 0E12*       C      	LD	(SM.LZN-2),HL
  1AB2*   23             C      	INC	HL
  1AB3*   22 0E10*       C      	LD	(SM.LZN-4),HL
  1AB6*   CD 1B53*       C      	CALL	E3.MOVE4
  1AB9*   28 EC          C      	JR	Z,E3.ERR2A
  1ABB*   FE 3E          C      	CP	'>'
  1ABD*   28 1D          C      	JR	Z,E3.MOVE1
  1ABF*   CD 0633*       C      	CALL	S1.SUZA1
  1AC2*   DA 1988*       C      	JP	C,E3.ERRO3
  1AC5*   23             C      	INC	HL
  1AC6*   22 0E10*       C      	LD	(SM.LZN-4),HL
  1AC9*   C5             C      	PUSH	BC
  1ACA*   ED 4B 0E12*    C      	LD	BC,(SM.LZN-2)
  1ACE*   ED 42          C      	SBC	HL,BC
  1AD0*   C1             C      	POP	BC
  1AD1*   38 BF          C      	JR	C,E3.ERRO8
  1AD3*   CD 1B53*       C      	CALL	E3.MOVE4
  1AD6*   28 CF          C      	JR	Z,E3.ERR2A
  1AD8*   FE 3E          C      	CP	'>'
  1ADA*   20 CB          C      	JR	NZ,E3.ERR2A
  1ADC*                  C      E3.MOVE1:
  1ADC*   CD 1A98*       C      	CALL	E3.MOVE2
  1ADF*   22 0E0E*       C      	LD	(SM.LZN-6),HL
  1AE2*   ED 4B 0E10*    C      	LD	BC,(SM.LZN-4)
  1AE6*   3E 01          C      	LD	A,1
  1AE8*   32 0E0D*       C      	LD	(SM.LZN-7),A
  1AEB*   ED 42          C      	SBC	HL,BC
  1AED*   09             C      	ADD	HL,BC
  1AEE*   30 0C          C      	JR	NC,E3.MOVE3
  1AF0*   ED 4B 0E12*    C      	LD	BC,(SM.LZN-2)
  1AF4*   AF             C      	XOR	A
  1AF5*   ED 42          C      	SBC	HL,BC
  1AF7*   30 99          C      	JR	NC,E3.ERRO8
  1AF9*   32 0E0D*       C      	LD	(SM.LZN-7),A
  1AFC*                  C      E3.MOVE3:
  1AFC*   D5             C      	PUSH	DE
  1AFD*   CD 15FD*       C      	CALL	E2.QLANG
  1B00*   38 89          C      	JR	C,E3.ERR5C
  1B02*   ED 5B 0E0E*    C      	LD	DE,(SM.LZN-6)
  1B06*   CD 1570*       C      	CALL	E2.ZNR1
  1B09*   E2 1A8B*       C      	JP	PO,E3.ERR5C
  1B0C*   CD 14FE*       C      	CALL	E2.SET	;WINA=WINE=Zielzeile
  1B0F*   CD 15FD*       C      	CALL	E2.QLANG
  1B12*   ED 5B 0E12*    C      	LD	DE,(SM.LZN-2)
  1B16*   CD 1570*       C      	CALL	E2.ZNR1	;HL=Quellanfang
  1B19*   E2 1A8B*       C      	JP	PO,E3.ERR5C
  1B1C*   E3             C      	EX	(SP),HL
  1B1D*   E5             C      	PUSH	HL
  1B1E*   CD 15FD*       C      	CALL	E2.QLANG
  1B21*   ED 5B 0E10*    C      	LD	DE,(SM.LZN-4)
  1B25*   CD 1570*       C      	CALL	E2.ZNR1	;HL=Quellende
  1B28*   D1             C      	POP	DE
  1B29*   E2 1A8C*       C      	JP	PO,E3.ERR5B
  1B2C*   C1             C      	POP	BC
  1B2D*   C5             C      	PUSH	BC
  1B2E*   B7             C      	OR	A
  1B2F*   ED 42          C      	SBC	HL,BC	;HL=QE-QA
  1B31*   E5             C      	PUSH	HL
  1B32*   CD 1854*       C      	CALL	E2.UMLAD
  1B35*   C1             C      	POP	BC
'EDITOR --- Kommandointerpreter'	MACRO-80 3.44	09-Dec-81	PAGE	1-54


  1B36*   E1             C      	POP	HL	;HL=QA
  1B37*   3A 0E0D*       C      	LD	A,(SM.LZN-7)
  1B3A*   B7             C      	OR	A	;Z=1 fuer rueckwaerts
  1B3B*   20 01          C      	JR	NZ,E3.MOVEV
  1B3D*   09             C      	ADD	HL,BC
  1B3E*                  C      E3.MOVEV:
  1B3E*   E5             C      	PUSH	HL
  1B3F*   CD 1845*       C      	CALL	E2.UMLA
  1B42*   E1             C      	POP	HL
  1B43*   22 0DC2*       C      	LD	(SM.WINA),HL
  1B46*   ED 53 0DC4*    C      	LD	(SM.WINE),DE
  1B4A*   21 0000        C      	LD	HL,0
  1B4D*   CD 1854*       C      	CALL	E2.UMLAD
  1B50*   C3 19EB*       C      	JP	E3.TAU2
  1B53*                  C      E3.MOVE4:
  1B53*   CD 0629*       C      	CALL	S1.SUZEI
  1B56*   C8             C      	RET	Z		;Z=1: Fehler
  1B57*   FE 2D          C      	CP	'-'
  1B59*   28 F8          C      	JR	Z,E3.MOVE4
  1B5B*   C9             C      	RET
  1B5C*                  C      E3.PTSL:
  1B5C*   AF             C      	XOR	A
  1B5D*   08             C      	EX	AF,AF'	;'
  1B5E*   DD 21 0C00     C      	LD	IX,SD.RAM
  1B62*   DD 36 00 30    C      	LD	(IX+0),SD.PSANZ
  1B66*   EB             C      	EX	DE,HL
  1B67*   CD 063D*       C      	CALL	S1.LT1Z
  1B6A*   CA 1AA7*       C      	JP	Z,E3.ERR2A
  1B6D*   DA 1988*       C      	JP	C,E3.ERRO3
  1B70*   C5             C      	PUSH	BC
  1B71*   D5             C      	PUSH	DE
  1B72*   CD 1437*       C      	CALL	E1.PTSNR
  1B75*   D1             C      	POP	DE
  1B76*   DA 1A8C*       C      	JP	C,E3.ERR5B
  1B79*   D9             C      	EXX
  1B7A*   2A 0DC6*       C      	LD	HL,(SM.END)
  1B7D*   ED 5B 0DC2*    C      	LD	DE,(SM.WINA)
  1B81*   ED 4B 0DC4*    C      	LD	BC,(SM.WINE)
  1B85*   D9             C      	EXX
  1B86*   22 0DC2*       C      	LD	(SM.WINA),HL
  1B89*   E2 1B8E*       C      	JP	PO,E3.PTSL1
  1B8C*   ED B1          C      	CPIR
  1B8E*                  C      E3.PTSL1:
  1B8E*   2B             C      	DEC	HL
  1B8F*   22 0DC4*       C      	LD	(SM.WINE),HL
  1B92*   2A 0E17*       C      	LD	HL,(SM.PTSE)
  1B95*   22 0DC6*       C      	LD	(SM.END),HL
  1B98*   C1             C      	POP	BC
  1B99*   CD 0629*       C      	CALL	S1.SUZEI
  1B9C*   28 46          C      	JR	Z,E3.PTER4
  1B9E*   D5             C      	PUSH	DE
  1B9F*   E1             C      	POP	HL
  1BA0*   CD 061A*       C      	CALL	S1.KETTE
  1BA3*   28 3F          C      	JR	Z,E3.PTER4
  1BA5*   38 3D          C      	JR	C,E3.PTER4
  1BA7*   2A 0DC6*       C      	LD	HL,(SM.END)
  1BAA*   ED 4B 0DC2*    C      	LD	BC,(SM.WINA)
  1BAE*   09             C      	ADD	HL,BC
  1BAF*   ED 4B 0DC4*    C      	LD	BC,(SM.WINE)
  1BB3*   B7             C      	OR	A
  1BB4*   ED 42          C      	SBC	HL,BC
  1BB6*   06 00          C      	LD	B,0
  1BB8*   4F             C      	LD	C,A
  1BB9*   09             C      	ADD	HL,BC
  1BBA*   01 FFFF        C      	LD	BC,0FFFFH
  1BBD*   B7             C      	OR	A
  1BBE*   ED 42          C      	SBC	HL,BC
  1BC0*   30 28          C      	JR	NC,E3.PTER9	;END+WINA-WINE+L < 0FFFFH   ?
  1BC2*   26 00          C      	LD	H,0	;                  RAM+400H ?
  1BC4*   6F             C      	LD	L,A
  1BC5*   13             C      	INC	DE
  1BC6*   E5             C      	PUSH	HL
  1BC7*   D5             C      	PUSH	DE
  1BC8*   CD 1854*       C      	CALL	E2.UMLAD
  1BCB*   E1             C      	POP	HL
  1BCC*   C1             C      	POP	BC
  1BCD*   CD 1845*       C      	CALL	E2.UMLA
  1BD0*   2A 0DC6*       C      	LD	HL,(SM.END)
  1BD3*   22 0E17*       C      	LD	(SM.PTSE),HL
  1BD6*                  C      E3.PTEX:
  1BD6*   D9             C      	EXX
  1BD7*   22 0DC6*       C      	LD	(SM.END),HL
  1BDA*   ED 53 0DC2*    C      	LD	(SM.WINA),DE
'EDITOR --- Kommandointerpreter'	MACRO-80 3.44	09-Dec-81	PAGE	1-55


  1BDE*   ED 43 0DC4*    C      	LD	(SM.WINE),BC
  1BE2*   D9             C      	EXX
  1BE3*   C9             C      	RET
  1BE4*                  C      E3.PTER4:
  1BE4*   CD 1BD6*       C      	CALL	E3.PTEX
  1BE7*   C3 19A9*       C      	JP	E3.ERRO4
  1BEA*                  C      E3.PTER9:
  1BEA*   CD 1BD6*       C      	CALL	E3.PTEX
  1BED*   0E 09          C      	LD	C,9	;Speicherueberlauf
  1BEF*   C3 1946*       C      	JP	E3.FEHL1
                         C      
  1BF2*                  C      E3.ERRR:
  1BF2*   31 0CDE        C      	LD	SP,SM.STACK-2
  1BF5*   3E 17          C      	LD	A,23
  1BF7*   32 0DB4*       C      	LD	(SM.ZPOS),A
  1BFA*   CD 05F0*       C      	CALL	S1.ERRO
  1BFD*   C3 106A*       C      	JP	ED.MEL11
                         C      
                         C      			;Stand: 30.Januar 85 - K EAW/wfvm..MSH
                         C      
                         C      ;	END
                         C      	TITLE	'EDITOR --- Peripheriegeraete'
                         C      	PAGE
'EDITOR --- Peripheriegeraete'	MACRO-80 3.44	09-Dec-81	PAGE	1-56


                         C      
                         C      ;	PN	E403
                         C      ;****************************************************************
                         C      ;*                  DEG2000  V. 1.2   EDITOR --- Peripherieger. *
                         C      ;*  Version         --------------------------------------------*
                         C      ;*                  Programmierer: M. Herbote  K EAW  ZFT (WFT) *
                         C      ;*  V 1 . 2         --------------------------------------------*
                         C      ;*                  Stand        : 04.Februar 1985              *
                         C      ;****************************************************************
  1C00*                  C      E4.LESER:
  1C00*   DD E5          C      	PUSH	IX
  1C02*   DD 21 0FA0*    C      	LD	IX,SM.EALBL
  1C06*                  C      E4.LLQ0:
  1C06*   CD 4050*       C      	CALL	LR.LRLBL
  1C09*   DD CB 03 46    C      	BIT	0,(IX+3)
  1C0D*   20 42          C      	JR	NZ,E4.FERTL
  1C0F*   FE 0A          C      	CP	00AH
  1C11*   28 2E          C      	JR	Z,E4.LLQ2
  1C13*   FE 0D          C      	CP	00DH
  1C15*   28 2A          C      	JR	Z,E4.LLQ2
  1C17*   FE 09          C      	CP	SD.TAB	;Tabulator
  1C19*   20 0A          C      	JR	NZ,E4.LLQ6
  1C1B*   36 20          C      	LD	M,SD.SPACE
  1C1D*   CD 16B8*       C      	CALL	E2.RUFTF
  1C20*   3E 09          C      	LD	A,SD.TAB
  1C22*   20 01          C      	JR	NZ,E4.LLQ6
  1C24*   23             C      	INC	HL
  1C25*                  C      E4.LLQ6:
  1C25*   77             C      	LD	M,A
  1C26*   BE             C      	CP	M
  1C27*   20 21          C      	JR	NZ,E4.ERR13	;Schreibfehler
  1C29*   23             C      	INC	HL
  1C2A*   E5             C      	PUSH	HL
  1C2B*   D5             C      	PUSH	DE
  1C2C*   EB             C      	EX	DE,HL
  1C2D*   2A 0FF7        C      	LD	HL,(SM.PTS)
  1C30*   B7             C      	OR	A
  1C31*   ED 52          C      	SBC	HL,DE
  1C33*   11 09C4        C      	LD	DE,2500
  1C36*   B7             C      	OR	A
  1C37*   ED 52          C      	SBC	HL,DE
  1C39*   D1             C      	POP	DE
  1C3A*   E1             C      	POP	HL
  1C3B*   28 14          C      	JR	Z,E4.FERTL	;(SM.PTS)-2500 = akt. Zeiger
  1C3D*   38 12          C      	JR	C,E4.FERTL	;(SM.PTS)-2500 < akt. Zeiger
  1C3F*   18 C5          C      	JR	E4.LLQ0
                         C      
  1C41*                  C      E4.LLQ2:
  1C41*   3E 1E          C      	LD	A,1EH
  1C43*   2B             C      	DEC	HL
  1C44*   BE             C      	CP	M
  1C45*   23             C      	INC	HL
  1C46*   28 BE          C      	JR	Z,E4.LLQ0
  1C48*   18 DB          C      	JR	E4.LLQ6
                         C      
  1C4A*                  C      E4.ERR13:
  1C4A*   0E 0D          C      	LD	C,13	;Schreibfehler
  1C4C*                  C      E4.ERR0:
  1C4C*   E5             C      	PUSH	HL
  1C4D*   CD 05F0*       C      	CALL	S1.ERRO
  1C50*   E1             C      	POP	HL
  1C51*                  C      E4.FERTL:
  1C51*   22 0DC6*       C      	LD	(SM.END),HL
  1C54*   DD E1          C      	POP	IX
  1C56*   C9             C      	RET
                         C      
                         C      
  1C57*                  C      E4.STANZ:
  1C57*   DD E5          C      	PUSH	IX	;(DE)=1.-, (HL)=letztes Zeichen
  1C59*   DD 21 0F80*    C      	LD	IX,SM.EALBS
  1C5D*                  C      E4.LSQ1:
  1C5D*   1A             C      	LD	A,(DE)
  1C5E*   4F             C      	LD	C,A
  1C5F*   CD 4053*       C      	CALL	LR.LRLBS
  1C62*   B7             C      	OR	A
  1C63*   ED 52          C      	SBC	HL,DE
  1C65*   19             C      	ADD	HL,DE
  1C66*   13             C      	INC	DE
  1C67*   20 F4          C      	JR	NZ,E4.LSQ1
  1C69*   DD E1          C      	POP	IX
  1C6B*   C9             C      	RET
                         C      
'EDITOR --- Peripheriegeraete'	MACRO-80 3.44	09-Dec-81	PAGE	1-57


                         C      
  1C6C*                  C      E4.LEER:
  1C6C*   DD E5          C      	PUSH	IX
  1C6E*   DD 21 0F80*    C      	LD	IX,SM.EALBS
  1C72*   DD 7E 04       C      	LD	A,(IX+4)
  1C75*   F5             C      	PUSH	AF
  1C76*   DD 36 04 02    C      	LD	(IX+4),00000010B
  1C7A*   C5             C      	PUSH	BC
  1C7B*   01 8000        C      	LD	BC,08000H	;Ausgabe von 80H mal Zeichen "00H"
  1C7E*   CD 4053*       C      	CALL	LR.LRLBS
  1C81*   10 FB          C      	DJNZ	$-3
  1C83*                  C      E4.LEER1:
  1C83*   C1             C      	POP	BC
  1C84*   F1             C      	POP	AF
  1C85*   DD 77 04       C      	LD	(IX+4),A
  1C88*   DD E1          C      	POP	IX
  1C8A*   C9             C      	RET
                         C      
  1C8B*                  C      E4.STEND:
  1C8B*   DD E5          C      	PUSH	IX	;Ausgabe des LB-Endezeichens  EOF
  1C8D*   DD 21 0F80*    C      	LD	IX,SM.EALBS
  1C91*   DD 7E 04       C      	LD	A,(IX+4)
  1C94*   F5             C      	PUSH	AF
  1C95*   DD 36 04 02    C      	LD	(IX+4),00000010B
  1C99*   C5             C      	PUSH	BC
  1C9A*   DD 4E 0C       C      	LD	C,(IX+12)
  1C9D*   CD 4053*       C      	CALL	LR.LRLBS
  1CA0*   18 E1          C      	JR	E4.LEER1
                         C      
                         C      	PAGE
'EDITOR --- Peripheriegeraete'	MACRO-80 3.44	09-Dec-81	PAGE	1-58


                         C      
                         C      ;****************************************************************
                         C      ;*                  Eintragungen in die E/A-Tabellen            *
                         C      ;****************************************************************
  1CA2*   1CA2*          C      	DW	$
  1CA4*   49 53 4F 20    C      	DB	'ISO '
  1CA8*   FD 21 0FA0*    C      	LD	IY,SM.EALBL	;E/A-Tabelle   L B L
  1CAC*   21 0000        C      	LD	HL,0
  1CAF*   D9             C      	EXX
  1CB0*   06 E6          C      	LD	B,11100110B	;Kommando
  1CB2*   0E 7F          C      	LD	C,07FH	;Parity
  1CB4*   11 1E1E        C      	LD	DE,01E1EH	;EOR - Zeichen
  1CB7*   3E 19          C      	LD	A,019H	;EOF - Zeichen
  1CB9*   21 0000        C      	LD	HL,0
  1CBC*   CD 1CF9*       C      	CALL	E4.TAB
  1CBF*   D9             C      	EXX
  1CC0*   FD 21 0F80*    C      	LD	IY,SM.EALBS	;E/A-Tabelle   L B S
  1CC4*   06 C4          C      	LD	B,11000100B	;Kommando
  1CC6*   0E 80          C      	LD	C,080H	;Parity
  1CC8*                  C      E4.ISO:
  1CC8*   CD 1CF9*       C      	CALL	E4.TAB
  1CCB*   C3 000B*       C      	JP	SY.SYSTB
                         C      
                         C      
  1CCE*   1CCE*          C      	DW	$
  1CD0*   41 4E 57 20    C      	DB	'ANW '
  1CD4*   FD 21 0FA0*    C      	LD	IY,SM.EALBL	;E/A-Tabelle   L B L
  1CD8*   21 447A*       C      	LD	HL,LR.KONV
  1CDB*   D9             C      	EXX
  1CDC*   06 AE          C      	LD	B,10101110B	;Kommando
  1CDE*   0E EF          C      	LD	C,0EFH	;Parity
  1CE0*   11 801E        C      	LD	DE,0801EH	;EOR - Zeichen
  1CE3*   3E 81          C      	LD	A,081H	;EOF - Zeichen
  1CE5*   21 459A*       C      	LD	HL,LR.SKTBI
  1CE8*   CD 1CF9*       C      	CALL	E4.TAB
  1CEB*   D9             C      	EXX
  1CEC*   FD 21 0F80*    C      	LD	IY,SM.EALBS	;E/A-Tabelle   L B S
  1CF0*   06 AC          C      	LD	B,10101100B	;Kommando
  1CF2*   0E 10          C      	LD	C,010H	;Parity
  1CF4*   21 469A*       C      	LD	HL,LR.SKTBO
  1CF7*   18 CF          C      	JR	E4.ISO
                         C      
  1CF9*                  C      E4.TAB:
  1CF9*   FD 72 00       C      	LD	(IY+0),D
  1CFC*   FD 73 01       C      	LD	(IY+1),E
  1CFF*   FD 70 04       C      	LD	(IY+4),B
  1D02*   FD 71 0B       C      	LD	(IY+11),C
  1D05*   FD 77 0C       C      	LD	(IY+12),A
  1D08*   FD 75 05       C      	LD	(IY+5),L
  1D0B*   FD 74 06       C      	LD	(IY+6),H
  1D0E*   D9             C      	EXX
  1D0F*   FD 75 13       C      	LD	(IY+19),L
  1D12*   FD 74 14       C      	LD	(IY+20),H
  1D15*   C9             C      	RET
                         C      
                         C      	PAGE
'EDITOR --- Peripheriegeraete'	MACRO-80 3.44	09-Dec-81	PAGE	1-59


                         C      
                         C      ;****************************************************************
                         C      ;*                  Kommandos:  V O R _ , E O F _ , M B _ _     *
                         C      ;****************************************************************
  1D16*   1D16*          C      	DW	$
  1D18*   56 4F 52 20    C      	DB	'VOR '
  1D1C*   CD 1C6C*       C      	CALL	E4.LEER
  1D1F*   C3 000B*       C      	JP	SY.SYSTB
                         C      
                         C      
  1D22*   1D22*          C      	DW	$
  1D24*   45 4F 46 20    C      	DB	'EOF '
  1D28*   CD 1C8B*       C      	CALL	E4.STEND
  1D2B*   CD 1C6C*       C      	CALL	E4.LEER
  1D2E*   C3 000B*       C      	JP	SY.SYSTB
                         C      
                         C      
  1D31*   1D31*          C      	DW	$
  1D33*   4D 42 20 20    C      	DB	'MB  '
  1D37*                  C      E4.MBIF:
  1D37*   C5             C      	PUSH	BC
  1D38*   DD E5          C      	PUSH	IX
  1D3A*   D3 4F          C      	OUT	(SD.AMB),A	;Aktivierung der  A M B
  1D3C*   01 00FF        C      	LD	BC,255
  1D3F*                  C      E4.MBIF1:
  1D3F*   0B             C      	DEC	BC	;Warteschleife ca. 1.27 ms
  1D40*   78             C      	LD	A,B
  1D41*   B1             C      	OR	C
  1D42*   20 FB          C      	JR	NZ,E4.MBIF1
  1D44*   DD 21 0FE0     C      	LD	IX,SM.EAAMB
  1D48*                  C      E4.MBIF2:
  1D48*   DD CB 00 46    C      	BIT	0,(IX+0)	;MB-Geraet 1 bzw. 2 ?
  1D4C*   20 06          C      	JR	NZ,E4.MBIF3
  1D4E*   DD CB 07 4E    C      	BIT	1,(IX+7)	;MB-Geraet 1  besetzt ?
  1D52*   18 04          C      	JR	E4.MBIF4
  1D54*                  C      E4.MBIF3:
  1D54*   DD CB 08 4E    C      	BIT	1,(IX+8)	;MB-Geraet 2  besetzt ?
  1D58*                  C      E4.MBIF4:
  1D58*   20 EE          C      	JR	NZ,E4.MBIF2
  1D5A*   DD E1          C      	POP	IX
  1D5C*   C1             C      	POP	BC
  1D5D*   C9             C      	RET
                         C      
                         C      			;Stand: 04.Februar 85 - K EAW/wfvm..MSH
                         C      
                         C      ;	END
                                
                         C      	INCLUDE ME01.MAC	; M E M O
                         C      	TITLE	'M E M O'
                         C      	PAGE
'M E M O'	MACRO-80 3.44	09-Dec-81	PAGE	1-60


                         C      
                         C      ;	PN	ME02
                         C      ;	ORG	2000H
                         C      ;**********************************************************
                         C      ;        Darstellung (BZMAX) * 16 Byte Hexa und ASCII
                         C      ;**********************************************************
                         C      ;
  1D5E*                  C      ME.AZBLD:
  1D5E*   E5             C      	PUSH	HL
  1D5F*   D5             C      	PUSH	DE
  1D60*   C5             C      	PUSH	BC
  1D61*   2A 2BE0*       C      	LD	HL,(ME.AADR)	;HL:= Bereichsanfang
  1D64*   11 3000        C      	LD	DE,SD.BWSA	;DE:= Bildwiederholsp.
  1D67*   3A 2BEB*       C      	LD	A,(ME.BZMAX)
  1D6A*   B7             C      	OR	A
  1D6B*   28 0A          C      	JR	Z,ME.AZBL2	;0 Zeilen
  1D6D*   FE 17          C      	CP	23
  1D6F*   30 06          C      	JR	NC,ME.AZBL2	;mehr als 24 Zeilen
  1D71*   47             C      	LD	B,A	;B:=Zeilenzahl
  1D72*                  C      ME.AZBL1:
  1D72*   CD 1D7B*       C      	CALL	ME.ANZ1Z
  1D75*   10 FB          C      	DJNZ	ME.AZBL1
  1D77*                  C      ME.AZBL2:
  1D77*   C1             C      	POP	BC
  1D78*   D1             C      	POP	DE
  1D79*   E1             C      	POP	HL
  1D7A*   C9             C      	RET
                         C      ;
  1D7B*                  C      ME.ANZ1Z:
  1D7B*   CD 233B*       C      	CALL	ME.CVAX
  1D7E*   C5             C      	PUSH	BC
  1D7F*   13             C      	INC	DE
  1D80*   13             C      	INC	DE
  1D81*   E5             C      	PUSH	HL
  1D82*   06 04          C      	LD	B,4
  1D84*                  C      ME.ANZ11:
  1D84*   CD 1D9C*       C      	CALL	ME.AZ4BY	;Hexa-Darstellung
  1D87*   10 FB          C      	DJNZ	ME.ANZ11
  1D89*   13             C      	INC	DE
  1D8A*   E1             C      	POP	HL
  1D8B*   06 10          C      	LD	B,16
  1D8D*                  C      ME.ANZ12:
  1D8D*   7E             C      	LD	A,(HL)	;ASCII-Darstellung
  1D8E*   CD 1DAA*       C      	CALL	ME.ANZ1B
  1D91*   23             C      	INC	HL
  1D92*   13             C      	INC	DE
  1D93*   10 F8          C      	DJNZ	ME.ANZ12
  1D95*   06 05          C      	LD	B,5
  1D97*                  C      ME.ANZ13:
  1D97*   13             C      	INC	DE
  1D98*   10 FD          C      	DJNZ	ME.ANZ13
  1D9A*   C1             C      	POP	BC
  1D9B*   C9             C      	RET
                         C      ;
  1D9C*                  C      ME.AZ4BY:
  1D9C*   C5             C      	PUSH	BC	;Anzeige Vierergruppe
  1D9D*   06 04          C      	LD	B,4
  1D9F*                  C      ME.AZ4B1:
  1D9F*   7E             C      	LD	A,(HL)
  1DA0*   CD 56A5        C      	CALL	UC.CVBX+2
  1DA3*   13             C      	INC	DE
  1DA4*   23             C      	INC	HL
  1DA5*   10 F8          C      	DJNZ	ME.AZ4B1
  1DA7*   13             C      	INC	DE
  1DA8*   C1             C      	POP	BC
  1DA9*   C9             C      	RET
                         C      ;
  1DAA*                  C      ME.ANZ1B:
  1DAA*   CD 1DAF*       C      	CALL	ME.TASCI	;Anzeige 1 Byte ASCII
  1DAD*   12             C      	LD	(DE),A
  1DAE*   C9             C      	RET
                         C      ;
  1DAF*                  C      ME.TASCI:
  1DAF*   C9             C      	RET	;aktualisiert fuer Emulator
  1DB0*   FE 20          C      	CP	' '
  1DB2*   38 03          C      	JR	C,ME.TASC1
  1DB4*   FE 80          C      	CP	80H
  1DB6*   D8             C      	RET	C
  1DB7*                  C      ME.TASC1:
  1DB7*   3E 7F          C      	LD	A,7FH
  1DB9*   C9             C      	RET
                         C      ;
'M E M O'	MACRO-80 3.44	09-Dec-81	PAGE	1-61


                         C      ;********************************************************
                         C      ;        Ausfuehrungsroutinen fuer die einzelnen
                         C      ;        Tastencodes
                         C      ;--------------------------------------------------------
                         C      ; CDH    SYS-Taste  (Systemruecksprung)
                         C      ;--------------------------------------------------------
                         C      ;
  1DBA*                  C      ME.SYS:
  1DBA*   21 226C*       C      	LD	HL,ME.SYSM
  1DBD*   E3             C      	EX	(SP),HL
  1DBE*   C9             C      	RET
                         C      ;
                         C      ;--------------------------------------------------------
                         C      ; F8H   Home (Kursor nach oben links)
                         C      ;--------------------------------------------------------
                         C      ;
  1DBF*                  C      ME.HOME:
  1DBF*   CD 1DFD*       C      	CALL	ME.BSADL
  1DC2*   2A 2BE0*       C      	LD	HL,(ME.AADR)
  1DC5*   22 2BE2*       C      	LD	(ME.AKTAD),HL	;aktuelle Adresse
  1DC8*   3A 2BE4*       C      	LD	A,(ME.MOD)
  1DCB*   B7             C      	OR	A
  1DCC*   20 0D          C      	JR	NZ,ME.AHOME	;---> ASCII-Mode
  1DCE*   3E 06          C      	LD	A,6
  1DD0*                  C      ME.HOME1:
  1DD0*   32 2BE6*       C      	LD	(ME.BPZEI),A	;Position/Zeile
  1DD3*   AF             C      	XOR	A
  1DD4*   32 2BE5*       C      	LD	(ME.BZEIN),A
  1DD7*   CD 1E01*       C      	CALL	ME.BSADS
  1DDA*   C9             C      	RET
  1DDB*                  C      ME.AHOME:
  1DDB*   3E 3B          C      	LD	A,59
  1DDD*   18 F1          C      	JR	ME.HOME1
                         C      ;
                         C      ;BWS-Adresse aus (BZEIN) und (BPZEI) berechnen
                         C      ;OUT   HL=aktuelle BWS-Adresse
                         C      ;
  1DDF*                  C      ME.BSADR:
  1DDF*   F5             C      	PUSH	AF
  1DE0*   C5             C      	PUSH	BC
  1DE1*   D5             C      	PUSH	DE
  1DE2*   3A 2BE5*       C      	LD	A,(ME.BZEIN)	;Zeilennummer
  1DE5*   21 3000        C      	LD	HL,SD.BWSA
  1DE8*   B7             C      	OR	A
  1DE9*   28 07          C      	JR	Z,ME.BSAD2
  1DEB*   47             C      	LD	B,A
  1DEC*   11 0050        C      	LD	DE,80
  1DEF*                  C      ME.BSAD1:
  1DEF*   19             C      	ADD	HL,DE
  1DF0*   10 FD          C      	DJNZ	ME.BSAD1
  1DF2*                  C      ME.BSAD2:
  1DF2*   3A 2BE6*       C      	LD	A,(ME.BPZEI)	;Position
  1DF5*   5F             C      	LD	E,A
  1DF6*   16 00          C      	LD	D,0
  1DF8*   19             C      	ADD	HL,DE
  1DF9*   D1             C      	POP	DE
  1DFA*   C1             C      	POP	BC
  1DFB*   F1             C      	POP	AF
  1DFC*   C9             C      	RET
                         C      ;
  1DFD*                  C      ME.BSADL:
                         C      ;	CALL	ME.BSADR
                         C      ;	RES	7,(HL)
  1DFD*   CD 0211*       C      	CALL	SY.RESC
  1E00*   C9             C      	RET
  1E01*                  C      ME.BSADS:
  1E01*   CD 1DDF*       C      	CALL	ME.BSADR
                         C      	; SET	7,(HL)
  1E04*   CD 01FA*       C      	CALL	SY.SETCHL
                         C      	; PUSH	AF
                         C      	; LD	A,(ME.BPZEI)	;Position
                         C      	; LD	(SM.SPOS),A
                         C      	; LD	A,(ME.BZEIN)	;Zeilennummer
                         C      	; LD	(SM.ZPOS),A
                         C      	; CALL	SY.SETC
                         C      	; POP	AF
  1E07*   C9             C      	RET
                         C      ;
                         C      ;----------------------------------------------------------
                         C      ; FAH    New Line (Anfang naechste Zeile)
                         C      ;----------------------------------------------------------
                         C      ;
  1E08*                  C      ME.NEWL:
'M E M O'	MACRO-80 3.44	09-Dec-81	PAGE	1-62


  1E08*   3A 2BE5*       C      	LD	A,(ME.BZEIN)
  1E0B*   3C             C      	INC	A
  1E0C*   CD 1E2E*       C      	CALL	ME.TSZMX
  1E0F*   30 AE          C      	JR	NC,ME.HOME	;---> Max. Zeilennummer
  1E11*   CD 1DFD*       C      	CALL	ME.BSADL
  1E14*   21 2BE5*       C      	LD	HL,ME.BZEIN
  1E17*   34             C      	INC	(HL)
  1E18*   3A 2BE4*       C      	LD	A,(ME.MOD)
  1E1B*   B7             C      	OR	A
  1E1C*   20 0C          C      	JR	NZ,ME.ANEWL
  1E1E*   3E 06          C      	LD	A,6
  1E20*                  C      ME.NEWL1:
  1E20*   32 2BE6*       C      	LD	(ME.BPZEI),A
  1E23*   CD 1E01*       C      	CALL	ME.BSADS
  1E26*   CD 1E35*       C      	CALL	ME.CAKAL	;Korrektur akt. Adresse
  1E29*   C9             C      	RET
  1E2A*                  C      ME.ANEWL:
  1E2A*   3E 3B          C      	LD	A,59
  1E2C*   18 F2          C      	JR	ME.NEWL1
                         C      ;
  1E2E*                  C      ME.TSZMX:
  1E2E*   E5             C      	PUSH	HL	;Test auf max. Zeilennummer
  1E2F*   21 2BEB*       C      	LD	HL,ME.BZMAX
  1E32*   BE             C      	CP	(HL)
  1E33*   E1             C      	POP	HL
  1E34*   C9             C      	RET
                         C      ;
  1E35*                  C      ME.CAKAL:
  1E35*   2A 2BE0*       C      	LD	HL,(ME.AADR)
  1E38*   C5             C      	PUSH	BC
  1E39*   3A 2BE5*       C      	LD	A,(ME.BZEIN)
  1E3C*   B7             C      	OR	A
  1E3D*   28 0A          C      	JR	Z,ME.CAKA1
  1E3F*   47             C      	LD	B,A
  1E40*                  C      ME.CAKA2:
  1E40*   11 0010        C      	LD	DE,10H
  1E43*   19             C      	ADD	HL,DE
  1E44*   10 FA          C      	DJNZ	ME.CAKA2
  1E46*   22 2BE2*       C      	LD	(ME.AKTAD),HL
  1E49*                  C      ME.CAKA1:
  1E49*   C1             C      	POP	BC
  1E4A*   C9             C      	RET
                         C      ;
                         C      ;---------------------------------------------------------------
                         C      ; FBH    Kursor nach unten
                         C      ;---------------------------------------------------------------
                         C      ;
  1E4B*                  C      ME.CRUNT:
  1E4B*   3A 2BE5*       C      	LD	A,(ME.BZEIN)
  1E4E*   3C             C      	INC	A
  1E4F*   CD 1E2E*       C      	CALL	ME.TSZMX
  1E52*   30 15          C      	JR	NC,ME.CRBLD	;max. Zeilenanzahl
  1E54*   CD 1DFD*       C      	CALL	ME.BSADL
  1E57*   21 2BE5*       C      	LD	HL,ME.BZEIN
  1E5A*   34             C      	INC	(HL)
  1E5B*                  C      ME.CRUN1:
  1E5B*   CD 1E01*       C      	CALL	ME.BSADS
  1E5E*   2A 2BE2*       C      	LD	HL,(ME.AKTAD)
  1E61*   11 0010        C      	LD	DE,10H
  1E64*   19             C      	ADD	HL,DE
  1E65*   22 2BE2*       C      	LD	(ME.AKTAD),HL
  1E68*   C9             C      	RET
  1E69*                  C      ME.CRBLD:
  1E69*   2A 2BE0*       C      	LD	HL,(ME.AADR)
  1E6C*   11 0010        C      	LD	DE,10H
  1E6F*   19             C      	ADD	HL,DE
  1E70*   22 2BE0*       C      	LD	(ME.AADR),HL
  1E73*   CD 1D5E*       C      	CALL	ME.AZBLD
  1E76*   18 E3          C      	JR	ME.CRUN1
                         C      ;
                         C      ;----------------------------------------------------------
                         C      ; F5H    Kursor nach oben
                         C      ;----------------------------------------------------------
                         C      ;
  1E78*                  C      ME.CHOCH:
  1E78*   3A 2BE5*       C      	LD	A,(ME.BZEIN)
  1E7B*   B7             C      	OR	A
  1E7C*   28 17          C      	JR	Z,ME.CHBLD	;1. Zeile
  1E7E*   CD 1DFD*       C      	CALL	ME.BSADL
  1E81*   21 2BE5*       C      	LD	HL,ME.BZEIN
  1E84*   35             C      	DEC	(HL)
  1E85*                  C      ME.CHOC1:
  1E85*   CD 1E01*       C      	CALL	ME.BSADS
'M E M O'	MACRO-80 3.44	09-Dec-81	PAGE	1-63


  1E88*   2A 2BE2*       C      	LD	HL,(ME.AKTAD)
  1E8B*   11 0010        C      	LD	DE,10H
  1E8E*   B7             C      	OR	A
  1E8F*   ED 52          C      	SBC	HL,DE
  1E91*   22 2BE2*       C      	LD	(ME.AKTAD),HL
  1E94*   C9             C      	RET
  1E95*                  C      ME.CHBLD:
  1E95*   2A 2BE0*       C      	LD	HL,(ME.AADR)
  1E98*   11 0010        C      	LD	DE,10H
  1E9B*   B7             C      	OR	A
  1E9C*   ED 52          C      	SBC	HL,DE
  1E9E*   22 2BE0*       C      	LD	(ME.AADR),HL
  1EA1*   CD 1D5E*       C      	CALL	ME.AZBLD
  1EA4*   18 DF          C      	JR	ME.CHOC1
                         C      ;
                         C      ;-----------------------------------------------------------
                         C      ; F0H    INS MODE (Umschaltung ASCII <---> HEXA)
                         C      ;-----------------------------------------------------------
                         C      ;
  1EA6*                  C      ME.UMOD:
  1EA6*   CD 1DFD*       C      	CALL	ME.BSADL
  1EA9*   3A 2BE4*       C      	LD	A,(ME.MOD)
  1EAC*   B7             C      	OR	A
  1EAD*   28 22          C      	JR	Z,ME.ASCMD
  1EAF*   CD 1EBA*       C      	CALL	ME.REFAH
  1EB2*   CD 1E01*       C      	CALL	ME.BSADS
  1EB5*   AF             C      	XOR	A
  1EB6*   32 2BE4*       C      	LD	(ME.MOD),A
  1EB9*   C9             C      	RET
                         C      ;
  1EBA*                  C      ME.REFAH:
  1EBA*   3A 2BE6*       C      	LD	A,(ME.BPZEI)
  1EBD*   21 21B3*       C      	LD	HL,ME.REFTB+10H
  1EC0*                  C      ME.HEMD2:
  1EC0*   BE             C      	CP	(HL)
  1EC1*   28 03          C      	JR	Z,ME.HEMD1
  1EC3*   23             C      	INC	HL
  1EC4*   18 FA          C      	JR	ME.HEMD2
  1EC6*                  C      ME.HEMD1:
  1EC6*   11 0010        C      	LD	DE,10H
  1EC9*   B7             C      	OR	A
  1ECA*   ED 52          C      	SBC	HL,DE
  1ECC*   7E             C      	LD	A,(HL)
  1ECD*   32 2BE6*       C      	LD	(ME.BPZEI),A
  1ED0*   C9             C      	RET
                         C      ;
  1ED1*                  C      ME.ASCMD:
  1ED1*   CD 1EE0*       C      	CALL	ME.CBPZ
  1ED4*   CD 1EEA*       C      	CALL	ME.REFHA
  1ED7*   CD 1E01*       C      	CALL	ME.BSADS
  1EDA*   3E 01          C      	LD	A,1
  1EDC*   32 2BE4*       C      	LD	(ME.MOD),A
  1EDF*   C9             C      	RET
                         C      ;
  1EE0*                  C      ME.CBPZ:
  1EE0*   23             C      	INC	HL
  1EE1*   7E             C      	LD	A,(HL)
  1EE2*   FE 20          C      	CP	' '
  1EE4*   C0             C      	RET	NZ
  1EE5*   21 2BE6*       C      	LD	HL,ME.BPZEI
  1EE8*   35             C      	DEC	(HL)
  1EE9*   C9             C      	RET
                         C      ;
  1EEA*                  C      ME.REFHA:
  1EEA*   3A 2BE6*       C      	LD	A,(ME.BPZEI)
  1EED*   21 21A3*       C      	LD	HL,ME.REFTB
  1EF0*                  C      ME.ASMD2:
  1EF0*   BE             C      	CP	(HL)
  1EF1*   28 03          C      	JR	Z,ME.ASMD1
  1EF3*   23             C      	INC	HL
  1EF4*   18 FA          C      	JR	ME.ASMD2
  1EF6*                  C      ME.ASMD1:
  1EF6*   11 0010        C      	LD	DE,10H
  1EF9*   19             C      	ADD	HL,DE
  1EFA*   7E             C      	LD	A,(HL)
  1EFB*   32 2BE6*       C      	LD	(ME.BPZEI),A
  1EFE*   C9             C      	RET
                         C      ;
                         C      ;------------------------------------------------------------
                         C      ; B0H    POS. QUIT.  (Blaettern vorwaerts)
                         C      ;------------------------------------------------------------
                         C      ;
  1EFF*                  C      ME.BLVOR:
'M E M O'	MACRO-80 3.44	09-Dec-81	PAGE	1-64


  1EFF*   2A 2BE0*       C      	LD	HL,(ME.AADR)
  1F02*   3A 2BEB*       C      	LD	A,(ME.BZMAX)
  1F05*   47             C      	LD	B,A
  1F06*   11 0010        C      	LD	DE,10H
  1F09*                  C      ME.BLVO3:
  1F09*   19             C      	ADD	HL,DE
  1F0A*   10 FD          C      	DJNZ	ME.BLVO3
  1F0C*                  C      ME.BLVO2:
  1F0C*   22 2BE0*       C      	LD	(ME.AADR),HL
  1F0F*   22 2BE2*       C      	LD	(ME.AKTAD),HL
  1F12*   CD 1D5E*       C      	CALL	ME.AZBLD
  1F15*   AF             C      	XOR	A
  1F16*   32 2BE5*       C      	LD	(ME.BZEIN),A
  1F19*   3A 2BE4*       C      	LD	A,(ME.MOD)
  1F1C*   B7             C      	OR	A
  1F1D*   20 09          C      	JR	NZ,ME.ABLVO
  1F1F*   3E 06          C      	LD	A,6
  1F21*                  C      ME.BLVO1:
  1F21*   32 2BE6*       C      	LD	(ME.BPZEI),A
  1F24*   CD 1E01*       C      	CALL	ME.BSADS
  1F27*   C9             C      	RET
  1F28*                  C      ME.ABLVO:
  1F28*   3E 3B          C      	LD	A,59
  1F2A*   18 F5          C      	JR	ME.BLVO1
                         C      ;
                         C      ;----------------------------------------------------------
                         C      ; CCH    NEG. QUIT.  (Blaettern rueckwaerts)
                         C      ;----------------------------------------------------------
                         C      ;
  1F2C*                  C      ME.BLRUC:
  1F2C*   2A 2BE0*       C      	LD	HL,(ME.AADR)
  1F2F*   3A 2BEB*       C      	LD	A,(ME.BZMAX)
  1F32*   47             C      	LD	B,A
  1F33*   11 0010        C      	LD	DE,10H
  1F36*                  C      ME.BLRU1:
  1F36*   B7             C      	OR	A
  1F37*   ED 52          C      	SBC	HL,DE
  1F39*   10 FB          C      	DJNZ	ME.BLRU1
  1F3B*   18 CF          C      	JR	ME.BLVO2
                         C      ;
                         C      ;----------------------------------------------------------
                         C      ; F9H    Kursor nach rechts
                         C      ;----------------------------------------------------------
                         C      ;
  1F3D*                  C      ME.CRECH:
  1F3D*   3A 2BE4*       C      	LD	A,(ME.MOD)
  1F40*   B7             C      	OR	A
  1F41*   C2 1FA8*       C      	JP	NZ,ME.ACREC	;---> ASCII-Mode
  1F44*   3A 2BE6*       C      	LD	A,(ME.BPZEI)
  1F47*   FE 37          C      	CP	55
  1F49*   28 33          C      	JR	Z,ME.CRNZ	;---> naechste Zeile
  1F4B*   CD 1DFD*       C      	CALL	ME.BSADL
  1F4E*   23             C      	INC	HL
  1F4F*   7E             C      	LD	A,(HL)
  1F50*   FE 20          C      	CP	' '
  1F52*   28 08          C      	JR	Z,ME.CRAIC	;---> Adresse erhoehen
  1F54*   21 2BE6*       C      	LD	HL,ME.BPZEI
  1F57*   34             C      	INC	(HL)
  1F58*   CD 1E01*       C      	CALL	ME.BSADS
  1F5B*   C9             C      	RET
                         C      ;
  1F5C*                  C      ME.CRAIC:
  1F5C*   23             C      	INC	HL
  1F5D*   7E             C      	LD	A,(HL)
  1F5E*   FE 20          C      	CP	' '
  1F60*   28 0A          C      	JR	Z,ME.CREC2	;---> naechste Vierergruppe
                         C      	; SET	7,(HL)
  1F62*   CD 01FA*       C      	CALL	SY.SETCHL
  1F65*   21 2BE6*       C      	LD	HL,ME.BPZEI
  1F68*                  C      ME.CREC4:
  1F68*   34             C      	INC	(HL)
  1F69*   34             C      	INC	(HL)
  1F6A*   18 0A          C      	JR	ME.CREC3
  1F6C*                  C      ME.CREC2:
  1F6C*   23             C      	INC	HL
                         C      	; SET	7,(HL)
  1F6D*   CD 01FA*       C      	CALL	SY.SETCHL
  1F70*   21 2BE6*       C      	LD	HL,ME.BPZEI
  1F73*   34             C      	INC	(HL)
  1F74*   18 F2          C      	JR	ME.CREC4
  1F76*                  C      ME.CREC3:
  1F76*   2A 2BE2*       C      	LD	HL,(ME.AKTAD)	;aktuelle Adr. erhoehen
  1F79*   23             C      	INC	HL
'M E M O'	MACRO-80 3.44	09-Dec-81	PAGE	1-65


  1F7A*   22 2BE2*       C      	LD	(ME.AKTAD),HL
  1F7D*   C9             C      	RET
                         C      ;
  1F7E*                  C      ME.CRNZ:
  1F7E*   CD 1DFD*       C      	CALL	ME.BSADL
  1F81*   3E 06          C      	LD	A,6
  1F83*                  C      ME.CRNZ2:
  1F83*   32 2BE6*       C      	LD	(ME.BPZEI),A
  1F86*   3A 2BE5*       C      	LD	A,(ME.BZEIN)
  1F89*   3C             C      	INC	A
  1F8A*   CD 1E2E*       C      	CALL	ME.TSZMX
  1F8D*   30 0A          C      	JR	NC,ME.CRCBD	;---> letzte Zeile
  1F8F*   21 2BE5*       C      	LD	HL,ME.BZEIN
  1F92*   34             C      	INC	(HL)
  1F93*                  C      ME.CRNZ1:
  1F93*   CD 1E01*       C      	CALL	ME.BSADS
  1F96*   C3 1F76*       C      	JP	ME.CREC3
                         C      ;
  1F99*                  C      ME.CRCBD:
  1F99*   2A 2BE0*       C      	LD	HL,(ME.AADR)
  1F9C*   11 0010        C      	LD	DE,10H
  1F9F*   19             C      	ADD	HL,DE
  1FA0*   22 2BE0*       C      	LD	(ME.AADR),HL
  1FA3*   CD 1D5E*       C      	CALL	ME.AZBLD
  1FA6*   18 EB          C      	JR	ME.CRNZ1
                         C      ;
                         C      ;-------------------------------------------------------
                         C      ;
  1FA8*                  C      ME.ACREC:
  1FA8*   CD 1DFD*       C      	CALL	ME.BSADL
  1FAB*   3A 2BE6*       C      	LD	A,(ME.BPZEI)
  1FAE*   FE 4A          C      	CP	74
  1FB0*   28 0A          C      	JR	Z,ME.ACRNZ	;---> naechste Zeile
  1FB2*   3C             C      	INC	A
  1FB3*   32 2BE6*       C      	LD	(ME.BPZEI),A
  1FB6*   CD 1E01*       C      	CALL	ME.BSADS
  1FB9*   C3 1F76*       C      	JP	ME.CREC3
                         C      ;
  1FBC*                  C      ME.ACRNZ:
  1FBC*   3E 3B          C      	LD	A,59
  1FBE*   18 C3          C      	JR	ME.CRNZ2
                         C      ;
                         C      ;-------------------------------------------------------
                         C      ; F7H    Kursor nach links
                         C      ;-------------------------------------------------------
                         C      ;
  1FC0*                  C      ME.CLINK:
  1FC0*   3A 2BE4*       C      	LD	A,(ME.MOD)
  1FC3*   B7             C      	OR	A
  1FC4*   C2 202A*       C      	JP	NZ,ME.ACLNK	;---> ASCII-Mode
  1FC7*   3A 2BE6*       C      	LD	A,(ME.BPZEI)
  1FCA*   FE 06          C      	CP	6
  1FCC*   28 33          C      	JR	Z,ME.CLNZ	;---> 1 Zeile zurueck
  1FCE*   CD 1DFD*       C      	CALL	ME.BSADL
  1FD1*   2B             C      	DEC	HL
  1FD2*   7E             C      	LD	A,(HL)
  1FD3*   FE 20          C      	CP	' '
  1FD5*   28 08          C      	JR	Z,ME.CLDEC	;Adresse decrementieren
  1FD7*   21 2BE6*       C      	LD	HL,ME.BPZEI
  1FDA*   35             C      	DEC	(HL)
  1FDB*   CD 1E01*       C      	CALL	ME.BSADS
  1FDE*   C9             C      	RET
                         C      ;
  1FDF*                  C      ME.CLDEC:
  1FDF*   2B             C      	DEC	HL
  1FE0*   7E             C      	LD	A,(HL)
  1FE1*   FE 20          C      	CP	' '
  1FE3*   28 0A          C      	JR	Z,ME.CLDE2	;---> 1 Vierergruppe zurueck
                         C      	; SET	7,(HL)
  1FE5*   CD 01FA*       C      	CALL	SY.SETCHL
  1FE8*   21 2BE6*       C      	LD	HL,ME.BPZEI
  1FEB*                  C      ME.CLDE4:
  1FEB*   35             C      	DEC	(HL)
  1FEC*   35             C      	DEC	(HL)
  1FED*   18 0A          C      	JR	ME.CLDE3
  1FEF*                  C      ME.CLDE2:
  1FEF*   2B             C      	DEC	HL
                         C      	; SET	7,(HL)
  1FF0*   CD 01FA*       C      	CALL	SY.SETCHL
  1FF3*   21 2BE6*       C      	LD	HL,ME.BPZEI
  1FF6*   35             C      	DEC	(HL)
  1FF7*   18 F2          C      	JR	ME.CLDE4
  1FF9*                  C      ME.CLDE3:
'M E M O'	MACRO-80 3.44	09-Dec-81	PAGE	1-66


  1FF9*   2A 2BE2*       C      	LD	HL,(ME.AKTAD)
  1FFC*   2B             C      	DEC	HL
  1FFD*   22 2BE2*       C      	LD	(ME.AKTAD),HL
  2000*   C9             C      	RET
                         C      ;
  2001*                  C      ME.CLNZ:
  2001*   CD 1DFD*       C      	CALL	ME.BSADL
  2004*   3E 37          C      	LD	A,55
  2006*                  C      ME.CLNZ2:
  2006*   32 2BE6*       C      	LD	(ME.BPZEI),A
  2009*   3A 2BE5*       C      	LD	A,(ME.BZEIN)
  200C*   B7             C      	OR	A
  200D*   28 0A          C      	JR	Z,ME.CLCBD	;1.Zeile
  200F*   21 2BE5*       C      	LD	HL,ME.BZEIN
  2012*   35             C      	DEC	(HL)
  2013*                  C      ME.CLNZ1:
  2013*   CD 1E01*       C      	CALL	ME.BSADS
  2016*   C3 1FF9*       C      	JP	ME.CLDE3
                         C      ;
  2019*                  C      ME.CLCBD:
  2019*   2A 2BE0*       C      	LD	HL,(ME.AADR)
  201C*   11 0010        C      	LD	DE,10H
  201F*   B7             C      	OR	A
  2020*   ED 52          C      	SBC	HL,DE
  2022*   22 2BE0*       C      	LD	(ME.AADR),HL
  2025*   CD 1D5E*       C      	CALL	ME.AZBLD
  2028*   18 E9          C      	JR	ME.CLNZ1
                         C      ;
                         C      ;---------------------------------------------------------
                         C      ;
  202A*                  C      ME.ACLNK:
  202A*   CD 1DFD*       C      	CALL	ME.BSADL
  202D*   3A 2BE6*       C      	LD	A,(ME.BPZEI)
  2030*   FE 3B          C      	CP	59
  2032*   28 0A          C      	JR	Z,ME.ACLNZ
  2034*   3D             C      	DEC	A
  2035*   32 2BE6*       C      	LD	(ME.BPZEI),A
  2038*   CD 1E01*       C      	CALL	ME.BSADS
  203B*   C3 1FF9*       C      	JP	ME.CLDE3
  203E*                  C      ME.ACLNZ:
  203E*   3E 4A          C      	LD	A,74
  2040*   18 C4          C      	JR	ME.CLNZ2
                         C      ;
                         C      ;-------------------------------------------------------------
                         C      ; F6H   Schieben rechts  (Ablegen im Puffer)
                         C      ;-------------------------------------------------------------
                         C      ;
  2042*                  C      ME.INPUF:
  2042*   ED 5B 2BE7*    C      	LD	DE,(ME.PUZEI)
  2046*   21 0400        C      	LD	HL,400H
  2049*   B7             C      	OR	A
  204A*   ED 52          C      	SBC	HL,DE
  204C*   C8             C      	RET	Z		;Puffer voll
  204D*   CD 206A*       C      	CALL	ME.CCPO	;Korrektur Kursorpos.
  2050*   2A 2BE2*       C      	LD	HL,(ME.AKTAD)
  2053*   7E             C      	LD	A,(HL)
  2054*   21 2C00        C      	LD	HL,ME.PUFAN
  2057*   19             C      	ADD	HL,DE
  2058*   77             C      	LD	(HL),A
  2059*   13             C      	INC	DE
  205A*   ED 53 2BE7*    C      	LD	(ME.PUZEI),DE
  205E*   CD 1F3D*       C      	CALL	ME.CRECH
  2061*   3A 2BE4*       C      	LD	A,(ME.MOD)
  2064*   B7             C      	OR	A
  2065*   C0             C      	RET	NZ
  2066*   CD 1F3D*       C      	CALL	ME.CRECH
  2069*   C9             C      	RET
                         C      ;
  206A*                  C      ME.CCPO:
  206A*   3A 2BE4*       C      	LD	A,(ME.MOD)
  206D*   B7             C      	OR	A
  206E*   C0             C      	RET	NZ
  206F*   CD 1DDF*       C      	CALL	ME.BSADR
  2072*   23             C      	INC	HL
  2073*   7E             C      	LD	A,(HL)
  2074*   FE 20          C      	CP	' '
  2076*   C0             C      	RET	NZ
  2077*   2B             C      	DEC	HL
                         C      ;	RES	7,(HL)
  2078*   CD 1DFD*       C      	CALL	ME.BSADL
  207B*   21 2BE6*       C      	LD	HL,ME.BPZEI
  207E*   35             C      	DEC	(HL)
  207F*   C9             C      	RET
'M E M O'	MACRO-80 3.44	09-Dec-81	PAGE	1-67


                         C      ;
                         C      ;--------------------------------------------------------------
                         C      ; F4H   Schieben links (Auslagern Pufferinhalt)
                         C      ;--------------------------------------------------------------
                         C      ;
  2080*                  C      ME.AUPUF:
  2080*   ED 5B 2BE7*    C      	LD	DE,(ME.PUZEI)
  2084*   7A             C      	LD	A,D
  2085*   B3             C      	OR	E
  2086*   C8             C      	RET	Z
  2087*   CD 206A*       C      	CALL	ME.CCPO
  208A*   11 2C00        C      	LD	DE,ME.PUFAN
  208D*   1A             C      	LD	A,(DE)
  208E*   2A 2BE2*       C      	LD	HL,(ME.AKTAD)
  2091*   77             C      	LD	(HL),A
  2092*   BE             C      	CP	(HL)
  2093*   C0             C      	RET	NZ
  2094*   D5             C      	PUSH	DE
  2095*   E1             C      	POP	HL
  2096*   23             C      	INC	HL
  2097*   ED 4B 2BE7*    C      	LD	BC,(ME.PUZEI)
  209B*   C5             C      	PUSH	BC
  209C*   ED B0          C      	LDIR
  209E*   C1             C      	POP	BC
  209F*   0B             C      	DEC	BC
  20A0*   ED 43 2BE7*    C      	LD	(ME.PUZEI),BC
  20A4*   4F             C      	LD	C,A
  20A5*   3A 2BE4*       C      	LD	A,(ME.MOD)
  20A8*   B7             C      	OR	A
  20A9*   20 0E          C      	JR	NZ,ME.AUPU1
  20AB*   21 2BE6*       C      	LD	HL,ME.BPZEI
  20AE*   46             C      	LD	B,(HL)
  20AF*   CD 223F*       C      	CALL	ME.DSBAH
  20B2*   CD 1F3D*       C      	CALL	ME.CRECH
  20B5*   CD 1F3D*       C      	CALL	ME.CRECH
  20B8*   C9             C      	RET
  20B9*                  C      ME.AUPU1:
  20B9*   CD 1DDF*       C      	CALL	ME.BSADR
  20BC*   79             C      	LD	A,C
  20BD*   CD 1DAF*       C      	CALL	ME.TASCI
  20C0*   77             C      	LD	(HL),A
  20C1*   41             C      	LD	B,C
  20C2*   CD 21E2*       C      	CALL	ME.DSBH
  20C5*   CD 1F3D*       C      	CALL	ME.CRECH
  20C8*   C9             C      	RET
                         C      ;
                         C      ;--------------------------------------------------------------
                         C      ; F3H    DEL LINE (Zeile mit 00H fuellen)
                         C      ;--------------------------------------------------------------
                         C      ;
  20C9*                  C      ME.DELL:
  20C9*   3A 2BE4*       C      	LD	A,(ME.MOD)
  20CC*   B7             C      	OR	A
  20CD*   C0             C      	RET	NZ
  20CE*   CD 1DFD*       C      	CALL	ME.BSADL
  20D1*   3E 06          C      	LD	A,6
  20D3*   32 2BE6*       C      	LD	(ME.BPZEI),A
  20D6*   CD 1E01*       C      	CALL	ME.BSADS
  20D9*   CD 1E35*       C      	CALL	ME.CAKAL
  20DC*   22 2BE2*       C      	LD	(ME.AKTAD),HL
  20DF*   06 20          C      	LD	B,32
  20E1*                  C      ME.DELL1:
  20E1*   3E 30          C      	LD	A,'0'
  20E3*   C5             C      	PUSH	BC
  20E4*   CD 21F6*       C      	CALL	ME.HEXMO
  20E7*   C1             C      	POP	BC
  20E8*   10 F7          C      	DJNZ	ME.DELL1
  20EA*   C9             C      	RET
                         C      ;
                         C      ;--------------------------------------------------------------
                         C      ; F0H    DEL  (Bildneuaufbau) 
                         C      ;--------------------------------------------------------------
                         C      ;
  20EB*                  C      ME.TDEL:
  20EB*   2A 2BE0*       C      	LD	HL,(ME.AADR)
  20EE*   22 2BE2*       C      	LD	(ME.AKTAD),HL
  20F1*   22 2BEC*       C      	LD	(ME.AADR1),HL
  20F4*   22 2BEE*       C      	LD	(ME.AKTA1),HL
  20F7*   3E 06          C      	LD	A,6
  20F9*   32 2BE6*       C      	LD	(ME.BPZEI),A
  20FC*   32 2BF2*       C      	LD	(ME.BPZE1),A
  20FF*   AF             C      	XOR	A
  2100*   32 2BE4*       C      	LD	(ME.MOD),A
'M E M O'	MACRO-80 3.44	09-Dec-81	PAGE	1-68


  2103*   32 2BE5*       C      	LD	(ME.BZEIN),A
  2106*   32 2BF0*       C      	LD	(ME.MOD1),A
  2109*   32 2BF1*       C      	LD	(ME.BZEI1),A
  210C*   3E 10          C      	LD	A,16
  210E*   32 2BEB*       C      	LD	(ME.BZMAX),A
  2111*   21 0550        C      	LD	HL,550H
  2114*   22 2BE9*       C      	LD	(ME.VTAS),HL
  2117*   21 0000        C      	LD	HL,0
  211A*   22 2BE7*       C      	LD	(ME.PUZEI),HL
  211D*                  C      ME.INSLN:
  211D*   CD 67DF        C      	CALL	KH.BILO
  2120*   CD 1D5E*       C      	CALL	ME.AZBLD
  2123*   CD 1E01*       C      	CALL	ME.BSADS
  2126*   CD 2323*       C      	CALL	ME.DSPAD
  2129*   CD 2331*       C      	CALL	ME.DSPOI
  212C*   C9             C      	RET
                         C      ;
                         C      ;--------------------------------------------------------------
                         C      ; B1H    TABS  (aktuellen Zustand retten)
                         C      ;--------------------------------------------------------------
                         C      ;
  212D*                  C      ME.SAVE:
  212D*   21 2BE0*       C      	LD	HL,ME.AADR
  2130*   11 2BEC*       C      	LD	DE,ME.AADR1
  2133*                  C      ME.SAVE1:
  2133*   01 0007        C      	LD	BC,7
  2136*   ED B0          C      	LDIR
  2138*   C9             C      	RET
                         C      ;
                         C      ;-------------------------------------------------------------
                         C      ; B2H    TABL  (geretteten Zustand herstellen)
                         C      ;-------------------------------------------------------------
                         C      ;
  2139*                  C      ME.GET:
  2139*   21 2BEC*       C      	LD	HL,ME.AADR1
  213C*   11 2BE0*       C      	LD	DE,ME.AADR
  213F*   CD 2133*       C      	CALL	ME.SAVE1
  2142*   3A 2BEB*       C      	LD	A,(ME.BZMAX)
  2145*   47             C      	LD	B,A
  2146*   3A 2BE5*       C      	LD	A,(ME.BZEIN)
  2149*                  C      ME.GET2:
  2149*   B8             C      	CP	B
  214A*   38 10          C      	JR	C,ME.GET1
  214C*   2A 2BE0*       C      	LD	HL,(ME.AADR)
  214F*   11 0010        C      	LD	DE,10H
  2152*   19             C      	ADD	HL,DE
  2153*   22 2BE0*       C      	LD	(ME.AADR),HL
  2156*   3D             C      	DEC	A
  2157*   32 2BE5*       C      	LD	(ME.BZEIN),A
  215A*   18 ED          C      	JR	ME.GET2
  215C*                  C      ME.GET1:
  215C*   CD 211D*       C      	CALL	ME.INSLN
  215F*   C9             C      	RET
                         C      ;
                         C      ;-------------------------------------------------------------
                         C      ; 09H    ET2   (Start eines Programms ab Kursorposition)
                         C      ;-------------------------------------------------------------
                         C      ;
  2160*                  C      ME.START:
  2160*   2A 2BE2*       C      	LD	HL,(ME.AKTAD)
  2163*   01 2168*       C      	LD	BC,ME.STAR1
  2166*   C5             C      	PUSH	BC
  2167*   E9             C      	JP	(HL)
  2168*                  C      ME.STAR1:
  2168*   CD 211D*       C      	CALL	ME.INSLN
  216B*   C9             C      	RET
                         C      ;
                         C      ;--------------------------------------------------------------
                         C      ; B3H    (Zeilenanzahl erhoehen)
                         C      ;--------------------------------------------------------------
                         C      ;
  216C*                  C      ME.INCBZ:
  216C*   3A 2BEB*       C      	LD	A,(ME.BZMAX)
  216F*   FE 16          C      	CP	22
  2171*   D0             C      	RET	NC
  2172*   3C             C      	INC	A
  2173*   32 2BEB*       C      	LD	(ME.BZMAX),A
  2176*   CD 211D*       C      	CALL	ME.INSLN
  2179*   C9             C      	RET
                         C      ;
                         C      ;-------------------------------------------------------------
                         C      ; B4H    (Zeilenanzahl verringern)
                         C      ;-------------------------------------------------------------
'M E M O'	MACRO-80 3.44	09-Dec-81	PAGE	1-69


                         C      ;
  217A*                  C      ME.DECBZ:
  217A*   3A 2BEB*       C      	LD	A,(ME.BZMAX)
  217D*   FE 01          C      	CP	1
  217F*   C8             C      	RET	Z
  2180*   3D             C      	DEC	A
  2181*   32 2BEB*       C      	LD	(ME.BZMAX),A
  2184*   47             C      	LD	B,A
  2185*   3A 2BE5*       C      	LD	A,(ME.BZEIN)
  2188*   4F             C      	LD	C,A
  2189*   78             C      	LD	A,B
  218A*   3D             C      	DEC	A
  218B*   B9             C      	CP	C
  218C*   30 11          C      	JR	NC,ME.DECB1
  218E*   B7             C      	OR	A
  218F*   11 0010        C      	LD	DE,10H
  2192*   2A 2BE2*       C      	LD	HL,(ME.AKTAD)
  2195*   ED 52          C      	SBC	HL,DE
  2197*   22 2BE2*       C      	LD	(ME.AKTAD),HL
  219A*   79             C      	LD	A,C
  219B*   3D             C      	DEC	A
  219C*   32 2BE5*       C      	LD	(ME.BZEIN),A
  219F*   CD 211D*       C      ME.DECB1:	CALL	ME.INSLN
  21A2*   C9             C      	RET
                         C      ;
                         C      ;-------------------------------------------------------------
                         C      ;        Positionstabelle   HEXA ---- ASCII fuer Byte 00...0FH
                         C      ;-------------------------------------------------------------
                         C      ;
  21A3*                  C      ME.REFTB:
  21A3*   06             C      	DB	6	;00H   HEXA-Mode
  21A4*   09             C      	DB	9	;01H
  21A5*   0C             C      	DB	12
  21A6*   0F             C      	DB	15
  21A7*   13             C      	DB	19
  21A8*   16             C      	DB	22
  21A9*   19             C      	DB	25
  21AA*   1C             C      	DB	28
  21AB*   20             C      	DB	32
  21AC*   23             C      	DB	35
  21AD*   26             C      	DB	38
  21AE*   29             C      	DB	41
  21AF*   2D             C      	DB	45
  21B0*   30             C      	DB	48
  21B1*   33             C      	DB	51
  21B2*   36             C      	DB	54	;0FH
  21B3*   3B             C      	DB	59	;00H  ASCII-Mode
  21B4*   3C             C      	DB	60
  21B5*   3D             C      	DB	61
  21B6*   3E             C      	DB	62
  21B7*   3F             C      	DB	63
  21B8*   40             C      	DB	64
  21B9*   41             C      	DB	65
  21BA*   42             C      	DB	66
  21BB*   43             C      	DB	67
  21BC*   44             C      	DB	68
  21BD*   45             C      	DB	69
  21BE*   46             C      	DB	70
  21BF*   47             C      	DB	71
  21C0*   48             C      	DB	72
  21C1*   49             C      	DB	73
  21C2*   4A             C      	DB	74	;0FH
                         C      ;
                         C      ;-------------------------------------------------------------
                         C      ;        Auswertung alphanumerischer Tasten im ASCII-Mode
                         C      ;-------------------------------------------------------------
                         C      ;
  21C3*                  C      ME.ASCMO:
  21C3*   47             C      	LD	B,A	;Code retten
  21C4*   CD 1DDF*       C      	CALL	ME.BSADR
  21C7*   77             C      	LD	(HL),A	;Code anzeigen
  21C8*   2A 2BE2*       C      	LD	HL,(ME.AKTAD)
  21CB*   77             C      	LD	(HL),A	;Code abspeichern
  21CC*   7E             C      	LD	A,(HL)	;ruecklesen
  21CD*   B8             C      	CP	B
  21CE*   28 0B          C      	JR	Z,ME.ASCM1	;---> RAM-Bereich
  21D0*   CD 1DDF*       C      	CALL	ME.BSADR
  21D3*   CD 1DAF*       C      	CALL	ME.TASCI
  21D6*   77             C      	LD	(HL),A	;Speicherinhalt anzeigen
                         C      	; SET	7,(HL)	;Kursor setzen
  21D7*   CD 01FA*       C      	CALL	SY.SETCHL
  21DA*   C9             C      	RET
  21DB*                  C      ME.ASCM1:
'M E M O'	MACRO-80 3.44	09-Dec-81	PAGE	1-70


  21DB*   CD 21E2*       C      	CALL	ME.DSBH
  21DE*   CD 1F3D*       C      	CALL	ME.CRECH
  21E1*   C9             C      	RET
                         C      ;
  21E2*                  C      ME.DSBH:
  21E2*   3A 2BE6*       C      	LD	A,(ME.BPZEI)
  21E5*   F5             C      	PUSH	AF	;Position retten
  21E6*   CD 1EBA*       C      	CALL	ME.REFAH	;Position HEXA
  21E9*   CD 1DDF*       C      	CALL	ME.BSADR	;BWS-Adresse HEXA
  21EC*   F1             C      	POP	AF
  21ED*   32 2BE6*       C      	LD	(ME.BPZEI),A	;Position ASCII
  21F0*   EB             C      	EX	DE,HL
  21F1*   78             C      	LD	A,B
  21F2*   CD 56A5        C      	CALL	UC.CVBX+2	;Anzeige HEXA
  21F5*   C9             C      	RET
                         C      ;
                         C      ;-------------------------------------------------------------
                         C      ;        Auswertung Tasten 0...9,A...F im HEXA-Mode
                         C      ;-------------------------------------------------------------
                         C      ;
  21F6*                  C      ME.HEXMO:
  21F6*   47             C      	LD	B,A	;Code retten
  21F7*   CD 56C8        C      	CALL	UC.CVAXB	;ASCII-Hexa ---> Binaer < 16
  21FA*   4F             C      	LD	C,A
  21FB*   CD 1DDF*       C      	CALL	ME.BSADR
  21FE*   23             C      	INC	HL
  21FF*   7E             C      	LD	A,(HL)
  2200*   FE 20          C      	CP	' '
  2202*   28 1D          C      	JR	Z,ME.RHB	;---> rechtes Halbbyte
  2204*                  C      ME.LHB:
  2204*   2A 2BE2*       C      	LD	HL,(ME.AKTAD)	;linkes Halbbyte
  2207*   79             C      	LD	A,C
  2208*   87             C      	ADD	A,A	;*16
  2209*   87             C      	ADD	A,A
  220A*   87             C      	ADD	A,A
  220B*   87             C      	ADD	A,A
  220C*   4F             C      	LD	C,A
  220D*   7E             C      	LD	A,(HL)	;A:= Speicherinhalt
  220E*   E6 0F          C      	AND	0FH	;linkes Halbbyte ausblenden
  2210*   B1             C      	OR	C	;neuer Wert
  2211*                  C      ME.LHB1:
  2211*   57             C      	LD	D,A	;Wert retten
  2212*   77             C      	LD	(HL),A	;abspeichern
  2213*   4F             C      	LD	C,A
  2214*   7E             C      	LD	A,(HL)	;ruecklesen
  2215*   BA             C      	CP	D
  2216*   28 12          C      	JR	Z,ME.HEXM0	;---> RAM
  2218*   EB             C      	EX	DE,HL
  2219*   79             C      	LD	A,C
  221A*   CD 56A5        C      	CALL	UC.CVBX+2	;alten Wert anzeigen
  221D*   CD 1E01*       C      	CALL	ME.BSADS
  2220*   C9             C      	RET
                         C      ;
  2221*                  C      ME.RHB:
  2221*   2A 2BE2*       C      	LD	HL,(ME.AKTAD)	;rechtes Halbbyte
  2224*   7E             C      	LD	A,(HL)
  2225*   E6 F0          C      	AND	0F0H	;rechtes Halbbyte ausblenden
  2227*   B1             C      	OR	C
  2228*   18 E7          C      	JR	ME.LHB1
                         C      ;
  222A*                  C      ME.HEXM0:
  222A*   3A 2BE6*       C      	LD	A,(ME.BPZEI)
  222D*   47             C      	LD	B,A
  222E*   CD 1DDF*       C      	CALL	ME.BSADR
  2231*   23             C      	INC	HL
  2232*   7E             C      	LD	A,(HL)
  2233*   FE 20          C      	CP	' '
  2235*   CC 2257*       C      	CALL	Z,ME.RHB1
  2238*   CD 223F*       C      	CALL	ME.DSBAH
  223B*   CD 1F3D*       C      	CALL	ME.CRECH
  223E*   C9             C      	RET
                         C      ;
  223F*                  C      ME.DSBAH:
  223F*   CD 1DDF*       C      	CALL	ME.BSADR
  2242*   79             C      	LD	A,C
  2243*   EB             C      	EX	DE,HL
  2244*   CD 56A5        C      	CALL	UC.CVBX+2
  2247*                  C      ME.HEXM1:
  2247*   CD 1EEA*       C      	CALL	ME.REFHA
  224A*   CD 1DDF*       C      	CALL	ME.BSADR
  224D*   79             C      	LD	A,C
  224E*   CD 1DAF*       C      	CALL	ME.TASCI
  2251*   77             C      	LD	(HL),A	;Anzeige ASCII
'M E M O'	MACRO-80 3.44	09-Dec-81	PAGE	1-71


  2252*   21 2BE6*       C      	LD	HL,ME.BPZEI
  2255*   70             C      	LD	(HL),B
  2256*   C9             C      	RET
                         C      ;
  2257*                  C      ME.RHB1:
  2257*   21 2BE6*       C      	LD	HL,ME.BPZEI
  225A*   35             C      	DEC	(HL)
  225B*   C9             C      	RET
                         C      ;
                         C      ;***************************************************************
                         C      ;        Tastencodeauswertung
                         C      ;***************************************************************
                         C      ;
  225C*                  C      ME.ATACO:
  225C*   CD 236C*       C      	CALL	ME.TAREP
  225F*   F5             C      	PUSH	AF
  2260*   CD 226E*       C      	CALL	ME.TAUSF
  2263*   CD 2323*       C      	CALL	ME.DSPAD
  2266*   CD 2331*       C      	CALL	ME.DSPOI
  2269*   F1             C      	POP	AF
  226A*   18 F0          C      	JR	ME.ATACO
  226C*                  C      ME.SYSM:
  226C*   F1             C      	POP	AF
  226D*   C9             C      	RET
                         C      ;
  226E*                  C      ME.TAUSF:
  226E*   FE CD          C      	CP	0CDH
  2270*   CA 1DBA*       C      	JP	Z,ME.SYS
  2273*   FE CE          C      	CP	0CEH
  2275*   CA 2372*       C      	JP	Z,ME.HDCOP
  2278*   FE B0          C      	CP	0B0H
  227A*   CA 1EFF*       C      	JP	Z,ME.BLVOR
  227D*   FE B1          C      	CP	0B1H
  227F*   CA 212D*       C      	JP	Z,ME.SAVE
  2282*   FE B2          C      	CP	0B2H
  2284*   CA 2139*       C      	JP	Z,ME.GET
  2287*   FE B3          C      	CP	0B3H
  2289*   CA 216C*       C      	JP	Z,ME.INCBZ
  228C*   FE B4          C      	CP	0B4H
  228E*   CA 217A*       C      	JP	Z,ME.DECBZ
  2291*   FE 09          C      	CP	09H
  2293*   CA 2160*       C      	JP	Z,ME.START
  2296*   FE CC          C      	CP	0CCH
  2298*   CA 1F2C*       C      	JP	Z,ME.BLRUC
  229B*   FE F0          C      	CP	0F0H
  229D*   CA 1EA6*       C      	JP	Z,ME.UMOD
  22A0*   FE F8          C      	CP	0F8H
  22A2*   CA 1DBF*       C      	JP	Z,ME.HOME
  22A5*   FE FA          C      	CP	0FAH
  22A7*   CA 1E08*       C      	JP	Z,ME.NEWL
  22AA*   FE F7          C      	CP	0F7H
  22AC*   CA 1FC0*       C      	JP	Z,ME.CLINK
  22AF*   FE F9          C      	CP	0F9H
  22B1*   CA 1F3D*       C      	JP	Z,ME.CRECH
  22B4*   FE F2          C      	CP	0F2H
  22B6*   CA 211D*       C      	JP	Z,ME.INSLN
  22B9*   FE F3          C      	CP	0F3H
  22BB*   CA 20C9*       C      	JP	Z,ME.DELL
  22BE*   FE F5          C      	CP	0F5H
  22C0*   CA 1E78*       C      	JP	Z,ME.CHOCH
  22C3*   FE FB          C      	CP	0FBH
  22C5*   CA 1E4B*       C      	JP	Z,ME.CRUNT
  22C8*   FE F6          C      	CP	0F6H
  22CA*   CA 2042*       C      	JP	Z,ME.INPUF
  22CD*   FE F4          C      	CP	0F4H
  22CF*   CA 2080*       C      	JP	Z,ME.AUPUF
  22D2*   FE F1          C      	CP	0F1H
  22D4*   CA 20EB*       C      	JP	Z,ME.TDEL
  22D7*   F5             C      	PUSH	AF
  22D8*   3A 2BE4*       C      	LD	A,(ME.MOD)
  22DB*   B7             C      	OR	A
  22DC*   28 0A          C      	JR	Z,ME.NHEXA
  22DE*   F1             C      	POP	AF
  22DF*   FE 20          C      	CP	20H
  22E1*   D8             C      	RET	C
  22E2*   FE 80          C      	CP	80H
  22E4*   D0             C      	RET	NC
  22E5*   C3 21C3*       C      	JP	ME.ASCMO
  22E8*                  C      ME.NHEXA:
  22E8*   F1             C      	POP	AF
  22E9*   FE 30          C      	CP	'0'
  22EB*   D8             C      	RET	C
  22EC*   FE 3A          C      	CP	3AH
'M E M O'	MACRO-80 3.44	09-Dec-81	PAGE	1-72


  22EE*   DA 21F6*       C      	JP	C,ME.HEXMO
  22F1*   FE 47          C      	CP	'G'
  22F3*   D0             C      	RET	NC
  22F4*   FE 41          C      	CP	'A'
  22F6*   D8             C      	RET	C
  22F7*   C3 21F6*       C      	JP	ME.HEXMO
                         C      
                         C      ;      INITIALISIERUNG
                         C      
  22FA*   22FA*          C      	DW	$
  22FC*   4D 20 20 20    C      	DB	'M   '
  2300*   CD 211D*       C      	CALL	ME.INSLN
  2303*   CD 225C*       C      	CALL	ME.ATACO
  2306*   C3 000B*       C      	JP	SY.SYSTB
                         C      
  2309*   2309*          C      	DW	$
  230B*   4D 45 4D 4F    C      	DB	'MEMO'
  230F*   11 3327        C      	LD	DE,SD.BWSA + 10*80 +7	;327H
  2312*   CD 235B*       C      	CALL	ME.CVXA
  2315*   38 03          C      	JR	C,ME.AAALT
  2317*   22 2BE0*       C      	LD	(ME.AADR),HL
  231A*                  C      ME.AAALT:
  231A*   CD 20EB*       C      	CALL	ME.TDEL
  231D*   CD 225C*       C      	CALL	ME.ATACO
  2320*   C3 000B*       C      	JP	SY.SYSTB
                         C      
                         C      ;---------------------------
                         C      
  2323*                  C      ME.DSPAD:
  2323*   E5             C      	PUSH	HL
  2324*   D5             C      	PUSH	DE
  2325*   11 3730        C      	LD	DE,SD.BWSA + 23*80	;730H
  2328*   2A 2BE2*       C      	LD	HL,(ME.AKTAD)
  232B*                  C      ME.DSPA1:
  232B*   CD 233B*       C      	CALL	ME.CVAX
  232E*   D1             C      	POP	DE
  232F*   E1             C      	POP	HL
  2330*   C9             C      	RET
  2331*                  C      ME.DSPOI:
  2331*   E5             C      	PUSH	HL
  2332*   D5             C      	PUSH	DE
  2333*   11 373A        C      	LD	DE,SD.BWSA + 23*80 +10	;73AH
  2336*   2A 2BE7*       C      	LD	HL,(ME.PUZEI)
  2339*   18 F0          C      	JR	ME.DSPA1
                         C      
  233B*                  C      ME.CVAX:
  233B*   7C             C      	LD	A,H
  233C*   CD 56A5        C      	CALL	UC.CVBX+2
  233F*   7D             C      	LD	A,L
  2340*   CD 56A5        C      	CALL	UC.CVBX+2
  2343*   C9             C      	RET
                         C      
  2344*                  C      ME.CVXB:
  2344*   C5             C      	PUSH	BC
  2345*   CD 2366*       C      	CALL	ME.CVX1B
  2348*   38 0E          C      	JR	C,ME.CVX11
  234A*   87             C      	ADD	A,A
  234B*   87             C      	ADD	A,A
  234C*   87             C      	ADD	A,A
  234D*   87             C      	ADD	A,A
  234E*   4F             C      	LD	C,A
  234F*   CD 2366*       C      	CALL	ME.CVX1B
  2352*   38 04          C      	JR	C,ME.CVX11
  2354*   81             C      	ADD	A,C
  2355*   B7             C      	OR	A
  2356*   C1             C      	POP	BC
  2357*   C9             C      	RET
  2358*                  C      ME.CVX11:
  2358*   C1             C      	POP	BC
  2359*   37             C      	SCF
  235A*   C9             C      	RET
                         C      
  235B*                  C      ME.CVXA:
  235B*   CD 2344*       C      	CALL	ME.CVXB
  235E*   D8             C      	RET	C
  235F*   67             C      	LD	H,A
  2360*   CD 2344*       C      	CALL	ME.CVXB
  2363*   D8             C      	RET	C
  2364*   6F             C      	LD	L,A
  2365*   C9             C      	RET
                         C      
  2366*                  C      ME.CVX1B:
  2366*   1A             C      	LD	A,(DE)	; ASCII hexa (DE) --> A binaer,DE+1
'M E M O'	MACRO-80 3.44	09-Dec-81	PAGE	1-73


  2367*   CD 56C8        C      	CALL	UC.CVAXB
  236A*   13             C      	INC	DE
  236B*   C9             C      	RET
                         C      
  236C*                  C      ME.TAREP:
  236C*   CD 4026*       C      	CALL	TA.ABFR1
  236F*   28 FB          C      	JR	Z,ME.TAREP
  2371*   C9             C      	RET
                         C      
                         C      ;***************  HARDCOPY  *******************
                         C      
  2372*                  C      ME.HDCOP:
  2372*   CD 20EB*       C      	CALL	ME.TDEL
  2375*   3E 14          C      	LD	A,20
  2377*   32 2B00        C      	LD	(ME.ZN),A
  237A*   21 23DE*       C      	LD	HL,ME.ZKEIN
  237D*   CD 595C        C      	CALL	UR.MIMO
  2380*   D8             C      	RET	C
                         C      
  2381*   EB             C      	EX	DE,HL
  2382*   CD 235B*       C      	CALL	ME.CVXA
  2385*   D8             C      	RET	C
                         C      
  2386*   ED 5B 2BE0*    C      	LD	DE,(ME.AADR)
  238A*   AF             C      	XOR	A
  238B*   ED 52          C      	SBC	HL,DE
  238D*   D8             C      	RET	C
  238E*   C8             C      	RET	Z
                         C      
  238F*   11 0100        C      	LD	DE,100H
  2392*   AF             C      	XOR	A
  2393*   47             C      	LD	B,A
  2394*   4F             C      	LD	C,A
  2395*   E5             C      	PUSH	HL
                         C      
  2396*                  C      ME.HC01:
  2396*   ED 52          C      	SBC	HL,DE
  2398*   38 03          C      	JR	C,ME.HC02
  239A*   04             C      	INC	B
  239B*   18 F9          C      	JR	ME.HC01
                         C      
  239D*                  C      ME.HC02:
  239D*   E1             C      	POP	HL
  239E*   00             C      	NOP
  239F*   00             C      	NOP
  23A0*   00             C      	NOP
  23A1*   CB 3D          C      	SRL	L
  23A3*   CB 3D          C      	SRL	L
  23A5*   CB 3D          C      	SRL	L
  23A7*   CB 3D          C      	SRL	L
  23A9*   2C             C      	INC	L
  23AA*   4D             C      	LD	C,L
  23AB*                  C      ME.HC021:
  23AB*   B8             C      	CP	B
  23AC*   28 1A          C      	JR	Z,ME.HC04
                         C      
  23AE*                  C      ME.HC03:
  23AE*   C5             C      	PUSH	BC
  23AF*   06 10          C      	LD	B,16
  23B1*   CD 23CD*       C      	CALL	ME.HC
  23B4*   11 0100        C      	LD	DE,100H
  23B7*   2A 2BE0*       C      	LD	HL,(ME.AADR)
  23BA*   19             C      	ADD	HL,DE
  23BB*   22 2BE0*       C      	LD	(ME.AADR),HL
  23BE*   CD 20EB*       C      	CALL	ME.TDEL
  23C1*   C1             C      	POP	BC
  23C2*   10 EA          C      	DJNZ	ME.HC03
                         C      
  23C4*   AF             C      	XOR	A
  23C5*   B9             C      	CP	C
  23C6*   28 04          C      	JR	Z,ME.END
                         C      
  23C8*                  C      ME.HC04:
  23C8*   41             C      	LD	B,C
  23C9*   CD 23CD*       C      	CALL	ME.HC
                         C      
  23CC*                  C      ME.END:
  23CC*   C9             C      	RET
                         C      
  23CD*                  C      ME.HC:
  23CD*   21 3000        C      	LD	HL,SD.BWSA
  23D0*   0E 50          C      	LD	C,80
  23D2*   CD 04FD*       C      	CALL	S1.HCP
'M E M O'	MACRO-80 3.44	09-Dec-81	PAGE	1-74


  23D5*   3E 1E          C      	LD	A,1EH
  23D7*   CD 4881*       C      	CALL	P1.PRINT
  23DA*   CD 4881*       C      	CALL	P1.PRINT
  23DD*   C9             C      	RET
                         C      
  23DE*                  C      ME.ZKEIN:
  23DE*   04             C      	DB	4
  23DF*   16             C      	DB	22
  23E0*   08             C      	DB	8
  23E1*   44 72 75 63    C      	DB	'Drucken bis Adresse : '
  23E5*   6B 65 6E 20    C      
  23E9*   62 69 73 20    C      
  23ED*   41 64 72 65    C      
  23F1*   73 73 65 20    C      
  23F5*   3A 20          C      
                         C      
                         C      ;	END
                         C      ;	PN	ME01
  2B00                   C      ME.ZN     EQU   02B00H
                         C      	ORG	2BE0H
                         C      ;***********************************************************
                         C      ;      Arbeitszellen fuer MEMO
                         C      ;***********************************************************
                         C      
  2BE0*                  C      ME.AADR:    DEFS	2,0
  2BE2*                  C      ME.AKTAD:   DEFS	2,0
  2BE4*                  C      ME.MOD:     DEFS	1,0
  2BE5*                  C      ME.BZEIN:   DEFS	1,0
  2BE6*                  C      ME.BPZEI:   DEFS	1,0
  2BE7*                  C      ME.PUZEI:   DEFS	2,0
  2BE9*                  C      ME.VTAS:    DEFS	2,0
  2BEB*                  C      ME.BZMAX:   DEFS	1,0
                         C      
  2BEC*                  C      ME.AADR1:   DEFS	2,0
  2BEE*                  C      ME.AKTA1:   DEFS	2,0
  2BF0*                  C      ME.MOD1:    DEFS	1,0
  2BF1*                  C      ME.BZEI1:   DEFS	1,0
  2BF2*                  C      ME.BPZE1:   DEFS	1,0
                         C      
  2C00                   C      ME.PUFAN  EQU   02C00H
                         C      
                         C      ;	END
                                
                         C      	INCLUDE V101.MAC	; Verbindungsroutinen
                         C          TITLE   'DEG2000 V. 1.2    Einsprungadressen'
                         C          PAGE
'DEG2000 V. 1.2    Einsprungadressen'	MACRO-80 3.44	09-Dec-81	PAGE	1-75


                         C      
                         C      ;****************************************************************
                         C      ;*                  DEG2000 V. 1.2    Einsprungadressen         *
                         C      ;*  Version         --------------------------------------------*
                         C      ;*                  Programmierer: M. Herbote                   *
                         C      ;*  V 1 . 2         --------------------------------------------*
                         C      ;*                  Stand        : 03.Dezember 2022             *
                         C      ;****************************************************************
                         C      	ORG	04000H
                         C      ;****************************************************************
                         C      ;*                  physische Ansteuerung der Tastatur          *
                         C      ;****************************************************************
  4000*   C3 43DB*       C      TR.TINIT:  JP	TR.PIOP2    ;Initialisierung der Tastatur
  4003*   C3 4414*       C      TR.TA1:    JP	TR.TTA12    ;U_Int - Abfrage
  4006*   C3 441D*       C      TR.TA2:    JP	TR.TTA22    ;Tastencode-Eingabe
  4009*   C3 43F6*       C      TR.TA3:    JP	TR.TA32     ;Warten auf Tasten
  400C*   C3 4404*       C      TR.TFE:    JP	TR.TFE2     ;Warten auf Tastenende
  400F*   C3 4423*       C      TR.TIM:    JP	TR.TTIM2    ;Ansteuerung der INS_MOD - Diode
  4012*   C3 4443*       C      TR.TEM:    JP	TR.TTEM2    ;Ansteuerung der Ebenen  - Dioden
  4015*   C3 4449*       C      TR.TBEL:   JP	TR.TTBL2    ;Ansteuerung der Fehleranzeigen
  4018*   C3 446C*       C      TR.PSTAS:  JP	TR.PST      ;Merker PTAS/STAS
                         C      ;
                         C          ORG	04020H
  4020*   C3 4100*       C      TA.TAST1:  JP	TA.TAST     ;04020H
  4023*   C3 41CF*       C      TA.TFE1:   JP	TA.TFE      ;04023H
  4026*   C3 4398*       C      TA.ABFR1:  JP	TA.ABFR2    ;04026H
                         C      
                         C      	ORG	04030H
                         C      ;****************************************************************
                         C      ;*                  SET-/RESET- Cursor                          *
                         C      ;****************************************************************
  4030*   C3 01D7*       C      SY.SETCG:   JP   SY.SETC    ;04030H
  4033*   C3 01FA*       C      SY.SETCHLG: JP   SY.SETCHL  ;04033H
  4036*   C3 0211*       C      SY.RESCG:   JP   SY.RESC    ;04036H
                         C      
                         C      	ORG	04040H
                         C      ;****************************************************************
                         C      ;*                  Druckerroutinen                             *
                         C      ;****************************************************************
  4040*   C3 479A*       C      PR.PRINT:  JP   PR.PRINA    ;04040H
  4043*   C3 479A*       C      PR.DINIT:  JP   PR.PRINA    ;04043H
  4046*   C3 4882*       C      PR.MRES:   JP   P1.MRES     ;04046H
  4049*   C3 48F0*       C      PR.PRIO:   JP   P1.PRIO     ;04049H
                         C      
                         C      	ORG	04050H
                         C      ;****************************************************************
                         C      ;*                  Lochbandroutinen                            *
                         C      ;****************************************************************
  4050*   C3 4512*       C      LR.LRLBL:  JP   LR.LBL      ;04050H
  4053*   C3 44A1*       C      LR.LRLBS:  JP   LR.LBS      ;04053H
                         C      
                         C      	ORG	04060H
                         C      ;****************************************************************
                         C      ;*                  Kassettenroutinen                           *
                         C      ;****************************************************************
  4060*   C9             C      KMBROB:    RET              ;04060H
  4061*   00             C                 NOP
  4062*   00             C                 NOP
  4063*   C9             C      KMBRUC:    RET              ;04063H
  4064*   00             C                 NOP
  4065*   00             C                 NOP
  4066*   C9             C      KMBINI:    RET              ;04066H
  4067*   00             C                 NOP
  4068*   00             C                 NOP
                         C      
                         C      ;   END
                                
                         C      	INCLUDE TA01.MAC	; Tastatur
                         C      	TITLE	'DEG2000 V. 1.2    Tastaturmodul'
                         C      	PAGE
'DEG2000 V. 1.2    Tastaturmodul'	MACRO-80 3.44	09-Dec-81	PAGE	1-76


                         C      
                         C      ;	PN	TA01
                         C      ;****************************************************************
                         C      ;*                  DEG2000 V. 1.2    Tastaturmodul             *
                         C      ;*  Version         --------------------------------------------*
                         C      ;*                  Programmierer: M. Herbote  K EAW  ZFT (WFT) *
                         C      ;*  V 1 . 2         --------------------------------------------*
                         C      ;*                  Stand        : 06.Februar 1985              *
                         C      ;****************************************************************
                         C      	ORG	04100H	;06C00H
  4100*                  C      TA.TAST:
  4100*   CD 4364*       C      	CALL	TA.ABFR	;Abfragen der Tastatur
  4103*   28 FB          C      	JR	Z,TA.TAST	;Warten auf gueltiges Zeichen
  4105*   32 0D80*       C      	LD	(SM.TK),A
  4108*   47             C      	LD	B,A
  4109*   3A 0FFD        C      	LD	A,(SM.KGMER)	;(SM.KGMER)=1 : Schreibmasch.tastatur
  410C*   B7             C      	OR	A
  410D*   78             C      	LD	A,B
  410E*   28 18          C      	JR	Z,TA.ABF14	;Codewandlung fuer Klein-/Gross-
  4110*   FE 7E          C      	CP	7EH	;                  Schreibung
  4112*   30 14          C      	JR	NC,TA.ABF14
  4114*   FE 61          C      	CP	61H
  4116*   30 0A          C      	JR	NC,TA.ABF15
  4118*   FE 5E          C      	CP	5EH
  411A*   30 0C          C      	JR	NC,TA.ABF14
  411C*   FE 41          C      	CP	41H
  411E*   30 06          C      	JR	NC,TA.ABF16
  4120*   18 06          C      	JR	TA.ABF14
                         C      
  4122*                  C      TA.ABF15:
  4122*   D6 20          C      	SUB	20H
  4124*   18 02          C      	JR	TA.ABF14
                         C      
  4126*                  C      TA.ABF16:
  4126*   C6 20          C      	ADD	A,20H
                         C      
  4128*                  C      TA.ABF14:
  4128*   FE 80          C      	CP	80H	;Test auf Funktionstasten
  412A*   D2 41F9*       C      	JP	NC,TA.ABF20
  412D*   FE 09          C      	CP	09H	;Tabulator
  412F*   20 05          C      	JR	NZ,TA.AB01
  4131*   2A 0DAA*       C      	LD	HL,(SM.TABU)
  4134*   18 1C          C      	JR	TA.ABF3
  4136*                  C      TA.AB01:
  4136*   FE 1E          C      	CP	1EH	;ET1 / ENTER
  4138*   20 05          C      	JR	NZ,TA.ABF1
  413A*   2A 0DB0*       C      	LD	HL,(SM.NEWL)
  413D*   18 13          C      	JR	TA.ABF3
                         C      
  413F*                  C      TA.ABF1:
  413F*   21 0FFF        C      	LD	HL,SM.SPMER	;Merker fuer zugelassene Tastaturgruppen
  4142*   FE 3A          C      	CP	3AH
  4144*   30 7F          C      	JR	NC,TA.ABF10
  4146*   FE 20          C      	CP	20H
  4148*   30 5D          C      	JR	NC,TA.ABF6
  414A*   CB 46          C      	BIT	0,M	;BIT 0 : Zeichencode < 20H
  414C*   CA 41CF*       C      	JP	Z,TA.TFE
                         C      
  414F*                  C      TA.ABF2:
  414F*   2A 0DB2*       C      	LD	HL,(SM.EINA)	;Routine ASCII-Zeichen
  4152*                  C      TA.ABF3:
  4152*   4F             C      	LD	C,A
  4153*   7C             C      	LD	A,H
  4154*   B5             C      	OR	L
  4155*   28 78          C      	JR	Z,TA.TFE	;HL=0 : Taste nicht zugelassen
  4157*   CD 0211*       C      	CALL	SY.RESC	;Cursor loeschen
  415A*   79             C      	LD	A,C
  415B*   31 0CE0        C      	LD	SP,SM.STACK	;STACK_POINTER ruecksetzen
  415E*   CD 41A6*       C      	CALL	TA.MM	;Sprung zur Tastenroutine
  4161*   CD 01D7*       C      	CALL	SY.SETC	;Cursor setzen
                         C      
  4164*                  C      TA.WART:
  4164*   06 82          C      	LD	B,130
  4166*                  C      TA.WART1:
  4166*   C5             C      	PUSH	BC
  4167*   3A 0D8E*       C      	LD	A,(SM.ZSMER)
  416A*   B7             C      	OR	A
  416B*   CA 41CF*       C      	JP	Z,TA.TFE
  416E*   2A 4004*       C      	LD	HL,(TR.TA1+1)
  4171*   CD 41A4*       C      	CALL	TA.MM1
  4174*   C2 41CF*       C      	JP	NZ,TA.TFE
  4177*   2A 4007*       C      	LD	HL,(TR.TA2+1)
'DEG2000 V. 1.2    Tastaturmodul'	MACRO-80 3.44	09-Dec-81	PAGE	1-77


  417A*   CD 41A4*       C      	CALL	TA.MM1
  417D*   21 0D80*       C      	LD	HL,SM.TK
  4180*   BE             C      	CP	(HL)
  4181*   C2 41CF*       C      	JP	NZ,TA.TFE
  4184*   C1             C      	POP	BC
  4185*   10 DF          C      	DJNZ	TA.WART1
  4187*   3A 0D8F*       C      	LD	A,(SM.ZSTC)
  418A*   FE 0E          C      	CP	SD.ZEIT2-SD.ZEIT1
  418C*   38 04          C      	JR	C,TA.WART3
  418E*   FE 10          C      	CP	SD.ZEIT2
  4190*   28 06          C      	JR	Z,TA.WART4
  4192*                  C      TA.WART3:
  4192*   3C             C      	INC	A
  4193*   32 0D8F*       C      	LD	(SM.ZSTC),A
  4196*   18 CC          C      	JR	TA.WART
  4198*                  C      TA.WART4:
  4198*   3E 0E          C      	LD	A,SD.ZEIT2-SD.ZEIT1
  419A*   32 0D8F*       C      	LD	(SM.ZSTC),A
  419D*   AF             C      	XOR	A
  419E*   32 0D80*       C      	LD	(SM.TK),A
  41A1*   C3 4100*       C      	JP	TA.TAST
                         C      
  41A4*                  C      TA.MM1:
  41A4*   2B             C      	DEC	HL
  41A5*   2B             C      	DEC	HL
  41A6*                  C      TA.MM:
  41A6*   E9             C      	JP	(HL)
                         C      
  41A7*                  C      TA.ABF6:
  41A7*   FE 30          C      	CP	30H
  41A9*   30 14          C      	JR	NC,TA.ABF9
  41AB*   FE 2B          C      	CP	2BH
  41AD*   30 06          C      	JR	NC,TA.ABF8
  41AF*                  C      TA.ABF7:
  41AF*   CB 4E          C      	BIT	1,M	;BIT 1 : " SPACE!"#$%&'()*./
  41B1*   28 1C          C      	JR	Z,TA.TFE
  41B3*   18 9A          C      	JR	TA.ABF2
                         C      
  41B5*                  C      TA.ABF8:
  41B5*   FE 2E          C      	CP	2EH
  41B7*   30 F6          C      	JR	NC,TA.ABF7
  41B9*   CB 56          C      	BIT	2,M	;BIT 2 : +,-
  41BB*   28 12          C      	JR	Z,TA.TFE
  41BD*   18 90          C      	JR	TA.ABF2
                         C      
  41BF*                  C      TA.ABF9:
  41BF*   CB 5E          C      	BIT	3,M	;BIT 3 : 1234567890
  41C1*   28 0C          C      	JR	Z,TA.TFE
  41C3*   18 8A          C      	JR	TA.ABF2
                         C      
  41C5*                  C      TA.ABF10:
  41C5*   FE 40          C      	CP	40H
  41C7*   30 1A          C      	JR	NC,TA.ABF11
  41C9*   CB 66          C      	BIT	4,M	;BIT 4 : :;<>=?
  41CB*   28 02          C      	JR	Z,TA.TFE
  41CD*   18 80          C      	JR	TA.ABF2
                         C      
  41CF*                  C      TA.TFE:
  41CF*   CD 41D5*       C      	CALL	TA.TFE2
  41D2*   C3 4100*       C      	JP	TA.TAST
                         C      
  41D5*                  C      TA.TFE2:
  41D5*   AF             C      	XOR	A	;Einsprung Tastenende
  41D6*   32 0D8E*       C      	LD	(SM.ZSMER),A
  41D9*   32 0D8F*       C      	LD	(SM.ZSTC),A
  41DC*   2A 400D*       C      	LD	HL,(TR.TFE+1)	;Warten auf Tastenende
  41DF*   CD 41A4*       C      	CALL	TA.MM1
  41E2*   C9             C      	RET
                         C      
  41E3*                  C      TA.ABF11:
  41E3*   FE 61          C      	CP	61H
  41E5*   30 07          C      	JR	NC,TA.ABF13
  41E7*                  C      TA.ABF12:
  41E7*   CB 6E          C      	BIT	5,M	;BIT 5 : 40H - 60H UND 7BH - 7EH
  41E9*   28 E4          C      	JR	Z,TA.TFE
  41EB*   C3 414F*       C      	JP	TA.ABF2
                         C      
  41EE*                  C      TA.ABF13:
  41EE*   FE 7B          C      	CP	7BH
  41F0*   30 F5          C      	JR	NC,TA.ABF12
  41F2*   CB 76          C      	BIT	6,M	;BIT 6 : kleine Buchstaben
  41F4*   28 D9          C      	JR	Z,TA.TFE
  41F6*   C3 414F*       C      	JP	TA.ABF2
'DEG2000 V. 1.2    Tastaturmodul'	MACRO-80 3.44	09-Dec-81	PAGE	1-78


                         C      
  41F9*                  C      TA.ABF20:
  41F9*   21 0FFF        C      	LD	HL,SM.SPMER	;Unterteilung der Funktionstasten
  41FC*   FE FC          C      	CP	0FCH
  41FE*   30 36          C      	JR	NC,TA.EW1
  4200*   FE F0          C      	CP	0F0H
  4202*   30 45          C      	JR	NC,TA.STEUT
  4204*   FE D0          C      	CP	0D0H
  4206*   30 7C          C      	JR	NC,TA.STZ
  4208*   FE CA          C      	CP	0CAH
  420A*   30 7F          C      	JR	NC,TA.FKT2
  420C*   FE C0          C      	CP	0C0H
  420E*   30 76          C      	JR	NC,TA.HZE
  4210*   CB 7E          C      	BIT	7,M	;BIT 7 : Funktionstasten
  4212*   28 BB          C      	JR	Z,TA.TFE
  4214*   FE B0          C      	CP	0B0H
  4216*   30 7F          C      	JR	NC,TA.FKT1
                         C      
  4218*   21 0D81*       C      	LD	HL,SM.FKT	;PF1 - PF12 in 4 Ebenen
  421B*   46             C      	LD	B,(HL)
  421C*   04             C      	INC	B
  421D*   D6 8C          C      	SUB	08CH
  421F*                  C      TA.EAW2:
  421F*   C6 0C          C      	ADD	A,0CH
  4221*   10 FC          C      	DJNZ	TA.EAW2
  4223*                  C      TA.EAW3:
  4223*   21 42D6*       C      	LD	HL,TA.TAB1
  4226*                  C      TA.EAW5:
  4226*   87             C      	ADD	A,A
  4227*   4F             C      	LD	C,A
  4228*   06 00          C      	LD	B,0
  422A*   09             C      	ADD	HL,BC
                         C      
  422B*                  C      TA.ABFR9:
  422B*   7E             C      	LD	A,M
  422C*   23             C      	INC	HL
  422D*   66             C      	LD	H,M
  422E*   6F             C      	LD	L,A
  422F*   5E             C      	LD	E,M
  4230*   23             C      	INC	HL
  4231*   56             C      	LD	D,M
  4232*   EB             C      	EX	DE,HL
  4233*   C3 4152*       C      	JP	TA.ABF3
                         C      
  4236*                  C      TA.EW1:
  4236*   CB 7E          C      	BIT	7,M	;Ebenenumschalttasten
  4238*   28 95          C      	JR	Z,TA.TFE
  423A*   2F             C      	CPL
  423B*   32 0D81*       C      	LD	(SM.FKT),A	;0,...,3 steht in (SM.FKT)
  423E*   CD 4271*       C      	CALL	TA.BBB
  4241*   2A 4013*       C      	LD	HL,(TR.TEM+1)	;Ansteuerung der Ebenen-Dioden
  4244*   CD 41A4*       C      	CALL	TA.MM1
  4247*   18 86          C      	JR	TA.TFE
                         C      
  4249*                  C      TA.STEUT:
  4249*   CB 7E          C      	BIT	7,M	;INS_MODE ; DEL ; INS_LINE ; DEL_LINE
  424B*   28 82          C      	JR	Z,TA.TFE
  424D*   FE F0          C      	CP	0F0H
  424F*   28 07          C      	JR	Z,TA.INSMD
  4251*   D6 F0          C      	SUB	0F0H
  4253*                  C      TA.STEU1:
  4253*   21 4336*       C      	LD	HL,TA.TAB2
  4256*   18 CE          C      	JR	TA.EAW5
                         C      
  4258*                  C      TA.INSMD:
  4258*   3A 0FFE        C      	LD	A,(SM.IMERK)
  425B*   B7             C      	OR	A
  425C*   28 03          C      	JR	Z,TA.INSME
  425E*   3D             C      	DEC	A	;Diode INS_MODE ausschalten
  425F*   18 01          C      	JR	TA.INSML
  4261*                  C      TA.INSME:
  4261*   3C             C      	INC	A	;Diode INS_MODE einschalten
  4262*                  C      TA.INSML:
  4262*   32 0FFE        C      	LD	(SM.IMERK),A
  4265*   CD 4271*       C      	CALL	TA.BBB
  4268*   2A 4010*       C      	LD	HL,(TR.TIM+1)	;Diode INS_MODE ansteuern
  426B*   CD 41A4*       C      	CALL	TA.MM1
  426E*   AF             C      	XOR	A
  426F*   18 E2          C      	JR	TA.STEU1
                         C      
  4271*                  C      TA.BBB:
  4271*   3A 0D81*       C      	LD	A,(SM.FKT)	;( B )   laden fuer  TR.TIM
  4274*   3C             C      	INC	A
'DEG2000 V. 1.2    Tastaturmodul'	MACRO-80 3.44	09-Dec-81	PAGE	1-79


  4275*   47             C      	LD	B,A
  4276*   3E 80          C      	LD	A,080H
  4278*   07             C      	RLCA            ;<--!
  4279*   10 FD          C      	DJNZ	$-1     ;---!
  427B*   47             C      	LD	B,A
  427C*   3A 0FFE        C      	LD	A,(SM.IMERK)
  427F*   B7             C      	OR	A
  4280*   C8             C      	RET	Z
  4281*   CB F8          C      	SET	7,B
  4283*   C9             C      	RET
                         C      
  4284*                  C      TA.STZ:
  4284*   D6 40          C      	SUB	040H	;Codes 00H - 1FH (Hexatasten)
  4286*                  C      TA.HZE:
  4286*   D6 90          C      	SUB	090H	;Codes 30H - 39H (Hexatasten)
  4288*   C3 413F*       C      	JP	TA.ABF1
                         C      
  428B*                  C      TA.FKT2:
  428B*   CB 7E          C      	BIT	7,M	;Tasten : - , NQ SYS END ABS
  428D*   CA 41CF*       C      	JP	Z,TA.TFE
  4290*   D6 CA          C      	SUB	0CAH
  4292*   21 434E*       C      	LD	HL,TA.TAB3
  4295*   18 8F          C      	JR	TA.EAW5
                         C      
  4297*                  C      TA.FKT1:
  4297*   D6 B0          C      	SUB	0B0H	;Tasten : PQ TABS TABL CI M
  4299*   21 435A*       C      	LD	HL,TA.TAB4
  429C*   18 88          C      	JR	TA.EAW5
                         C      
  429E*                  C      TA.E0IN:
  429E*   AF             C      	XOR	A
  429F*   32 0D81*       C      	LD	(SM.FKT),A
  42A2*   32 0FFE        C      	LD	(SM.IMERK),A
  42A5*   CD 4271*       C      	CALL	TA.BBB
  42A8*   2A 4013*       C      	LD	HL,(TR.TEM+1)
  42AB*   CD 41A4*       C      	CALL	TA.MM1
  42AE*   CD 4271*       C      	CALL	TA.BBB
  42B1*   2A 4010*       C      	LD	HL,(TR.TIM+1)
  42B4*   CD 41A4*       C      	CALL	TA.MM1
  42B7*   C9             C      	RET
                         C      
                         C      
  42B8*   42B8*          C      	DW	$	;Schreibmaschinentastatur
  42BA*   53 54 41 53    C      	DB	'STAS'
  42BE*   3E 01          C      	LD	A,1
  42C0*   06 09          C      	LD	B,9
  42C2*                  C      TA.STAS1:
  42C2*   32 0FFD        C      	LD	(SM.KGMER),A
  42C5*   CD 446C*       C      	CALL	TR.PST
  42C8*   C3 000B*       C      	JP	SY.SYSTB
                         C      
  42CB*   42CB*          C      	DW	$	;Programmiertastatur
  42CD*   50 54 41 53    C      	DB	'PTAS'
  42D1*   AF             C      	XOR	A
  42D2*   06 08          C      	LD	B,8
  42D4*   18 EC          C      	JR	TA.STAS1
                         C      
                         C      	PAGE
'DEG2000 V. 1.2    Tastaturmodul'	MACRO-80 3.44	09-Dec-81	PAGE	1-80


                         C      
                         C      ;****************************************************************
                         C      ;*                  Verzweigungstabelle der Tastenroutinen      *
                         C      ;****************************************************************
  42D6*                  C      TA.TAB1:
  42D6*   0D22*          C      	DW	SM.FKTAB+(2*SM.FP01)        ;P01
  42D8*   0D24*          C      	DW	SM.FKTAB+(2*SM.FP02)        ;P02
  42DA*   0D26*          C      	DW	SM.FKTAB+(2*SM.FP03)        ;P03
  42DC*   0D28*          C      	DW	SM.FKTAB+(2*SM.FP04)        ;P04
  42DE*   0D2A*          C      	DW	SM.FKTAB+(2*SM.FP05)        ;P05
  42E0*   0D2C*          C      	DW	SM.FKTAB+(2*SM.FP06)        ;P06
  42E2*   0D2E*          C      	DW	SM.FKTAB+(2*SM.FP07)        ;P07
  42E4*   0D30*          C      	DW	SM.FKTAB+(2*SM.FP08)        ;P08
  42E6*   0D32*          C      	DW	SM.FKTAB+(2*SM.FP09)        ;P09
  42E8*   0D34*          C      	DW	SM.FKTAB+(2*SM.FP10)        ;P10
  42EA*   0D36*          C      	DW	SM.FKTAB+(2*SM.FP11)        ;P11
  42EC*   0D38*          C      	DW	SM.FKTAB+(2*SM.FP12)        ;P12
                         C      
  42EE*   0D3A*          C      	DW	SM.FKTAB+(2*SM.FP13)        ;P13
  42F0*   0D3C*          C      	DW	SM.FKTAB+(2*SM.FP14)        ;P14
  42F2*   0D3E*          C      	DW	SM.FKTAB+(2*SM.FP15)        ;P15
  42F4*   0D40*          C      	DW	SM.FKTAB+(2*SM.FP16)        ;P16
  42F6*   0D42*          C      	DW	SM.FKTAB+(2*SM.FP17)        ;P17
  42F8*   0D44*          C      	DW	SM.FKTAB+(2*SM.FP18)        ;P18
  42FA*   0D46*          C      	DW	SM.FKTAB+(2*SM.FP19)        ;P19
  42FC*   0D48*          C      	DW	SM.FKTAB+(2*SM.FP20)        ;P20
  42FE*   0D4A*          C      	DW	SM.FKTAB+(2*SM.FP21)        ;P21
  4300*   0D4C*          C      	DW	SM.FKTAB+(2*SM.FP22)        ;P22
  4302*   0D4E*          C      	DW	SM.FKTAB+(2*SM.FP23)        ;P23
  4304*   0D50*          C      	DW	SM.FKTAB+(2*SM.FP24)        ;P24
                         C      
  4306*   0D52*          C      	DW	SM.FKTAB+(2*SM.FP25)        ;P25
  4308*   0D54*          C      	DW	SM.FKTAB+(2*SM.FP26)        ;P26
  430A*   0D56*          C      	DW	SM.FKTAB+(2*SM.FP27)        ;P27
  430C*   0D58*          C      	DW	SM.FKTAB+(2*SM.FP28)        ;P28
  430E*   0D5A*          C      	DW	SM.FKTAB+(2*SM.FP29)        ;P29
  4310*   0D5C*          C      	DW	SM.FKTAB+(2*SM.FP30)        ;P30
  4312*   0D5E*          C      	DW	SM.FKTAB+(2*SM.FP31)        ;P31
  4314*   0D60*          C      	DW	SM.FKTAB+(2*SM.FP32)        ;P32
  4316*   0D62*          C      	DW	SM.FKTAB+(2*SM.FP33)        ;P33
  4318*   0D64*          C      	DW	SM.FKTAB+(2*SM.FP34)        ;P34
  431A*   0D66*          C      	DW	SM.FKTAB+(2*SM.FP35)        ;P35
  431C*   0D68*          C      	DW	SM.FKTAB+(2*SM.FP36)        ;P36
                         C      
  431E*   0D6A*          C      	DW	SM.FKTAB+(2*SM.FP37)        ;P37
  4320*   0D6C*          C      	DW	SM.FKTAB+(2*SM.FP38)        ;P38
  4322*   0D6E*          C      	DW	SM.FKTAB+(2*SM.FP39)        ;P39
  4324*   0D70*          C      	DW	SM.FKTAB+(2*SM.FP40)        ;P40
  4326*   0D72*          C      	DW	SM.FKTAB+(2*SM.FP41)        ;P41
  4328*   0D74*          C      	DW	SM.FKTAB+(2*SM.FP42)        ;P42
  432A*   0D76*          C      	DW	SM.FKTAB+(2*SM.FP43)        ;P43
  432C*   0D78*          C      	DW	SM.FKTAB+(2*SM.FP44)        ;P44
  432E*   0D7A*          C      	DW	SM.FKTAB+(2*SM.FP45)        ;P45
  4330*   0D7C*          C      	DW	SM.FKTAB+(2*SM.FP46)        ;P46
  4332*   0D7E*          C      	DW	SM.FKTAB+(2*SM.FP47)        ;P47
  4334*   0D80*          C      	DW	SM.FKTAB+(2*SM.FP48)        ;P48
                         C      
  4336*                  C      TA.TAB2:
  4336*   0CF6*          C      	DW	SM.FKTAB+(2*SM.FINSMOD)     ;INS_MOD
  4338*   0CF8*          C      	DW	SM.FKTAB+(2*SM.FDEL)        ;DEL
  433A*   0DAE*          C      	DW	SM.DEL                      ;INS_LINE ;00DACH
  433C*   0DAC*          C      	DW	SM.DELZ                     ;DEL_LINE ;00DAAH
                         C      
  433E*   0CF0*          C      	DW	SM.FKTAB+(2*SM.FLTAB)       ;SCH_LINKS
  4340*   0CF2*          C      	DW	SM.FKTAB+(2*SM.FUP)         ;C_HOCH
  4342*   0CF4*          C      	DW	SM.FKTAB+(2*SM.FRTAB)       ;SCH_RECHTS
  4344*   0CEA*          C      	DW	SM.FKTAB+(2*SM.FLEFT)       ;C_LINKS
  4346*   0CEC*          C      	DW	SM.FKTAB+(2*SM.FPOS1)       ;HOME
  4348*   0CEE*          C      	DW	SM.FKTAB+(2*SM.FRIGHT)      ;C_RECHTS
  434A*   0CE4*          C      	DW	SM.FKTAB+(2*SM.FNL)         ;CNZA
  434C*   0CE6*          C      	DW	SM.FKTAB+(2*SM.FDOWN)       ;C_RUNTER
                         C      
  434E*                  C      TA.TAB3:
  434E*   0D0E*          C      	DW	SM.FKTAB+(2*SM.F00)         ;00
  4350*   0D10*          C      	DW	SM.FKTAB+(2*SM.F000)        ;000
  4352*   0D12*          C      	DW	SM.FKTAB+(2*SM.FNQ)         ;NEG_QUIT
  4354*   0D14*          C      	DW	SM.FKTAB+(2*SM.FSYS)        ;SYS
  4356*   0D16*          C      	DW	SM.FKTAB+(2*SM.FEND)        ;END
  4358*   0D18*          C      	DW	SM.FKTAB+(2*SM.FABS)        ;ABS
                         C      
  435A*                  C      TA.TAB4:
  435A*   0CE8*          C      	DW	SM.FKTAB+(2*SM.FPQ)         ;POS_QUIT
'DEG2000 V. 1.2    Tastaturmodul'	MACRO-80 3.44	09-Dec-81	PAGE	1-81


  435C*   0CFE*          C      	DW	SM.FKTAB+(2*SM.FTABS)       ;TABS
  435E*   0D00*          C      	DW	SM.FKTAB+(2*SM.FTABL)       ;TABL
  4360*   0D02*          C      	DW	SM.FKTAB+(2*SM.FCI)         ;CI
  4362*   0D04*          C      	DW	SM.FKTAB+(2*SM.FM)          ;M
                         C      
                         C      	PAGE
'DEG2000 V. 1.2    Tastaturmodul'	MACRO-80 3.44	09-Dec-81	PAGE	1-82


                         C      
                         C      ;****************************************************************
                         C      ;*                  Eingabe des Tastencode                      *
                         C      ;****************************************************************
  4364*                  C      TA.ABFR:
  4364*   C5             C      	PUSH	BC	;retten der Register
  4365*   E5             C      	PUSH	HL
  4366*   F5             C      	PUSH	AF
  4367*   C1             C      	POP	BC	;BC=AF
  4368*   CB F1          C      	SET	6,C	;Z=1, wenn keine Taste betaetigt
  436A*   C5             C      	PUSH	BC
  436B*   2A 4004*       C      	LD	HL,(TR.TA1+1)	;/UInt einlesen
  436E*   CD 41A4*       C      	CALL	TA.MM1
  4371*   32 0FFC        C      	LD	(SM.CTRL),A
  4374*   C1             C      	POP	BC
  4375*   20 1C          C      	JR	NZ,TA.AB1	;keine Taste : Rueckladen der Register
                         C      
  4377*   C5             C      	PUSH	BC
  4378*   2A 4007*       C      	LD	HL,(TR.TA2+1)	;Tastencode lesen
  437B*   CD 41A4*       C      	CALL	TA.MM1
  437E*   C1             C      	POP	BC
                         C      
  437F*   B7             C      	OR	A	;Zeichen  NULL
  4380*   28 11          C      	JR	Z,TA.AB1
  4382*   FE C9          C      	CP	0C9H
  4384*   20 01          C      	JR	NZ,TA.AB2
  4386*   AF             C      	XOR	A
  4387*                  C      TA.AB2:
  4387*   CB B1          C      	RES	6,C	;Taste betaetigt ----- Z=0
  4389*   60             C      	LD	H,B	;Inhalt von A retten fuer CTRL
  438A*   47             C      	LD	B,A	;B : Tastencode
                         C      
  438B*   3A 0FFC        C      	LD	A,(SM.CTRL)	;Abfrage CTRL - Taste
  438E*   CB 57          C      	BIT	2,A
  4390*   CC 43A8*       C      	CALL	Z,TA.CTRL	;Auswertung CTRL - Taste
                         C      
  4393*                  C      TA.AB1:
  4393*   C5             C      	PUSH	BC
  4394*   F1             C      	POP	AF	;Rueckladen der Register
  4395*   E1             C      	POP	HL
  4396*   C1             C      	POP	BC
  4397*   C9             C      	RET
                         C      
  4398*                  C      TA.ABFR2:
  4398*   CD 4364*       C      	CALL	TA.ABFR
  439B*   F5             C      	PUSH	AF
  439C*   C5             C      	PUSH	BC
  439D*   01 3000        C      	LD	BC,03000H
  43A0*   0B             C      	DEC	BC           ;<--\
  43A1*   78             C      	LD	A,B          ;   |
  43A2*   B1             C      	OR	C            ;   |
  43A3*   20 FB          C      	JR	NZ,$-3       ;---/
  43A5*   C1             C      	POP	BC
  43A6*   F1             C      	POP	AF
  43A7*   C9             C      	RET
                         C      
                         C      
  43A8*                  C      TA.CTRL:
  43A8*   78             C      	LD	A,B	;Auswertung der CTRL-Taste
  43A9*   FE CE          C      	CP	0CEH	;Taste Hardcopy
  43AB*   20 07          C      	JR	NZ,TA.CT1
  43AD*   CD 04E4*       C      	CALL	S1.COPG
  43B0*   44             C      	LD	B,H	;nach Ausfuehrung Hardcopy wird die
  43B1*   CB F1          C      	SET	6,C	;Taste als nicht betaetigt betrachtet
  43B3*   C9             C      	RET
  43B4*                  C      TA.CT1:
  43B4*   FE 85          C      	CP	85H	;nur fuer Tastencode kleiner 85H
  43B6*   D0             C      	RET	NC
  43B7*   FE 84          C      	CP	84H
  43B9*   20 03          C      	JR	NZ,TA.CTRL0
  43BB*   06 F4          C      	LD	B,0F4H	;84H wird SCH_LINKS
  43BD*   C9             C      	RET
  43BE*                  C      TA.CTRL0:
  43BE*   FE 80          C      	CP	80H
  43C0*   38 03          C      	JR	C,TA.CTRL1
  43C2*   C6 31          C      	ADD	A,31H	;TABS , TABL , CI , M
  43C4*   47             C      	LD	B,A
  43C5*                  C      TA.CTRL1:
  43C5*   FE 70          C      	CP	70H
  43C7*   D0             C      	RET	NC
  43C8*   FE 60          C      	CP	60H
  43CA*   38 03          C      	JR	C,TA.CTRL2
'DEG2000 V. 1.2    Tastaturmodul'	MACRO-80 3.44	09-Dec-81	PAGE	1-83


  43CC*   C6 80          C      	ADD	A,80H	;`.....o wird zu 10H - 1FH
  43CE*   47             C      	LD	B,A
  43CF*                  C      TA.CTRL2:
  43CF*   FE 50          C      	CP	50H
  43D1*   D0             C      	RET	NC
  43D2*   FE 40          C      	CP	40H
  43D4*   D8             C      	RET	C
  43D5*   C6 90          C      	ADD	A,90H	;@.....O wird zu 00H - 0FH
  43D7*   47             C      	LD	B,A
  43D8*   C9             C      	RET
                         C      
                         C      			;Stand: 06.Februar 85 - K EAW/wfvm..MSH
                         C      
                         C      ;	END
                         C      	INCLUDE TR01.MAC
                         C      	TITLE	'physische Tastatur-Routine'
                         C      	PAGE
'physische Tastatur-Routine'	MACRO-80 3.44	09-Dec-81	PAGE	1-84


                         C      
                         C      ;	PN	TR01
                         C      ;****************************************************************
                         C      ;*                  TAP / DEG2000 -- physische Tastatur-Routine *
                         C      ;*  T A P           --------------------------------------------*
                         C      ;*                  Programmierer: M. Herbote  K EAW  ZFT (WFT) *
                         C      ;*  D E G 2 0 0 0   --------------------------------------------*
                         C      ;*                  Stand        : 06.Februar 1985              *
                         C      ;****************************************************************
  00A0                   C      TR.ATAST EQU    0A0H    ;Grundadresse der Tastaturansteuerung
                         C      
  0002                   C      TR.ANST  EQU    2       ;8 --- PIO- Ansteuerung
                         C                              ;4 --- ATD- Ansteuerung
                         C                              ;2 --- ATS- Ansteuerung
                         C      
  0002                   C      TR.TAST  EQU    2       ;1 --- Tastatur K 760x
                         C                              ;2 --- Tastatur K 763x
                         C      
  0001                   C      TR.CTR   EQU    1       ;1 --- ohne Code-Transformation
                         C                              ;2 --- mit  Code-Transformation
                         C      
                         C      	IF	TR.ANST AND 8
                         C      TR.PPTAB:
                         C               DB	0CFH
                         C               DB	0FFH
                         C               DB	003H
                         C      
                         C      TR.PTAB1:
                         C               DB	0CFH
                         C               DB	001H
                         C               DB	003H
                         C      
                         C      TR.PTAB2:
                         C               DB	0CFH
                         C               DB	0F0H
                         C               DB	003H
                         C      	ENDIF
                         C      
                         C      	PAGE
'physische Tastatur-Routine'	MACRO-80 3.44	09-Dec-81	PAGE	1-85


                         C      
                         C      	IF	TR.CTR AND 2
                         C      ;****************************************************************
                         C      ;*                  Codewandeltabelle  neue ==> alte Tastatur   *
                         C      ;****************************************************************
                         C      TR.TABB1:
                         C      	DB	36
                         C      	DW	08D09H
                         C      	DW	0118FH
                         C      	DW	09291H
                         C      	DW	09493H
                         C      	DW	09695H
                         C      	DW	09897H
                         C      	DW	09A99H
                         C      	DW	09C9BH
                         C      	DW	09D1FH
                         C      	DB	002H
                         C      	DW	08B1BH
                         C      	DB	01CH
                         C      	DW	08E1EH
                         C      	DW	01303H
                         C      	DW	0050BH
                         C      	DW	00A04H
                         C      	DW	00607H
                         C      	DW	00F01H
                         C      	DW	00810H
                         C      
                         C      	DW	0FEFFH
                         C      	DW	0FCFDH
                         C      	DW	08180H
                         C      	DW	08382H
                         C      	DW	08584H
                         C      	DW	08786H
                         C      	DW	08988H
                         C      	DW	08B8AH
                         C      	DW	01E09H
                         C      	DB	0F0H
                         C      	DW	0F1F1H
                         C      	DB	0F2H
                         C      	DW	0F3F3H
                         C      	DW	0F6F5H
                         C      	DW	0F8F7H
                         C      	DW	0FAF9H
                         C      	DW	0B0FBH
                         C      	DW	0CDCCH
                         C      	DW	0CFCEH
                         C      TR.TABB2  EQU   $-1
                         C      	ENDIF
                         C      
                         C      	PAGE
'physische Tastatur-Routine'	MACRO-80 3.44	09-Dec-81	PAGE	1-86


                         C      
                         C      ;****************************************************************
                         C      ;*                  Initialisierung der Tastatur                *
                         C      ;****************************************************************
  43D9*                  C      TR.PIOPR:
  43D9*   3E A0          C      	LD	A,TR.ATAST
  43DB*                  C      TR.PIOP2:
  43DB*   4F             C      	LD	C,A
  43DC*   C9             C      	RET
                         C      
                         C      	IF	(TR.ANST AND 2) AND (TR.TAST AND 2)
  43DD*   F5             C      	PUSH	AF
                         C      	ENDIF
                         C      
  43DE*   0C             C      	INC	C
  43DF*   0C             C      	INC	C
                         C      
                         C      	IF	TR.ANST AND 8	;PIO
                         C      	LD	HL,TR.PTAB1
                         C      	CALL	TR.PIOU3
                         C      	INC	C
                         C      	LD	HL,TR.PPTAB
                         C      	CALL	TR.PIOU3
                         C      	RET
                         C      TR.PIOUM:
                         C      	LD	A,TR.ATAST
                         C      TR.PIOU2:
                         C      	LD	C,A
                         C      	LD	A,0FEH		;DB tristate
                         C      	OUT	(C),A
                         C      	INC	C
                         C      	INC	C
                         C      	INC	C
                         C      TR.PIOU3:
                         C      	LD	B,3
                         C      	OTIR
                         C      	ENDIF
                         C      
                         C      	IF	TR.ANST AND 4 OR TR.ANST AND 2
  43E0*   AF             C      	XOR	A
  43E1*   ED 79          C      	OUT	(C),A
  43E3*   0D             C      	DEC	C
  43E4*   0D             C      	DEC	C
  43E5*   ED 78          C      	IN	A,(C)
  43E7*   01 8000        C      	LD	BC,8000H
  43EA*   0B             C      	DEC	BC
  43EB*   78             C      	LD	A,B
  43EC*   B1             C      	OR	C
  43ED*   20 FB          C      	JR	NZ,$-3
                         C      
                         C      	IF	(TR.ANST AND 2) AND (TR.TAST AND 2)
  43EF*   F1             C      	POP	AF
  43F0*   CD 43F6*       C      	CALL	TR.TA32
                         C      	ENDIF
                         C      
  43F3*                  C      TR.PIOUM  EQU   $
  43F3*                  C      TR.PIOU2  EQU   $
                         C      	ENDIF
                         C      
  43F3*   C9             C      	RET
                         C      
  43F4*                  C      TR.TA31:
  43F4*   3E A0          C      	LD	A,TR.ATAST	;Warten auf gedrueckte Taste
  43F6*                  C      TR.TA32:
  43F6*   F5             C      	PUSH	AF
  43F7*   CD 4003*       C      	CALL	TR.TA1
  43FA*   C1             C      	POP	BC
  43FB*   78             C      	LD	A,B
  43FC*   20 F8          C      	JR	NZ,TR.TA32
  43FE*   CD 4006*       C      	CALL	TR.TA2
  4401*   C9             C      	RET
                         C      
  4402*                  C      TR.TFE1:
  4402*   3E A0          C      	LD	A,TR.ATAST	;Warten auf Tastenende
  4404*                  C      TR.TFE2:
  4404*   F5             C      	PUSH	AF
  4405*   CD 4003*       C      	CALL	TR.TA1
  4408*   C1             C      	POP	BC
  4409*   78             C      	LD	A,B
  440A*   F5             C      	PUSH	AF
  440B*   CD 4006*       C      	CALL	TR.TA2
  440E*   F1             C      	POP	AF
'physische Tastatur-Routine'	MACRO-80 3.44	09-Dec-81	PAGE	1-87


  440F*   28 F3          C      	JR	Z,TR.TFE2
  4411*   C9             C      	RET
                         C      
                         C      	PAGE
'physische Tastatur-Routine'	MACRO-80 3.44	09-Dec-81	PAGE	1-88


                         C      
                         C      ;****************************************************************
                         C      ;*                  UP zum Abfragen nach gedrueckter Taste      *
                         C      ;****************************************************************
  4412*                  C      TR.TTA11:
  4412*   3E A0          C      	LD	A,TR.ATAST
                         C      
  4414*                  C      TR.TTA12  EQU   $
                         C      	IF	TR.TAST AND 1
                         C      	PUSH	AF
                         C      	ENDIF
                         C      
                         C      	IF	TR.ANST AND 8	;PIO
                         C      	LD	C,A
                         C      	LD	A,0FEH		;DB tristate
                         C      	OUT	(C),A
                         C      	LD	A,0FAH		;/UCS2
                         C      	OUT	(C),A
                         C      	IN	A,(C)
                         C      	BIT	0,A
                         C      	ENDIF
                         C      
                         C      	IF	TR.ANST AND 4	;ATD
                         C      	ADD	4		;/UCS2
                         C      	ENDIF
                         C      
                         C      	IF	TR.ANST AND 2	;ATS
  4414*   3C             C      	INC	A		;/UCS2
                         C      	ENDIF
                         C      
                         C      	IF	TR.ANST AND 4 OR TR.ANST AND 2
  4415*   4F             C      	LD	C,A
  4416*   ED 78          C      	IN	A,(C)
  4418*   CB 5F          C      	BIT	3,A
                         C      	ENDIF
                         C      
                         C      	IF	TR.TAST AND 1	;alte Tastatur  ( K 760x )
                         C      	SET	2,A		;CTRL ausschalten
                         C      	POP	BC
                         C      	RET	Z		;RET wenn /UInt aktiv
                         C      	PUSH	AF
                         C      	LD	A,B		;liegt gueltige Taste an ?
                         C      	CALL	TR.TTA22
                         C      	OR	A		;Z=1 wenn keine gueltige Taste
                         C      	JR	NZ,$+4		;---|
                         C      	POP	AF		;   |
                         C      	RET			;   |
                         C      	POP	AF		;<--|
                         C      	RES	3,A		;/UINT akivieren
                         C      	BIT	3,A
                         C      	ENDIF
                         C      
  441A*   C9             C      	RET
                         C      ;****************************************************************
                         C      ;*                  UP zum Einlesen des Tastaturcodes           *
                         C      ;****************************************************************
  441B*                  C      TR.TTA21:
  441B*   3E A0          C      	LD	A,TR.ATAST
  441D*                  C      TR.TTA22:
  441D*   4F             C      	LD	C,A
                         C      
                         C      	IF	TR.ANST AND 8	;PIO
                         C      	LD	A,0FCH		;/UCS1
                         C      	OUT	(C),A
                         C      	INC	C
                         C      	IN	A,(C)
                         C      	ENDIF
                         C      
                         C      	IF	TR.ANST AND 4 OR TR.ANST AND 2
  441E*   ED 78          C      	IN	A,(C)		;/UCS1
                         C      	ENDIF
                         C      
                         C      	IF	TR.CTR AND 2
                         C      	PUSH	HL		;Codewandlung neue ==> alte Tast.
                         C      	PUSH	BC
                         C      	LD	HL,TR.TABB1
                         C      	LD	B,0
                         C      	LD	C,(HL)
                         C      	INC	HL
                         C      	CPIR
                         C      	JR	NZ,TR.KODE
                         C      	OR	A
'physische Tastatur-Routine'	MACRO-80 3.44	09-Dec-81	PAGE	1-89


                         C      	LD	HL,TR.TABB2
                         C      	SBC	HL,BC
                         C      	LD	A,(HL)
                         C      TR.KODE:
                         C      	POP	BC
                         C      	POP	HL
                         C      	ENDIF
                         C      
  4420*   C9             C      	RET
                         C      
                         C      	PAGE
'physische Tastatur-Routine'	MACRO-80 3.44	09-Dec-81	PAGE	1-90


                         C      
                         C      ;****************************************************************
                         C      ;*                  Ansteuerung der INS_MOD - Diode             *
                         C      ;****************************************************************
  4421*                  C      TR.TTIM1:
  4421*   3E A0          C      	LD	A,TR.ATAST
  4423*                  C      TR.TTIM2:
  4423*   4F             C      	LD	C,A		;( B )___bit 7       INS_MOD
  4424*   C9             C      	RET
  4425*   F5             C      	PUSH	AF		;        bit 3,2,1,0 aktuelle Ebene
                         C      
                         C      	IF	TR.ANST AND 8	; P I O
                         C      	LD	HL,TR.PTAB2
                         C      	CALL	TR.PIOU2
                         C      	ENDIF
                         C      
  4426*   F1             C      	POP	AF
  4427*   F5             C      	PUSH	AF
                         C      
                         C      	IF	TR.TAST AND 1	;alte Tastatur  ( K 760x )
                         C      	BIT	7,B
                         C      	JR	NZ,$+6		;---|
                         C      	LD	B,0F7H		;   |     /UCS4: UB3
                         C      	JR	$+4		;------|
                         C      	LD	B,0FDH		;<--|  |  /UCS4: UB1
                         C      	ENDIF			;<-----|
                         C      
                         C      	IF	TR.TAST AND 2	;neue Tastatur  ( K 763x )
  4428*   78             C      	LD	A,B
  4429*   E6 0F          C      	AND	00FH
  442B*   2F             C      	CPL
  442C*   CB 78          C      	BIT	7,B
  442E*   28 02          C      	JR	Z,$+4		;---|
  4430*   CB A7          C      	RES	4,A		;   |     /UCS4: UB4
  4432*   47             C      	LD	B,A		;<--|
                         C      	ENDIF
                         C      
  4433*                  C      TR.TTIM4  EQU   $
                         C      
                         C      	IF	TR.ANST AND 8	; P I O
                         C      	LD	A,0EEH		; /UCS4
                         C      TR.TTIM3:
                         C      	OUT	(C),A
                         C      	INC	C
                         C      	OUT	(C),B
                         C      	POP	AF
                         C      	LD	HL,TR.PPTAB
                         C      	CALL	TR.PIOU2
                         C      	ENDIF
                         C      
                         C      	IF	TR.ANST AND 4	; A T D
                         C      	PUSH	BC
                         C      	LD	B,12		; /UCS4
                         C      	ENDIF
                         C      
                         C      	IF	TR.ANST AND 2	; A T S
  4433*   C5             C      	PUSH	BC
  4434*   06 02          C      	LD	B,2		; /UCS4
                         C      	ENDIF
                         C      
                         C      	IF	TR.ANST AND 2 OR TR.ANST AND 4
  4436*                  C      TR.TTIM3:
  4436*   0C             C      	INC	C
  4437*   10 FD          C      	DJNZ	$-1
  4439*   F1             C      	POP	AF
  443A*   ED 79          C      	OUT	(C),A
  443C*   F1             C      	POP	AF
                         C      
                         C      	IF	(TR.ANST AND 2) AND (TR.TAST AND 2)
  443D*   CD 43F6*       C      	CALL	TR.TA32
                         C      	ENDIF
                         C      
                         C      	ENDIF
                         C      
  4440*   C9             C      	RET
                         C      
                         C      	PAGE
'physische Tastatur-Routine'	MACRO-80 3.44	09-Dec-81	PAGE	1-91


                         C      
                         C      ;****************************************************************
                         C      ;*                  Ansteuerung der Ebenen  - Dioden            *
                         C      ;****************************************************************
  4441*                  C      TR.TTEM1:
  4441*   3E A0          C      	LD	A,TR.ATAST
  4443*                  C      TR.TTEM2:
  4443*   4F             C      	LD	C,A
  4444*   C9             C      	RET
                         C      
                         C      	IF	TR.TAST AND 2	;neue Tastatur  ( K 763x )
  4445*                  C      TR.TTEM3:
  4445*   18 DC          C      	JR	TR.TTIM2
                         C      	ENDIF
                         C      
                         C      	IF	TR.TAST AND 1	;alte Tastatur  ( K 760x )
                         C      	PUSH	AF
                         C      
                         C      	IF	TR.ANST AND 8	; P I O
                         C      	LD	HL,TR.PTAB2
                         C      	CALL	TR.PIOU2
                         C      	ENDIF
                         C      
                         C      	POP	AF
                         C      	PUSH	AF
                         C      
                         C      	LD	A,B
                         C      	AND	00FH
                         C      	CPL
                         C      	LD	B,A
                         C      
                         C      	IF	TR.ANST AND 8	; P I O
                         C      	LD	A,0F6H		; /UCS3
                         C      	JR	TR.TTIM3
                         C      	ENDIF
                         C      
                         C      	IF	TR.ANST AND 4	; A T D
                         C      	PUSH	BC
                         C      	LD	B,8		; /UCS3
                         C      	ENDIF
                         C      
                         C      	IF	TR.ANST AND 2	; A T S
                         C      	PUSH	BC
                         C      	LD	B,7		; /UCS3
                         C      	ENDIF
                         C      
                         C      	IF	TR.ANST AND 2 OR TR.ANST AND 4
                         C      	JR	TR.TTIM3
                         C      	ENDIF
                         C      
                         C      	ENDIF
                         C      
                         C      
                         C      	PAGE
'physische Tastatur-Routine'	MACRO-80 3.44	09-Dec-81	PAGE	1-92


                         C      
                         C      ;****************************************************************
                         C      ;*                  Ansteuerung der Fehleranzeigen              *
                         C      ;****************************************************************
  4447*                  C      TR.TTBL1:
  4447*   3E A0          C      	LD	A,TR.ATAST
  4449*                  C      TR.TTBL2:
  4449*   4F             C      	LD	C,A		;( B )___bit 3,2,1,0 aktuelle Ebene
                         C      				;        bit 4       Fehlerlampe
                         C      				;        bit 5       Hupe lang
                         C      				;        bit 6       Hupe kurz
                         C      				;        bit 7       INS_MOD
  444A*   C9             C      	RET
                         C      
                         C      	IF	TR.ANST AND 8	; P I O
                         C      	PUSH	AF
                         C      	LD	HL,TR.PTAB2
                         C      	CALL	TR.PIOU2
                         C      	POP	AF
                         C      	ENDIF
                         C      
  444B*   F5             C      	PUSH	AF
                         C      
                         C      	IF	TR.TAST AND 2	;neue Tastatur  ( K 763x )
  444C*   78             C      	LD	A,B
  444D*   E6 0F          C      	AND	00FH
  444F*   2F             C      	CPL
  4450*   CB 78          C      	BIT	7,B
  4452*   28 02          C      	JR	Z,$+4		;---|
  4454*   CB A7          C      	RES	4,A		;   |     /UCS4: UB4
  4456*   CB 60          C      	BIT	4,B		;<--|
  4458*   28 02          C      	JR	Z,$+4		;------|
  445A*   CB AF          C      	RES	5,A		;      |  /UCS4: UB5
  445C*   CB 68          C      	BIT	5,B		;<-----|
  445E*   28 02          C      	JR	Z,$+4		;---|
  4460*   CB B7          C      	RES	6,A		;   |     /UCS4: UB6
  4462*   CB 70          C      	BIT	6,B		;<--|
  4464*   28 02          C      	JR	Z,$+4		;------|
  4466*   3E 20          C      	LD	A,020H		;      |  /UCS4: UB0,1,2,3,4,6,7
  4468*   47             C      	LD	B,A		;<-----|
  4469*   C3 4433*       C      	JP	TR.TTIM4
                         C      	ENDIF
                         C      
                         C      	IF	TR.TAST AND 1	;alte Tastatur  ( K 760x )
                         C      	BIT	4,B
                         C      	JR	NZ,TR.BL3
                         C      	BIT	5,B
                         C      	JR	NZ,TR.BL3
                         C      	BIT	6,B
                         C      	JR	NZ,TR.BL3
                         C      
                         C      	LD	A,0F7H		;         /UCS4: UB3
                         C      	JR	TR.BL4
                         C      
                         C      TR.BL3:
                         C      	LD	A,0FEH		;         /UCS4: UB0
                         C      	BIT	7,B
                         C      	JR	Z,TR.BL4
                         C      	RES	1,A		;         /UCS4: UB1
                         C      
                         C      TR.BL4:
                         C      	LD	B,A
                         C      
                         C      	IF	TR.ANST AND 8	; P I O
                         C      	LD	A,0EEH		; /UCS4
                         C      	OUT	(C),A
                         C      	INC	C
                         C      	OUT	(C),B
                         C      	POP	AF
                         C      	LD	HL,TR.PPTAB
                         C      	CALL	TR.PIOU2
                         C      	ENDIF
                         C      
                         C      	IF	TR.ANST AND 4	; A T D
                         C      	PUSH	BC
                         C      	LD	B,12		; /UCS4
                         C      	ENDIF
                         C      
                         C      	IF	TR.ANST AND 2	; A T S
                         C      	PUSH	BC
                         C      	LD	B,2		; /UCS4
                         C      	ENDIF
'physische Tastatur-Routine'	MACRO-80 3.44	09-Dec-81	PAGE	1-93


                         C      
                         C      	IF	TR.ANST AND 2 OR TR.ANST AND 4
                         C      	INC	C
                         C      	DJNZ	$-1
                         C      	POP	AF
                         C      	OUT	(C),A
                         C      	POP	AF
                         C      	IF	TR.ANST AND 2
                         C      	IF	TR.TAST AND 2
                         C      	CALL	TR.TA32
                         C      	ENDIF
                         C      	ENDIF
                         C      	ENDIF
                         C      
                         C      	RET
                         C      
                         C      	ENDIF
                         C      
                         C      	PAGE
'physische Tastatur-Routine'	MACRO-80 3.44	09-Dec-81	PAGE	1-94


                         C      
                         C      ;****************************************************************
                         C      ;*                  Ausgaben an Tastatur fC<r DEG2000-Emulator   *
                         C      ;****************************************************************
  446C*                  C      TR.PST:
                         C      	IF SD.GENE AND 16   ;DEG2000 Emulator
                         C                              ; Erwartet in B den Parameter:
                         C                              ;  8    ===> Programm        -Tastatur aktivieren
                         C                              ;  9    ===> Schreibmaschinen-Tastatur aktivieren
  446C*   F5             C      	PUSH	AF
  446D*   3E A0          C      	LD	A,TR.ATAST
  446F*   4F             C      	LD	C,A
  4470*   0C             C      	INC	C
  4471*   0C             C      	INC	C
  4472*   ED 41          C      	OUT	(C),B
  4474*   F1             C      	POP	AF
                         C      	ENDIF
  4475*   C9             C      	RET
                         C      
                         C      			;Stand: 07.Februar 85 - K EAW/wfvm..MSH
                         C      
                         C      ;	END
                                
                         C      	INCLUDE LR01.MAC	; Lochband-Routine
                         C      	TITLE	'Lochband-Geraete-Treiber'
                         C      	PAGE
'Lochband-Geraete-Treiber'	MACRO-80 3.44	09-Dec-81	PAGE	1-95


                         C      
                         C      ;	PN	LR01
                         C      ;****************************************************************
                         C      ;*                  Lochband-Geraete-Treiber  fuer              *
                         C      ;*                  S I F 1000  ( ADA )  und  I F S P  ( ALB )  *
                         C      ;*  T A P           --------------------------------------------*
                         C      ;*                  Programmierer: M. Herbote  K EAW  ZFT (WFT) *
                         C      ;*  D E G 2 0 0 0   --------------------------------------------*
                         C      ;*                  Stand        : 10.Januar 1985               *
                         C      ;****************************************************************
                         C      
                         C      ;****************************************************************
                         C      ;*                  Aufbau der  E-/A-Tabelle                    *
                         C      ;*                  --------------------------------------------*
                         C      ;*       +  0       EOR - Zeichen  extern                       *
                         C      ;*       +  1       EOR - Zeichen  intern                       *
                         C      ;*       +  2       Basisadresse der Ansteuerkarte fuer Lochb.  *
                         C      ;*       +  3       Status                                      *
                         C      ;*                  bit 0 = 1  ...  EOF gelesen                 *
                         C      ;*                      1 = 1  ...  EOR gelesen                 *
                         C      ;*       +  4       Kommando                                    *
                         C      ;*                  bit 0      ...  nicht benutzt               *
                         C      ;*                                                              *
                         C      ;*                      1 = 0  ...  Transport rueckwaerts Lesen *
                         C      ;*                        = 1  ...  Transport vorwaerts   Lesen *
                         C      ;*                      2 = 0  ...  keine EOR-Umwandlung        *
                         C      ;*                        = 1  ...  EOR extern <===> EOR intern *
                         C      ;*                      3 = 0  ...  keine Code-Konvertierung    *
                         C      ;*                        = 1  ...        Code-Konvertierung    *
                         C      ;*                      4      ...  nicht benutzt               *
                         C      ;*                                                              *
                         C      ;*                      5 = 0  ...  NUL und DEL      lesen      *
                         C      ;*                          1  ...  NUL und DEL ueberlesen      *
                         C      ;*                      6 = 0  ...  ungerade Paritaet (7=1)     *
                         C      ;*                          1  ...    gerade Paritaet (7=1)     *
                         C      ;*                      7 = 0  ...  ohne Paritaet               *
                         C      ;*                          1  ...  mit  Paritaet               *
                         C      ;*       + 5, + 6   Anfangsadresse der Konvertierungstabelle(n) *
                         C      ;*       + 7, + 8   Blockadresse                                *
                         C      ;*       + 9, +10   Blocklaenge                                 *
                         C      ;*       +11        Paritaetsverknuepfungszeichen               *
                         C      ;*       +12        EOF - Zeichen                               *
                         C      ;*       +13, +14   Adresse der  OPEN       - Routine           *
                         C      ;*       +15, +16   Adresse der  CLOSE      - Routine           *
                         C      ;*       +17, +18   Adresse der  READ/WRITE - Routine           *
                         C      ;*       +19, +20   Adresse der  KONV       - Routine           *
                         C      ;****************************************************************
                         C      
                         C      ;	ORG	07000H
                         C      ; LR.LRLBL:
                         C      ; 	JP	LR.LBL
                         C      ; LR.LRLBS:
                         C      ; 	JP	LR.LBS
                         C      
                         C      ;	ORG	07010H
  4476*                  C      LR.IRLB:
  4476*   4505*          C      	DW	LR.IRLBS
  4478*   4585*          C      	DW	LR.IRLBL
                         C      
                         C      	PAGE
'Lochband-Geraete-Treiber'	MACRO-80 3.44	09-Dec-81	PAGE	1-96


                         C      
                         C      ;****************************************************************
                         C      ;*                  Standard-Konvertierungsroutine              *
                         C      ;*                  fuer Einfach-Kodetabelle                    *
                         C      ;****************************************************************
  447A*                  C      LR.KONV:
  447A*   E5             C      	PUSH	HL
  447B*   C5             C      	PUSH	BC
  447C*   DD 66 06       C      	LD	H,(IX+6)	;Adresse der Konvertierungstabelle
  447F*   DD 6E 05       C      	LD	L,(IX+5)
  4482*   06 00          C      	LD	B,0
  4484*   4F             C      	LD	C,A
  4485*   09             C      	ADD	HL,BC
  4486*   7E             C      	LD	A,(HL)
  4487*   C1             C      	POP	BC
  4488*   E1             C      	POP	HL
  4489*   C9             C      	RET
                         C      
  448A*                  C      LR.KONV1:
  448A*   CB 58          C      	BIT	3,B	;Konvertierung ?
  448C*   C8             C      	RET	Z		;NEIN
  448D*   F5             C      	PUSH	AF	;Zeichen retten
  448E*   DD 7E 13       C      	LD	A,(IX+19)	;Adresse der Konvertierungsroutine
  4491*   6F             C      	LD	L,A	;laden
  4492*   DD B6 14       C      	OR	(IX+20)
  4495*   28 05          C      	JR	Z,LR.KONV2
  4497*   DD 66 14       C      	LD	H,(IX+20)
  449A*   18 03          C      	JR	LR.KONV3
  449C*                  C      LR.KONV2:
  449C*   21 447A*       C      	LD	HL,LR.KONV
  449F*                  C      LR.KONV3:
  449F*   F1             C      	POP	AF	;Zeichen laden
  44A0*   E9             C      	JP	(HL)	;Konvertierungsroutine aufrufen
                         C      
  0001                   C      LR.LBGEN	EQU	00000001B	;Generierungskonstante
                         C      			;Bit 0 = 1  ...  ALB / K6200
                         C      			;    1 = 1  ...  ADA / DARO
                         C      
                         C      	TITLE	'Lochband-Geraete-Treiber Ausgaberoutine'
                         C      	PAGE
'Lochband-Geraete-Treiber Ausgaberoutine'	MACRO-80 3.44	09-Dec-81	PAGE	1-97


                         C      
                         C      ;****************************************************************
                         C      ;*                  Ausgabe eines Zeichens zum Lochbandstanzer  *
                         C      ;****************************************************************
  44A1*                  C      LR.LBS:
  44A1*   E5             C      	PUSH	HL	;Register retten
  44A2*   C5             C      	PUSH	BC
  44A3*   F5             C      	PUSH	AF
  44A4*   ED 57          C      	LD	A,I	;I-Register retten
  44A6*   F5             C      	PUSH	AF
  44A7*   3E 44*         C      	LD	A,HIGH(LR.IRLB)	;I-Register fuer LB laden
  44A9*   ED 47          C      	LD	I,A
  44AB*   41             C      	LD	B,C	;auszugebendes Zeichen retten
  44AC*   C5             C      	PUSH	BC
                         C      
                         C      	IF	LR.LBGEN AND 1
  44AD*   3E E8          C      	LD	A,0E8H	;Basisadresse ALB
                         C      	ENDIF
                         C      	IF	LR.LBGEN AND 2
                         C      	LD	A,0	;Basisadresse ADA
                         C      	ENDIF
                         C      
  44AF*                  C      LR.ILBS:
  44AF*   F3             C      	DI
                         C      
                         C      	IF	LR.LBGEN AND 1
  44B0*   C6 06          C      	ADD	A,6
                         C      	ENDIF
                         C      	IF	LR.LBGEN AND 2
                         C      	ADD	A,2
                         C      	ENDIF
                         C      
  44B2*   4F             C      	LD	C,A
  44B3*   21 458E*       C      	LD	HL,LR.SWLBS
  44B6*   06 03          C      	LD	B,3
  44B8*   ED B3          C      	OTIR		;Adresse + 6 : PIO 2, Port A, Steuer
                         C      			;Adresse + 2 : PIO 1, Port A, Steuer
                         C      
  44BA*   0C             C      	INC	C
  44BB*   06 03          C      	LD	B,3
  44BD*   ED B3          C      	OTIR		;Adresse + 7 : PIO 2, Port B, Steuer
                         C      			;Adresse + 3 : PIO 1, Port B, Steuer
                         C      
  44BF*   0D             C      	DEC	C
  44C0*   0D             C      	DEC	C
                         C      
  44C1*   F1             C      	POP	AF	;Ausgabe des Datenbyte ====>
  44C2*   C5             C      	PUSH	BC
  44C3*   DD 46 04       C      	LD	B,(IX+4)	;Kommandobyte
  44C6*   CB 50          C      	BIT	2,B	;EOR-Umwandlung ?
  44C8*   28 08          C      	JR	Z,LR.LBS2	;NEIN
  44CA*   DD BE 01       C      	CP	(IX+1)	;EOR intern ?
  44CD*   20 03          C      	JR	NZ,LR.LBS2	;NEIN
  44CF*   DD 7E 00       C      	LD	A,(IX+0)	;EOR extern
  44D2*                  C      LR.LBS2:
  44D2*   CD 448A*       C      	CALL	LR.KONV1
  44D5*   CB 78          C      	BIT	7,B	;mit Paritaet ?
  44D7*   28 14          C      	JR	Z,LR.LBSE	;NEIN
  44D9*   CB 70          C      	BIT	6,B	;welche Paritaet ?
  44DB*   20 09          C      	JR	NZ,LR.LBS1
                         C      
  44DD*   B7             C      	OR	A	;ungerade Paritaet ?
  44DE*   E2 44ED*       C      	JP	PO,LR.LBSE	;JA
  44E1*   DD B6 0B       C      	OR	(IX+11)	;Paritybit setzen
  44E4*   18 07          C      	JR	LR.LBSE
                         C      
  44E6*                  C      LR.LBS1:
  44E6*   B7             C      	OR	A	;  gerade Paritaet ?
  44E7*   EA 44ED*       C      	JP	PE,LR.LBSE	;JA
  44EA*   DD B6 0B       C      	OR	(IX+11)	;Paritybit seten
                         C      
  44ED*                  C      LR.LBSE:
  44ED*   C1             C      	POP	BC
  44EE*   F5             C      	PUSH	AF
                         C      
                         C      	IF	LR.LBGEN AND 1
  44EF*   0D             C      	DEC	C
  44F0*   AF             C      	XOR	A	;ALB aktivieren
  44F1*   ED 79          C      	OUT	(C),A	;Adresse + 4 : PIO 2, Port A, Daten
  44F3*   0C             C      	INC	C
                         C      	ENDIF
                         C      	IF	LR.LBGEN AND 2
'Lochband-Geraete-Treiber Ausgaberoutine'	MACRO-80 3.44	09-Dec-81	PAGE	1-98


                         C      	LD	A,7	;SIF1000 - Kommando ausgeben
                         C      	OUT	(C),A	;Adresse + 1 : PIO 1, Port B, Daten
                         C      	IN	A,(C)
                         C      	DEC	C
                         C      	ENDIF
                         C      
  44F4*   F1             C      	POP	AF
  44F5*   ED 79          C      	OUT	(C),A	;Adresse + 5 : PIO 2, Port B, Daten
                         C      			;Adresse + 0 : PIO 1, Port A, Daten
                         C      
                         C      	IF	LR.LBGEN AND 1
  44F7*   0D             C      	DEC	C
                         C      	ENDIF
                         C      	IF	LR.LBGEN AND 2
                         C      	INC	C
                         C      	ENDIF
                         C      
  44F8*   FB             C      	EI
  44F9*   76             C      	HALT
                         C      
                         C      	IF	LR.LBGEN AND 1
  44FA*   3E 10          C      	LD	A,10H	;ALB sperren
  44FC*   ED 79          C      	OUT	(C),A	;Adresse + 4
                         C      	ENDIF
                         C      
  44FE*   F1             C      	POP	AF	;I-Register alten Zustand laden
  44FF*   ED 47          C      	LD	I,A
  4501*   F1             C      	POP	AF	;Register laden
  4502*   C1             C      	POP	BC
  4503*   E1             C      	POP	HL
  4504*   C9             C      	RET
                         C      ;****************************************************************
                         C      ;*                  Interruptroutine Lochbandstanzer            *
                         C      ;****************************************************************
  4505*                  C      LR.IRLBS	EQU	$
                         C      
                         C      	IF	LR.LBGEN AND 1
  4505*   ED 78          C      	IN	A,(C)	;Adresse + 4,(C)
  4507*   CB 5F          C      	BIT	3,A
  4509*   20 FA          C      	JR	NZ,LR.IRLBS
  450B*   CB 47          C      	BIT	0,A
  450D*   20 F6          C      	JR	NZ,LR.IRLBS
                         C      	ENDIF
                         C      
  450F*   FB             C      	EI
  4510*   ED 4D          C      	RETI
                         C      
                         C      	TITLE	'Lochband-Geraete-Treiber Eingaberoutine'
                         C      	PAGE
'Lochband-Geraete-Treiber Eingaberoutine'	MACRO-80 3.44	09-Dec-81	PAGE	1-99


                         C      
                         C      ;****************************************************************
                         C      ;*                  Eingabe eines Zeichens vom Lochbandleser    *
                         C      ;****************************************************************
  4512*                  C      LR.LBL:
  4512*   E5             C      	PUSH	HL	;Register retten
  4513*   C5             C      	PUSH	BC
  4514*   ED 57          C      	LD	A,I	;I-Register retten
  4516*   F5             C      	PUSH	AF
  4517*   3E 44*         C      	LD	A,HIGH(LR.IRLB)	;I-Register fuer LB laden
  4519*   ED 47          C      	LD	I,A
                         C      
                         C      	IF	LR.LBGEN AND 1
  451B*   3E E8          C      	LD	A,0E8H	;Basisadresse ALB
                         C      	ENDIF
                         C      	IF	LR.LBGEN AND 2
                         C      	LD	A,0	;Basisadresse ADA
                         C      	ENDIF
                         C      
  451D*                  C      LR.ILBL:
  451D*   F3             C      	DI
                         C      
                         C      	IF	LR.LBGEN AND 1
  451E*   C6 02          C      	ADD	A,2
                         C      	ENDIF
                         C      	IF	LR.LBGEN AND 2
                         C      	ADD	A,6
                         C      	ENDIF
                         C      
  4520*   4F             C      	LD	C,A
                         C      
  4521*   06 03          C      	LD	B,3
  4523*   21 4594*       C      	LD	HL,LR.SWLBL
  4526*   ED B3          C      	OTIR		;Adresse + 2 : PIO 1, Port A, Steuer
                         C      			;Adresse + 6 : PIO 2, Port A, Steuer
                         C      
  4528*   0C             C      	INC	C
  4529*   06 03          C      	LD	B,3
  452B*   ED B3          C      	OTIR		;Adresse + 3 : PIO 1, Port B, Steuer
                         C      			;Adresse + 7 : PIO 2, Port B, Steuer
                         C      
  452D*   0D             C      	DEC	C
  452E*   0D             C      	DEC	C
                         C      
                         C      	IF	LR.LBGEN AND 1
  452F*   0D             C      	DEC	C
  4530*   DD 7E 04       C      	LD	A,(IX+4)	;Kommando: 0 ... Lesen rueckwaerts
  4533*   E6 02          C      	AND	002H	;          2 ... Lesen vorwaerts
  4535*   ED 79          C      	OUT	(C),A	;Adresse + 0 : PIO 1, Port A, Daten
  4537*   0C             C      	INC	C
                         C      	ENDIF
                         C      	IF	LR.LBGEN AND 2
                         C      	LD	A,(IX+4)	;Kommando: 0 ... Lesen rueckwaerts
                         C      	AND	002H	;          2 ... Lesen vorwaerts
                         C      	CP	2	;rueckwaerts ?
                         C      	JR	NZ,$+6	;NEIN
                         C      	LD	A,3
                         C      	JR	$+4
                         C      	LD	A,7
                         C      	OUT	(C),A	;Adresse + 5 : PIO 2, Port B, Daten
                         C      	DEC	C
                         C      	ENDIF
                         C      
                         C      			;Eingabe des Datenbyte <====
  4538*   ED 78          C      	IN	A,(C)	;Adresse + 1 : PIO 1, Port B, Daten,(C)
  453A*   DD 36 03 00    C      	LD	(IX+3),0
  453E*   DD BE 0C       C      	CP	(IX+12)	;Zeichen = EOF ?
  4541*   20 04          C      	JR	NZ,LR.LBL2	;NEIN
  4543*   DD CB 03 C6    C      	SET	0,(IX+3)
                         C      
  4547*                  C      LR.LBL2:
  4547*   DD 46 04       C      	LD	B,(IX+4)	;Kommandobyte
  454A*   CB 78          C      	BIT	7,B	;mit Paritaet ?
  454C*   28 03          C      	JR	Z,LR.LBL3	;NEIN
  454E*   DD A6 0B       C      	AND	(IX+11)	;Paritybyte
  4551*                  C      LR.LBL3:
  4551*   DD BE 00       C      	CP	(IX+0)	;EOR extern ?
  4554*   20 04          C      	JR	NZ,LR.LBL4	;NEIN
  4556*   DD CB 03 CE    C      	SET	1,(IX+3)
  455A*                  C      LR.LBL4:
  455A*   CD 448A*       C      	CALL	LR.KONV1
  455D*   CB 50          C      	BIT	2,B	;EOR-Umwandlung ?
'Lochband-Geraete-Treiber Eingaberoutine'	MACRO-80 3.44	09-Dec-81	PAGE	1-100


  455F*   28 09          C      	JR	Z,LR.LBLE	;NEIN
  4561*   DD CB 03 4E    C      	BIT	1,(IX+3)	;war EOR-Zeichen ?
  4565*   28 03          C      	JR	Z,LR.LBLE	;NEIN
  4567*   DD 7E 01       C      	LD	A,(IX+1)	;EOR intern
                         C      
  456A*                  C      LR.LBLE:
  456A*   F5             C      	PUSH	AF
  456B*   0D             C      	DEC	C
  456C*   FB             C      	EI
  456D*   76             C      	HALT
                         C      
  456E*   F1             C      	POP	AF
  456F*   C1             C      	POP	BC	;I-Register laden
  4570*   F5             C      	PUSH	AF
  4571*   78             C      	LD	A,B
  4572*   ED 47          C      	LD	I,A
  4574*   F1             C      	POP	AF
  4575*   C1             C      	POP	BC
  4576*   E1             C      	POP	HL
  4577*   DD CB 04 6E    C      	BIT	5,(IX+4)	;mit NUL und DEL ?
  457B*   C8             C      	RET	Z		;NEIN
  457C*   FE 00          C      	CP	0	;Zeichen = NUL ?
  457E*   28 92          C      	JR	Z,LR.LBL	;JA
  4580*   FE 7F          C      	CP	7FH	;Zeichen = DEL ?
  4582*   28 8E          C      	JR	Z,LR.LBL	;JA
  4584*   C9             C      	RET
                         C      ;****************************************************************
                         C      ;*                  Interruptroutine Lochbandleser              *
                         C      ;****************************************************************
  4585*                  C      LR.IRLBL	EQU	$
                         C      
                         C      	IF	LR.LBGEN AND 1
  4585*   ED 78          C      	IN	A,(C)	;Adresse + 0,(C)
  4587*   CB 67          C      	BIT	4,A
  4589*   20 FA          C      	JR	NZ,LR.IRLBL
                         C      	ENDIF
                         C      
  458B*   FB             C      	EI
  458C*   ED 4D          C      	RETI
                         C      
                         C      	PAGE
'Lochband-Geraete-Treiber Eingaberoutine'	MACRO-80 3.44	09-Dec-81	PAGE	1-101


                         C      
                         C      ;****************************************************************
                         C      ;*                  PIO - Steuerworte fuer Stanzen              *
                         C      ;****************************************************************
  458E*                  C      LR.SWLBS	EQU	$
                         C      
                         C      	IF	LR.LBGEN AND 1	;fuer   +++   ALB   +++
  458E*   CF             C      	DB	0CFH	;MODE 3 : BIT Ein-/Ausgabe
  458F*   0F             C      	DB	00FH	;             Ein-/Ausgabe - Maske
  4590*   03             C      	DB	003H	;Interrupt AUS
                         C      
  4591*   0F             C      	DB	00FH	;MODE 0 : BYTE Ausgabe
  4592*   76*            C      	DB	LOW(LR.IRLB)
  4593*   83             C      	DB	083H	;Interrupt EIN
                         C      	ENDIF
                         C      
                         C      
                         C      	IF	LR.LBGEN AND 2	;fuer   +++   ADA   +++
                         C      	DB	00FH	;MODE 0 : BYTE Ausgabe
                         C      	DB	LOW(LR.IRLB)
                         C      	DB	083H	;Interrupt EIN
                         C      
                         C      	DB	0CFH	;MODE 3 : BIT Ein-/Ausgabe
                         C      	DB	0F0H	;             Ein-/Ausgabe - Maske
                         C      	DB	003H	;Interrupt AUS
                         C      	ENDIF
                         C      ;****************************************************************
                         C      ;*                  PIO - Steuerworte fuer Lesen                *
                         C      ;****************************************************************
  4594*                  C      LR.SWLBL	EQU	$
                         C      
                         C      	IF	LR.LBGEN AND 1	;fuer   +++   ALB   +++
  4594*   CF             C      	DB	0CFH	;MODE 3 : BIT Ein-/Ausgabe
  4595*   F0             C      	DB	0F0H	;             Ein-/Ausgabe - Maske
  4596*   03             C      	DB	003H	;Interrupt AUS
                         C      
  4597*   4F             C      	DB	04FH	;MODE 1 : BYTE Eingabe
  4598*   78*            C      	DB	LOW(LR.IRLB+2)
  4599*   83             C      	DB	083H	;Interrupt EIN
                         C      	ENDIF
                         C      
                         C      
                         C      	IF	LR.LBGEN AND 2	;fuer   +++   ADA   +++
                         C      	DB	04FH	;MODE 1 : BYTE Eingabe
                         C      	DB	LOW(LR.IRLB+2)
                         C      	DB	083H	;Interrupt EIN
                         C      
                         C      	DB	0CFH	;MODE 3 : BIT Ein-/Ausgabe
                         C      	DB	0F0H	;             Ein-/Ausgabe - Maske
                         C      	DB	003H	;Interrupt AUS
                         C      	ENDIF
                         C      
                         C      	PAGE
'Lochband-Geraete-Treiber Eingaberoutine'	MACRO-80 3.44	09-Dec-81	PAGE	1-102


                         C      
                         C      ;****************************************************************
                         C      ;*                  Standard-Anwendercode-Tabelle               *
                         C      ;****************************************************************
                         C      ;	ORG	07200H
  459A*                  C      LR.SKTBI:
  459A*                  C      	DEFS	00100H,0
                         C      
  469A*                  C      LR.SKTBO:
  469A*                  C      	DEFS	00100H,0
                         C      
                         C      			;(C) Marcus Herbote    K EAW / wfvm
                         C      ;	END
                                
                         C      	INCLUDE P108.MAC	; Drucker-Routinen
                         C      	TITLE	'Drucker-Verbindungsmodul'
                         C      	PAGE
'Drucker-Verbindungsmodul'	MACRO-80 3.44	09-Dec-81	PAGE	1-103


                         C      
                         C      ;	PN	PR07
                         C      ;****************************************************************
                         C      ;*               Drucker-Verbindungsmodul fuer Version 1.2      *
                         C      ;*  Version      -----------------------------------------------*
                         C      ;*               Programmierer: M. Herbote --- K EAW  ZFT (WFT) *
                         C      ;*  V 1 . 2      -----------------------------------------------*
                         C      ;*               Stand        : 21.August 1984                  *
                         C      ;****************************************************************
  479A*                  C      PR.PRINA:
  479A*   C5             C      	PUSH	BC
  479B*   4F             C      	LD	C,A
  479C*   DD 21 0F73*    C      	LD	IX,SM.EADRU+3
  47A0*   CD 48F0*       C      	CALL	P1.PRIO
  47A3*   C1             C      	POP	BC
  47A4*   C9             C      	RET
                         C      
                         C      
  47A5*   47A5*          C      	DW	$
  47A7*   44 49 4E 49    C      	DB	'DINI'
  47AB*   DD 21 0F73*    C      	LD	IX,SM.EADRU+3
  47AF*   3E 58*         C      	LD	A,LOW(SY.ISRA0)
  47B1*   DD 77 03       C      	LD	(IX+3),A
  47B4*   AF             C      	XOR	A
  47B5*   DD 77 0B       C      	LD	(IX+11),A
  47B8*   3A 3327        C      	LD	A,(PR.PAR)	;char per inch
  47BB*   FE 30          C      	CP	'0'
  47BD*   28 0A          C      	JR	Z,PR.CPI10
  47BF*   FE 32          C      	CP	'2'
  47C1*   20 0A          C      	JR	NZ,PR.CPI
  47C3*   DD CB 04 C6    C      	SET	0,(IX+4)
  47C7*   18 04          C      	JR	PR.CPI
  47C9*                  C      PR.CPI10:
  47C9*   DD CB 04 86    C      	RES	0,(IX+4)
  47CD*                  C      PR.CPI:
  47CD*   3A 3328        C      	LD	A,(PR.PAR+1)	;line per inch
  47D0*   FE 36          C      	CP	'6'
  47D2*   28 0A          C      	JR	Z,PR.LPI6
  47D4*   FE 38          C      	CP	'8'
  47D6*   20 0A          C      	JR	NZ,PR.LPI
  47D8*   DD CB 04 CE    C      	SET	1,(IX+4)
  47DC*   18 04          C      	JR	PR.LPI
  47DE*                  C      PR.LPI6:
  47DE*   DD CB 04 8E    C      	RES	1,(IX+4)
  47E2*                  C      PR.LPI:
  47E2*   3A 3329        C      	LD	A,(PR.PAR+2)	;ohne/mit Nulldurchstreichung
  47E5*   FE 4F          C      	CP	'O'
  47E7*   28 08          C      	JR	Z,PR.ONULL
  47E9*   FE 4D          C      	CP	'M'
  47EB*   20 04          C      	JR	NZ,PR.ONULL
  47ED*   3E FF          C      	LD	A,-1
  47EF*   18 01          C      	JR	PR.NULL
  47F1*                  C      PR.ONULL:
  47F1*   AF             C      	XOR	A
  47F2*                  C      PR.NULL:
  47F2*   DD 77 0C       C      	LD	(IX+12),A
  47F5*   CD 4882*       C      	CALL	P1.MRES
  47F8*                  C      PR.SYS:
  47F8*   C3 000B*       C      	JP	SY.SYSTB
                         C      
                         C      	PAGE
'Drucker-Verbindungsmodul'	MACRO-80 3.44	09-Dec-81	PAGE	1-104


                         C      
                         C      ;****************************************************************
                         C      ;*               EDITOR-Raum der Version 1 alles drucken        *
                         C      ;****************************************************************
  47FB*   47FB*          C      	DW	$
  47FD*   50 52 45 54    C      	DB	'PRET'
  4801*   DD 21 0F73*    C      	LD	IX,SM.EADRU+3
  4805*   21 8831        C      	LD	HL,SD.TPA+1
  4808*   CD 4874*       C      	CALL	PR.END
  480B*   DA 000B*       C      	JP	C,SY.SYSTB
  480E*   2B             C      	DEC	HL
  480F*                  C      PR.M2:
  480F*   CD 4874*       C      	CALL	PR.END
  4812*   CA 000B*       C      	JP	Z,SY.SYSTB
  4815*   4E             C      	LD	C,(HL)
  4816*   CD 48F0*       C      	CALL	P1.PRIO
  4819*   23             C      	INC	HL
  481A*   18 F3          C      	JR	PR.M2
                         C      ;****************************************************************
                         C      ;*               Seitenvorschub bei  1 1 5 2 / 1 1 5 7          *
                         C      ;****************************************************************
  481C*   481C*          C      	DW	$
  481E*   50 41 47 45    C      	DB	'PAGE'
  4822*   DD 21 0F73*    C      	LD	IX,SM.EADRU+3
  4826*   0E 0C          C      	LD	C,00CH
  4828*   CD 48F0*       C      	CALL	P1.PRIO
  482B*   18 CB          C      	JR	PR.SYS
                         C      
                         C      	PAGE
'Drucker-Verbindungsmodul'	MACRO-80 3.44	09-Dec-81	PAGE	1-105


                         C      
                         C      ;****************************************************************
                         C      ;*               EDITOR-Raum der Version 1  von anz  drucken    *
                         C      ;****************************************************************
  482D*   482D*          C      	DW	$
  482F*   50 52 49 4E    C      	DB	'PRIN'
  4833*   DD 21 0F73*    C      	LD	IX,SM.EADRU+3
  4837*   11 3327        C      	LD	DE,PR.PAR
  483A*   CD 05A5*       C      	CALL	S1.IDH
  483D*   E5             C      	PUSH	HL
  483E*   13             C      	INC	DE
  483F*   CD 05A5*       C      	CALL	S1.IDH
  4842*   E3             C      	EX	(SP),HL
  4843*   EB             C      	EX	DE,HL
  4844*   21 882F        C      	LD	HL,SD.TPA-1
  4847*                  C      PR.PR1:
  4847*   1B             C      	DEC	DE
  4848*   7A             C      	LD	A,D
  4849*   B3             C      	OR	E
  484A*   28 0E          C      	JR	Z,PR.PR3
  484C*   3E 1E          C      	LD	A,01EH
  484E*                  C      PR.PR2:
  484E*   23             C      	INC	HL
  484F*   CD 4874*       C      	CALL	PR.END
  4852*   CA 000B*       C      	JP	Z,SY.SYSTB
  4855*   BE             C      	CP	(HL)
  4856*   20 F6          C      	JR	NZ,PR.PR2
  4858*   18 ED          C      	JR	PR.PR1
  485A*                  C      PR.PR3:
  485A*   D1             C      	POP	DE
  485B*   23             C      	INC	HL
  485C*                  C      PR.PR4:
  485C*   CD 4874*       C      	CALL	PR.END
  485F*   CA 000B*       C      	JP	Z,SY.SYSTB
  4862*   4E             C      	LD	C,(HL)
  4863*   CD 48F0*       C      	CALL	P1.PRIO
  4866*   23             C      	INC	HL
  4867*   3E 1E          C      	LD	A,01EH
  4869*   B9             C      	CP	C
  486A*   20 F0          C      	JR	NZ,PR.PR4
  486C*   1B             C      	DEC	DE
  486D*   7A             C      	LD	A,D
  486E*   B3             C      	OR	E
  486F*   20 EB          C      	JR	NZ,PR.PR4
  4871*   C3 000B*       C      	JP	SY.SYSTB
                         C      
  4874*                  C      PR.END:
  4874*   E5             C      	PUSH	HL
  4875*   D5             C      	PUSH	DE
  4876*   ED 5B 0DC6*    C      	LD	DE,(SM.END)
  487A*   EB             C      	EX	DE,HL
  487B*   B7             C      	OR	A
  487C*   ED 52          C      	SBC	HL,DE
  487E*   D1             C      	POP	DE
  487F*   E1             C      	POP	HL
  4880*   C9             C      	RET
                         C      
  3327                   C      PR.PAR EQU	SD.BWSA	+ 10*80 + 7
                         C      
                         C      ;	END
                         C      	TITLE	'Drucker-Routine'
                         C      	PAGE
'Drucker-Routine'	MACRO-80 3.44	09-Dec-81	PAGE	1-106


                         C      
                         C      ;	PN	P108
                         C      ;****************************************************************
                         C      ;*               Drucker-Routine  1152 , 1154 , 1156 , 1157     *
                         C      ;*                                BD 4000 , S 6001              *
                         C      ;*               -----------------------------------------------*
                         C      ;*               Programmierer: M. Herbote --- K EAW  ZFT (WFT) *
                         C      ;*               -----------------------------------------------*
                         C      ;*               Stand        : 17.August 1984                  *
                         C      ;****************************************************************
                         C      
                         C      ;****************************************************************
                         C      ;*               Aufbau der E/A-Tabelle  (Adresse ueber  IX)    *
                         C      ;*               ===============================================*
                         C      ;*                                                              *
                         C      ;*               Byte  ! Bedeutung                              *
                         C      ;*               ------!----------------------------------------*
                         C      ;*               -  3  ! Laengenbyte                            *
                         C      ;*               -  2  ! Praefixbyte 1                          *
                         C      ;*               -  1  ! Praefixbyte 2                          *
                         C      ;*                  0  ! Status - "1BH"-Merker                  *
                         C      ;*                  1  ! Fehlerschluessel      (z.Z. unbenutzt) *
                         C      ;*                  2  ! Basisadresse (wird bei DINIT gesetzt)  *
                         C      ;*                  3  ! L-Teil Interruptvektor, bei INT-Betrieb*
                         C      ;*                  4  ! Kommando bei DINIT                     *
                         C      ;*                     ! bit 0 = 0 ...   CPI = 10 Zoll          *
                         C      ;*                     !       = 1 ...   CPI = 12 Zoll          *
                         C      ;*                     !     1 = 0 ...   LPI =  6 Zoll          *
                         C      ;*                     !       = 1 ...   LPI =  8 Zoll          *
                         C      ;*                  5  ! Adresse Eintrittspunkt (z.Z.unbenutzt) *
                         C      ;*                  7  ! Blockadresse          (z.Z. unbenutzt) *
                         C      ;*                  9  ! Blocklaenge           (z.Z. unbenutzt) *
                         C      ;*                 11  ! Wert fuer Farbbandstellung             *
                         C      ;*                 12  ! ungleich Null ...  Nulldurchstreichung *
                         C      ;****************************************************************
                         C      
                         C      	PAGE	
'Drucker-Routine'	MACRO-80 3.44	09-Dec-81	PAGE	1-107


                         C      
  0000                   C      P1.ES2   EQU   00H              ;00H ... Generierung   D E G 2 0 0 0
                         C                                      ;4xH ... Generierung   E S   2 0 0 0
                         C      
  0002                   C      P1.DRU   EQU   00000010B        ;Drucker Typ
                         C                                      ;Bit 0  ...   1152/1157  PIO
                         C                                      ;    1  ...   1152/1157  SIO
                         C                                      ;    2  ...   1154       GNI
                         C                                      ;    3  ...   1154       ASCII
                         C                                      ;    4  ...
                         C                                      ;    5  ...
                         C                                      ;    6  ...   BD 4000
                         C                                      ;    7  ...   S 6001
                         C      
  0008                   C      P1.ANST   EQU   00001000B       ;Ansteuerung
                         C                                      ;Bit 0  ...   A D A
                         C                                      ;    1  ...   A T D 1
                         C                                      ;    2  ...   A T D 2
                         C                                      ;    3  ...   A T S
                         C                                      ;    4  ...
                         C                                      ;    5  ...   S-A1
                         C                                      ;    6  ...   S-A2
                         C                                      ;    7  ...   S-A3
                         C      
  4881*                  C      P1.PRINT:
  4881*   C9             C      	RET
                         C      	
                         C      	IF	P1.DRU AND 00000011B
  0001                   C      P1.PIO   EQU   1                ;1 ... PIO-Schnittstelle 1
                         C                                      ;2 ... PIO-Schnittstelle 2
                         C      	ENDIF
                         C      
                         C      ;	ORG	07C00H
                         C      	IF	P1.ES2 AND 40H
                         C      P1.DINIT:
                         C      	JP	P1.MRES
                         C      P1.PRINT:
                         C      	JP	P1.PRI
                         C      	DB	'...'
                         C      	DB	P1.ES2
                         C      	DW	0
                         C      	DW	0
                         C      	DB	0
                         C      
                         C      P1.PRI:
                         C      	PUSH	AF
                         C      	LD	A,C
                         C      	CP	20H
                         C      	JR	NC,PRI1
                         C      	CP	1EH
                         C      	JR	Z,PRI1
                         C      	POP	AF
                         C      	RET
                         C      P1.PRI1:
                         C      	POP	AF
                         C      	JP	PRIO
                         C      	ENDIF
                         C      
                         C      	TITLE	'Drucker-Initialisierung'
                         C      	PAGE
'Drucker-Initialisierung'	MACRO-80 3.44	09-Dec-81	PAGE	1-108


                         C      
                         C      ;****************************************************************
                         C      ;*               Drucker - Initialisierung                      *
                         C      ;****************************************************************
  4882*                  C      P1.MRES:
  4882*   F5             C      	PUSH	AF	;Register retten
  4883*   C5             C      	PUSH	BC
  4884*   D5             C      	PUSH	DE
  4885*   E5             C      	PUSH	HL
  4886*   DD E5          C      	PUSH	IX
  4888*   FD E5          C      	PUSH	IY
                         C      
                         C      
                         C      ;                B a s i s a d r e s s e   bereitstellen
                         C      
                         C      	IF	P1.ANST AND 10000000B
                         C      	LD	C,088H	;Koppelinterface
                         C      	ENDIF
                         C      
                         C      	IF	P1.ANST AND 00001000B
  488A*   0E B0          C      	LD	C,0B0H	;A T S
                         C      	ENDIF
                         C      
                         C      	IF	P1.ANST AND 00000110B
                         C      	LD	C,0B8H	;A T D
                         C      	ENDIF
                         C      
                         C      	IF	P1.ANST AND 00000001B
                         C      	LD	C,040H	;A D A
                         C      	ENDIF
                         C      
                         C      
                         C      	IF	P1.ANST AND 10001111B
  488C*   DD 71 02       C      	LD	(IX+2),C	;Basisadresse in E/A-Tabelle setzen
                         C      	ENDIF
                         C      
                         C      	PAGE
'Drucker-Initialisierung'	MACRO-80 3.44	09-Dec-81	PAGE	1-109


                         C      
                         C      	IF	P1.DRU AND 1
                         C      	IF	P1.ANST AND 6
                         C      ;****************************************************************
                         C      ;*               Drucker  1 1 5 2 / 1 1 5 7  ueber  A T D       *
                         C      ;****************************************************************
                         C      	LD	A,08FH
                         C      	INC	C
                         C      
                         C      	IF	P1.ANST AND 2
                         C      	INC	C
                         C      	ENDIF
                         C      
                         C      	OUT	(C),A	;Adresse ( + 2 / + 1 )
                         C      	LD	A,0CFH
                         C      	INC	C
                         C      
                         C      	IF	P1.ANST AND 4
                         C      	INC	C
                         C      	ENDIF
                         C      
                         C      	OUT	(C),A	;Adresse + 3
                         C      	LD	A,0FEH
                         C      	OUT	(C),A	;Adresse + 3
                         C      	LD	A,3
                         C      	OUT	(C),A	;Adresse + 3
                         C      	DEC	C
                         C      
                         C      	IF	P1.ANST AND 4
                         C      	DEC	C
                         C      	ENDIF
                         C      
                         C      	OUT	(C),A	;Adresse ( + 2 / + 1 )
                         C      	LD	A,1
                         C      
                         C      	IF	P1.ANST AND 2
                         C      	DEC	C
                         C      	ENDIF
                         C      
                         C      	IF	P1.ANST AND 4
                         C      	INC	C
                         C      	ENDIF
                         C      
                         C      	OUT	(C),A	;Adresse ( + 1 / + 2 )
                         C      	XOR	A
                         C      	OUT	(C),A	;Adresse ( + 1 / + 2 )
                         C      	DEC	C
                         C      
                         C      	IF	P1.ANST AND 4
                         C      	DEC	C
                         C      	ENDIF
                         C      
                         C      	IN	A,(C)	;Adresse + 0,(C)
                         C      	BIT	0,(IX+4)	;char per inch
                         C      	JR	Z,$+7
                         C      	LD	HL,P1.CPI12	;=1 ... 12 CPI
                         C      	JR	$+5
                         C      	LD	HL,CPI10	;=0 ... 10 CPI
                         C      	CALL	P1.CPI
                         C      
                         C      	BIT	1,(IX+4)	;char per line
                         C      	JR	Z,$+7
                         C      	LD	HL,LPI8	;=1 ...  8 LPI
                         C      	JR	$+5
                         C      	LD	HL,LPI6	;=0 ...  6 LPI
                         C      	CALL	P1.CPI
                         C      	ENDIF
                         C      
                         C      	ENDIF
                         C      
                         C      	PAGE
'Drucker-Initialisierung'	MACRO-80 3.44	09-Dec-81	PAGE	1-110


                         C      
                         C      	IF	P1.DRU AND 4
                         C      	IF	P1.ANST AND 1
                         C      ;****************************************************************
                         C      ;*               Drucker  1 1 5 4 / GNI ueber  A D A            *
                         C      ;****************************************************************
                         C      	LD	A,00FH
                         C      	INC	C
                         C      	INC	C
                         C      	OUT	(C),A	;Adresse + 2
                         C      	LD	A,(IX+3)	;L-Teil Interruptvektor
                         C      	OUT	(C),A	;Adresse + 2
                         C      	LD	A,083H
                         C      	OUT	(C),A	;Adresse + 2
                         C      	LD	A,0CFH
                         C      	INC	C
                         C      	OUT	(C),A	;Adresse + 3
                         C      	LD	A,0F0H
                         C      	OUT	(C),A	;Adresse + 3
                         C      	LD	A,(IX+11)	;00H bzw. 04H Farbbandstellung
                         C      	AND	4
                         C      	DEC	C
                         C      	DEC	C
                         C      	OUT	(C),A	;Adresse + 1
                         C      	ENDIF
                         C      	ENDIF
                         C      
                         C      	IF	P1.DRU AND 80H
                         C      	IF	P1.ANST AND 80H
                         C      ;****************************************************************
                         C      ;*               Schreibmaschine S 6 0 0 1  ueber Koppelinterf. *
                         C      ;****************************************************************
                         C      	PUSH	BC
                         C      	INC	C
                         C      	INC	C
                         C      	LD	HL,P1.STW
                         C      	LD	B,2
                         C      	OTIR		;Adresse + 2   Kanal A
                         C      	INC	C
                         C      	LD	B,3
                         C      	OTIR		;Adresse + 3   Kanal B
                         C      	POP	BC
                         C      
                         C      	BIT	0,(IX+4)	;char per inch
                         C      	JR	Z,$+6
                         C      	LD	A,6	;=1 ... 12 CPI
                         C      	JR	$+4
                         C      	LD	A,5	;=0 ... 10 CPI
                         C      	CALL	P1.ZEI
                         C      	BIT	1,(IX+4)	;line per inch
                         C      	JR	Z,$+6
                         C      	LD	A,3	;=1 ... 1 1/2 zeilig
                         C      	JR	$+4
                         C      	LD	A,2	;=0 ... 1     zeilig
                         C      	CALL	P1.ZEI
                         C      	ENDIF
                         C      	ENDIF
                         C      
                         C      	PAGE
'Drucker-Initialisierung'	MACRO-80 3.44	09-Dec-81	PAGE	1-111


                         C      
                         C      	IF	P1.DRU AND 40H
                         C      	IF	P1.ANST AND 1
                         C      ;****************************************************************
                         C      ;*               Bediendrucker  4 0 0 0   ueber  A D A          *
                         C      ;****************************************************************
                         C      	INC	C	;Control Kanal A
                         C      	INC	C
                         C      	LD	A,(IX+3)	;L(Adr. Interruptadress-Tabelle)
                         C      	OUT	(C),A	;Adresse + 2
                         C      	LD	A,00FH	;Modus 0 = Byte-Ausgabe
                         C      	OUT	(C),A
                         C      	LD	A,083H	;Interrupt-Freigabe
                         C      	OUT	(C),A
                         C      	INC	C	;Control Kanal B
                         C      	LD	A,0CFH	;Modus 3 = Bit-E/A
                         C      	OUT	(C),A	;Adresse + 3
                         C      	LD	A,060H	;E: Bit 6,5 (Status)
                         C      	OUT	(C),A	;   (wird nicht ausgewertet)
                         C      	LD	A,007H	;keine Interruptfreigabe
                         C      	DEC	C
                         C      	DEC	C	;Daten Kanal B (Kommandos)
                         C      	XOR	A	;0: FBU
                         C      	OUT	(C),A
                         C      	DEC	C	;Daten Kanal A
                         C      	LD	A,022H	; schwarz (Grundstellung)
                         C      	BIT	2,(IX+11)
                         C      	JR	Z,$+3
                         C      	DEC	A	;21H rot
                         C      	OUT	(C),A
                         C      	INC	C	;Daten Kanal B
                         C      	LD	A,001H	;Kommando 01H: Druck lt. Code-Tabelle
                         C      	OUT	(C),A
                         C      	DEC	C	;bereit fuer Druck Daten auf Kanal A
                         C      	ENDIF
                         C      	ENDIF
                         C      
                         C      	PAGE
'Drucker-Initialisierung'	MACRO-80 3.44	09-Dec-81	PAGE	1-112


                         C      
                         C      	IF	P1.DRU AND 00001000B
                         C      	IF	P1.ANST AND 1
                         C      ;****************************************************************
                         C      ;*               Drucker  1 1 5 4 / ASCII  ueber  A D A         *
                         C      ;****************************************************************
                         C      	INC	C
                         C      	INC	C
                         C      	LD	A,00FH	;Byte - Ausgabe
                         C      	OUT	(C),A	;Adresse + 2
                         C      	INC	C
                         C      	LD	A,0CFH	;Bit  - Ein-/Ausgabe
                         C      	OUT	(C),A	;Adresse + 3
                         C      	LD	A,0F0H
                         C      	OUT	(C),A
                         C      	DEC	C	;Ausgabe der Synchronisation
                         C      	DEC	C
                         C      	DEC	C
                         C      	XOR	A
                         C      	OUT	(C),A	;Adresse + 0
                         C      	INC	C
                         C      	LD	A,3	;PRIME und STROBE
                         C      	OUT	(C),A	;Adresse + 1
                         C      	LD	A,0
                         C      	OUT	(C),A
                         C      	LD	A,2	;STROBE
                         C      	OUT	(C),A
                         C      	XOR	A
                         C      	OUT	(C),A
                         C      P1.ASC1:
                         C      	IN	A,(C)
                         C      	BIT	7,0
                         C      	JR	Z,P1.ASC2
                         C      	LD	A,1
                         C      	OUT	(C),A
                         C      	XOR	A
                         C      	OUT	(C),A
                         C      	DEC	C
                         C      	CALL	P1.ZEIZ
                         C      	INC	C
                         C      	JR	P1.ASC1
                         C      P1.ASC2:
                         C      	DEC	C
                         C      	ENDIF
                         C      	ENDIF
                         C      
                         C      	PAGE
'Drucker-Initialisierung'	MACRO-80 3.44	09-Dec-81	PAGE	1-113


                         C      
                         C      	IF	P1.DRU AND 2
                         C      	IF	P1.ANST AND 8
                         C      ;****************************************************************
                         C      ;*               Drucker  1 1 5 2 / 1 1 5 7  ueber  A T S       *
                         C      ;****************************************************************
  488F*   0C             C      	INC	C
  4890*   0C             C      	INC	C
  4891*   0C             C      	INC	C
  4892*   21 497A*       C      	LD	HL,P1.SIOTB	;Initialisierung SIO  Kanal B
  4895*   06 0A          C      	LD	B,10
  4897*   ED B3          C      	OTIR		;Adresse + 3
                         C      
  4899*   3E 07          C      	LD	A,7	;Initialisierung CTC
  489B*   81             C      	ADD	A,C
  489C*   4F             C      	LD	C,A
  489D*   3E 07          C      	LD	A,7
  489F*   ED 79          C      	OUT	(C),A	;Adresse + 10
  48A1*   3E 01          C      	LD	A,1
  48A3*   ED 79          C      	OUT	(C),A
                         C      
  48A5*   79             C      	LD	A,C
  48A6*   D6 07          C      	SUB	7
  48A8*   4F             C      	LD	C,A
  48A9*                  C      P1.IN1:
  48A9*   0D             C      	DEC	C
  48AA*   ED 78          C      	IN	A,(C)	;Adresse + 2,(C)
  48AC*   0C             C      	INC	C
  48AD*   CD 4984*       C      	CALL	P1.STAT
  48B0*   20 F7          C      	JR	NZ,P1.IN1
  48B2*   0D             C      	DEC	C
  48B3*   0D             C      	DEC	C
  48B4*   0D             C      	DEC	C
                         C      
  48B5*   3E 7F          C      	LD	A,7FH
  48B7*   CD 4951*       C      	CALL	P1.ZEI
  48BA*   3E 00          C      	LD	A,0
  48BC*   CD 4951*       C      	CALL	P1.ZEI
                         C      
  48BF*   DD CB 04 46    C      	BIT	0,(IX+4)	;char per inch
  48C3*   28 05          C      	JR	Z,$+7
  48C5*   21 499C*       C      	LD	HL,P1.CPI12	;=1 ... 12 CPI
  48C8*   18 03          C      	JR	$+5
  48CA*   21 4997*       C      	LD	HL,P1.CPI10	;=0 ... 10 CPI
  48CD*   CD 49AB*       C      	CALL	P1.CPI
                         C      
  48D0*   DD CB 04 4E    C      	BIT	1,(IX+4)	;line per inch
  48D4*   28 05          C      	JR	Z,$+7
  48D6*   21 49A6*       C      	LD	HL,P1.LPI8	;=1 ...  8 LPI
  48D9*   18 03          C      	JR	$+5
  48DB*   21 49A1*       C      	LD	HL,P1.LPI6	;=0 ...  6 LPI
  48DE*   CD 49AB*       C      	CALL	P1.CPI
                         C      	ENDIF
                         C      	ENDIF
                         C      
                         C      	PAGE
'Drucker-Initialisierung'	MACRO-80 3.44	09-Dec-81	PAGE	1-114


                         C      
                         C      	IF	P1.DRU AND 10000000B
                         C      	IF	P1.ANST AND 01100000B
                         C      ;****************************************************************
                         C      ;*               Schreibmaschine S 6 0 0 1 ueber Spezialinterf. *
                         C      ;****************************************************************
                         C      	OUT	(C),8FH	;RESET Memory on SL6001
                         C      	XOR	A	;A=0
                         C      
                         C      	IF	P1.ANST AND 00100000B
                         C      	LD	C,8CH	;Adress
                         C      	OUT	(C),A	;Latching on Printboard
                         C      	OUT	(C),8AH	;Latching on SL6001
                         C      	OUT	(C),88H	;Sign on SL6001-Keyboard
                         C      	OUT	(C),8DH	;Delete Latch on Printboard
                         C      	LD	HL,400H
                         C      	CALL	P1.TIM
                         C      	INC	A
                         C      	CALL	P1.MR1
                         C      	XOR	A	;A=0
                         C      	CALL	P1.MR1
                         C      	OUT	(C),8FH	;RESET all
                         C      	LD	HL,4000H
                         C      	ENDIF
                         C      
                         C      	IF	P1.NST AND 01000000B
                         C      	CALL	P1.MR1
                         C      	LD	A,1
                         C      	CALL	P1.MR1
                         C      	OUT	(C),8FH
                         C      	LD	HL,2000H
                         C      	ENDIF
                         C      
                         C      	CALL	P1.TIM
                         C      	ENDIF
                         C      	ENDIF
                         C      
  48E1*   DD 36 00 01    C      	LD	(IX+0),1	;Merker CPI/LPI-Steuerzeichenfolgen
  48E5*   DD CB FF CE    C      	SET	1,(IX-1)	;OPEN - Bit setzen
  48E9*   DD CB FF D6    C      	SET	2,(IX-1)	;Richtungsbit: Ausgabe
  48ED*   C3 4948*       C      	JP	P1.M2
                         C      
                         C      	PAGE
'Drucker-Initialisierung'	MACRO-80 3.44	09-Dec-81	PAGE	1-115


                         C      
                         C      	IF	P1.DRU AND 10000000B
                         C      
                         C      	IF	P1.ANST AND 01000000B
                         C      P1.MR1:
                         C      	OUT	(C),8CH
                         C      	OUT	(C),8DH
                         C      	LD	HL,16
                         C      	CALL	P1.TIM
                         C      	OUT	(C),8AH
                         C      	OUT	(C),8BH
                         C      	OUT	(C),88H
                         C      	LD	HL,300H
                         C      	CALL	P1.TIM
                         C      	RET
                         C      	ENDIF
                         C      
                         C      	IF	P1.ANST AND 00100000B
                         C      P1.MR1:
                         C      	OUT	(C),A	;latching on Printboard
                         C      	OUT	(C),8BH	;follow   on S 6001
                         C      	OUT	(C),8AH	;latching on S 6001
                         C      	LD	HL,400H
                         C      	CALL	P1.TIM
                         C      	RET
                         C      	ENDIF
                         C      
                         C      	IF	P1.ANST AND 01100000B
                         C      P1.PZKB	EQU	48	;number of lower-case signs at table
                         C      P1.PZGB	EQU	56	;number of upper-case signs at table
                         C      	ENDIF
                         C      
                         C      	IF	P1.ANST AND 10000000B
                         C      P1.STW:
                         C      	DB	00001111B	;Byteausgabe   Kanal A
                         C      	DB	00000011B	;INT-Sperre
                         C      	DB	11001111B	;Bit-Mode      Kanal B
                         C      	DB	11110000B	;I/O-Maske
                         C      	DB	00000011B	;INT-Sperre
                         C      	ENDIF
                         C      
                         C      	ENDIF
                         C      
                         C      	TITLE	'Zeichenausgabe an den Drucker'
                         C      	PAGE
'Zeichenausgabe an den Drucker'	MACRO-80 3.44	09-Dec-81	PAGE	1-116


                         C      
                         C      ;****************************************************************
                         C      ;*               Ausgabe eines Zeichens an den Drucker          *
                         C      ;****************************************************************
  48F0*                  C      P1.PRIO:
  48F0*   F5             C      	PUSH	AF	;Register retten
  48F1*   C5             C      	PUSH	BC
  48F2*   D5             C      	PUSH	DE
  48F3*   E5             C      	PUSH	HL
  48F4*   DD E5          C      	PUSH	IX
  48F6*   FD E5          C      	PUSH	IY
  48F8*   79             C      	LD	A,C	;auszugebendes Zeichen
                         C      
                         C      	IF	P1.ANST AND 10001111B
  48F9*   DD 4E 02       C      	LD	C,(IX+2)	;C  laden mit Basisadresse
                         C      	ENDIF
                         C      
  48FC*   DD CB FF 4E    C      	BIT	1,(IX-1)	;OPEN - Bit gesetzt ?
  4900*   28 46          C      	JR	Z,P1.M2	;nein
                         C      
                         C      	IF	P1.DRU AND 11111100B
                         C      	CP	0CH
                         C      	JR	Z,P1.M2
                         C      	ENDIF
                         C      
  4902*   FE 80          C      	CP	80H
  4904*   30 02          C      	JR	NC,$+4
  4906*   18 04          C      	JR	$+6
  4908*   3E 2E          C      	LD	A,'.'
  490A*   18 34          C      	JR	P1.M3
  490C*   FE 1B          C      	CP	1BH
  490E*   20 04          C      	JR	NZ,P1.CL1
  4910*   DD 36 00 05    C      	LD	(IX+0),5
  4914*                  C      P1.CL1:
  4914*   FE 1E          C      	CP	1EH	;Zeilenendezeichen
  4916*   28 2D          C      	JR	Z,P1.M1
                         C      
                         C      	IF	P1.DRU AND 10000011B
  4918*   47             C      	LD	B,A
  4919*   DD 35 00       C      	DEC	(IX+0)
  491C*   DD 7E 00       C      	LD	A,(IX+0)
  491F*   FE 00          C      	CP	0
  4921*   78             C      	LD	A,B
  4922*   28 02          C      	JR	Z,$+4	    ;-----+
  4924*   30 1A          C      	JR	NC,P1.M3	;     |
  4926*   DD 36 00 01    C      	LD	(IX+0),1	;<----+
  492A*   47             C      	LD	B,A	;Zeichen retten
  492B*   DD 7E 0C       C      	LD	A,(IX+12)	;Nullen durchstreichen ?
  492E*   B7             C      	OR	A
  492F*   78             C      	LD	A,B	;Zeichen zurueckladen
  4930*   28 0E          C      	JR	Z,P1.M3	;=0 ... nicht durchstreichen
  4932*   FE 30          C      	CP	'0'
  4934*   20 0A          C      	JR	NZ,P1.M3
  4936*   CD 4951*       C      	CALL	P1.ZEI
  4939*   3E 08          C      	LD	A,8
  493B*   CD 4951*       C      	CALL	P1.ZEI
  493E*   3E 2F          C      	LD	A,'/'
                         C      	ENDIF
                         C      
  4940*                  C      P1.M3:
  4940*   CD 4951*       C      	CALL	P1.ZEI
  4943*   18 03          C      	JR	P1.M2
  4945*                  C      P1.M1:
  4945*   CD 498C*       C      	CALL	P1.ZEIZ
  4948*                  C      P1.M2:
  4948*   FD E1          C      	POP	IY
  494A*   DD E1          C      	POP	IX
  494C*   E1             C      	POP	HL
  494D*   D1             C      	POP	DE
  494E*   C1             C      	POP	BC
  494F*   F1             C      	POP	AF
  4950*   C9             C      	RET
                         C      	PAGE
'Zeichenausgabe an den Drucker'	MACRO-80 3.44	09-Dec-81	PAGE	1-117


                         C      
  4951*                  C      P1.ZEI	EQU	$
                         C      
                         C      	IF	P1.DRU AND 4
                         C      	IF	P1.ANST AND 1
                         C      ;****************************************************************
                         C      ;*               1154/GNI  mit  A D A                           *
                         C      ;****************************************************************
                         C      	OUT	(C),A	;Adresse + 0
                         C      	EI
                         C      	HALT
                         C      	ENDIF
                         C      	ENDIF
                         C      
                         C      	IF	P1.DRU AND 00001000B
                         C      	IF	P1.ANST AND 1
                         C      ;****************************************************************
                         C      ;*               1154/ASCII mit  A D A                          *
                         C      ;****************************************************************
                         C      	CPL
                         C      	OUT	(C),A	;Adresse + 0
                         C      	INC	C
                         C      	LD	A,2	;STROBE
                         C      	OUT	(C),A	;Adresse + 1
                         C      	XOR	A
                         C      	OUT	(C),A
                         C      	DEC	C
                         C      	PUSH	DE
                         C      	LD	DE,0D00H
                         C      	DEC	DE
                         C      	LD	A,D
                         C      	OR	E
                         C      	JR	NZ,$-3
                         C      	POP	DE
                         C      	ENDIF
                         C      	ENDIF
                         C      
                         C      	IF	P1.DRU AND 40H
                         C      	IF	P1.ANST AND 1
                         C      ;****************************************************************
                         C      ;*               BD 4000 mit  A D A                             *
                         C      ;****************************************************************
                         C      	PUSH	AF
                         C      	AND	07FH	;herstellen gerade Paritaet
                         C      	JP	PE,$+5
                         C      	OR	080H
                         C      	OUT	(C),A	;Adresse + 0
                         C      	POP	AF
                         C      	EI
                         C      	HALT
                         C      	ENDIF
                         C      	ENDIF
                         C      
                         C      	PAGE
'Zeichenausgabe an den Drucker'	MACRO-80 3.44	09-Dec-81	PAGE	1-118


                         C      
                         C      	IF	P1.DRU AND 1
                         C      	IF	P1.ANST AND 6
                         C      ;****************************************************************
                         C      ;*               1152/1157  mit  A T D                          *
                         C      ;****************************************************************
                         C      	OUT	(C),A	;Adresse + 0
                         C      	INC	C
                         C      
                         C      	IF	P1.ANST AND 4
                         C      	INC	C
                         C      	ENDIF
                         C      
                         C      P1.M4:
                         C      	IN	A,(C)	;Adresse ( + 1 / + 2 ),(C)
                         C      
                         C      	IF	P1.ANST AND 2
                         C      	BIT	3,A
                         C      	ENDIF
                         C      
                         C      	IF	P1.ANST AND 4
                         C      	BIT	4,A
                         C      	ENDIF
                         C      
                         C      	JR	NZ,P1.M4
                         C      	DEC	C
                         C      
                         C      	IF	P1.ANST AND 4
                         C      	DEC	C
                         C      	ENDIF
                         C      
                         C      	IN	A,(C)	;Adresse + 0,(C)
                         C      	PUSH	BC
                         C      	LD	B,0
                         C      	DJNZ	0
                         C      	POP	BC
                         C      	ENDIF
                         C      	ENDIF
                         C      
                         C      	PAGE
'Zeichenausgabe an den Drucker'	MACRO-80 3.44	09-Dec-81	PAGE	1-119


                         C      
                         C      	IF	P1.DRU AND 2
                         C      	IF	P1.ANST AND 8
                         C      ;****************************************************************
                         C      ;*               1152/1157  mit  A T S                          *
                         C      ;****************************************************************
  4951*   F5             C      	PUSH	AF
  4952*   0C             C      	INC	C
  4953*   0C             C      	INC	C
  4954*   0C             C      	INC	C
  4955*                  C      P1.B1:
  4955*   CD 4984*       C      	CALL	P1.STAT
  4958*   CB 57          C      	BIT	2,A
  495A*   28 F9          C      	JR	Z,P1.B1
  495C*   F1             C      	POP	AF
  495D*   0D             C      	DEC	C
  495E*   ED 79          C      	OUT	(C),A	;Adresse + 2
  4960*                  C      P1.B3:
  4960*   ED 78          C      	IN	A,(C)
  4962*   E6 7F          C      	AND	7FH
  4964*   FE 11          C      	CP	11H
  4966*   28 04          C      	JR	Z,P1.B4
  4968*   FE 13          C      	CP	13H
  496A*   28 F4          C      	JR	Z,P1.B3
  496C*                  C      P1.B4:
  496C*   0C             C      	INC	C
  496D*                  C      P1.B6:
  496D*   0D             C      	DEC	C
  496E*   ED 78          C      	IN	A,(C)	;Adresse + 2,(C)
  4970*   0C             C      	INC	C
  4971*   CD 4984*       C      	CALL	P1.STAT
  4974*   20 F7          C      	JR	NZ,P1.B6
  4976*   0D             C      	DEC	C
  4977*   0D             C      	DEC	C
  4978*   0D             C      	DEC	C
  4979*   C9             C      	RET
                         C      
  497A*                  C      P1.SIOTB:
  497A*   04             C      	DB	4	;Steuerworte  S I O
  497B*   45             C      	DB	45H	;WR4
  497C*   01             C      	DB	1
  497D*   00             C      	DB	00H	;WR1
  497E*   03             C      	DB	3
  497F*   41             C      	DB	41H	;WR3
  4980*   05             C      	DB	5
  4981*   28             C      	DB	28H	;WR5
  4982*   00             C      	DB	0
  4983*   30             C      	DB	30H	;WR0
                         C      
  4984*                  C      P1.STAT:
  4984*   AF             C      	XOR	A
  4985*   ED 79          C      	OUT	(C),A
  4987*   ED 78          C      	IN	A,(C)
  4989*   CB 47          C      	BIT	0,A
                         C      	ENDIF
                         C      	ENDIF
                         C      
                         C      	PAGE
'Zeichenausgabe an den Drucker'	MACRO-80 3.44	09-Dec-81	PAGE	1-120


                         C      
                         C      	IF	P1.DRU AND 80H
                         C      	IF	P1.ANST AND 01100000B
                         C      ;****************************************************************
                         C      ;*               S 6 0 0 1  mit  Spezialinteface                *
                         C      ;****************************************************************
                         C      	LD	A,C	;device-control for a single sign
                         C      	LD	HL,P1.PTAKB	;table of lower-case signs
                         C      	LD	BC,P1.PZKB	;number   lower-case signs
                         C      	CPIR		;compare
                         C      	JR	Z,P1.PRIZK
                         C      	LD	HL,P1.PTAGB	;table of upper-case signs
                         C      	LD	BC,P1.PZGB	;number   upper-case signs
                         C      	CPIR
                         C      	JR	Z,P1.PRIZG
                         C      	LD	A,' '	;space if no sign is matched
                         C      P1.PRIZK:
                         C      	OUT	(C),8FH	;Reset all
                         C      	PUSH	AF	;save sign
                         C      	LD	A,0EH	;shift sign
                         C      	JR	P1.PRIZ2
                         C      P1.PRIZG:
                         C      	OUT	(C),8FH	;Reset all
                         C      	PUSH	AF	;save sign
                         C      	LD	A,0FH	;lock sign
                         C      P1.PRIZ2	EQU	$
                         C      
                         C      	IF	P1.ANST AND 00100000B
                         C      	LD	C,8CH	;Address
                         C      	ENDIF
                         C      
                         C      	CALL	P1.MR2
                         C      	LD	HL,200H
                         C      	CALL	P1.TIM	;time-loop
                         C      	OUT	(C),8FH	;Reset all
                         C      	LD	HL,200H
                         C      	CALL	P1.TIM
                         C      	POP	AF	;real sign now
                         C      	CALL	P1.MR2
                         C      	LD	HL,200H
                         C      	CALL	P1.TIM
                         C      	OUT	(C),8FH	;Reset all
                         C      
                         C      	IF	P1.ANST AND 00100000B
                         C      	LD	HL,300H
                         C      	ENDIF
                         C      
                         C      	IF	P1.ANST AND 01000000B
                         C      	LD	HL,2E0H
                         C      	ENDIF
                         C      
                         C      	CALL	P1.TIM
                         C      	LD	HL,200H
                         C      	CALL	P1.TIM
                         C      	RET
                         C      	ENDIF
                         C      	ENDIF
                         C      
                         C      	PAGE
'Zeichenausgabe an den Drucker'	MACRO-80 3.44	09-Dec-81	PAGE	1-121


                         C      
                         C      	IF	P1.DRU AND 80H
                         C      	IF	P1.ANST AND 01100000B
                         C      
                         C      	IF	P1.ANST AND 01000000B
                         C      P1.MR2:
                         C      	OUT	(C),8CH
                         C      	OUT	(C),8DH
                         C      	CALL	P1.PRIZU
                         C      	ENDIF
                         C      
                         C      	IF	P1.ANST AND 00100000B
                         C      P1.MR2:
                         C      	OUT	(C),A	;latching on Printboard
                         C      	OUT	(C),8AH	;latching on S6001
                         C      	OUT	(C),88H	;sign on S6001-Keyboard
                         C      	ENDIF
                         C      
                         C      	RET
                         C      
                         C      P1.TIM:
                         C      	PUSH	HL	;time-loop here , Input:<HL>
                         C      	CALL	P1.TIM1
                         C      	POP	HL
                         C      P1.TIM1:
                         C      	LD	A,L
                         C      	OR	H
                         C      	RET	Z
                         C      	DEC	HL
                         C      	JR	P1.TIM1
                         C      
                         C      	IF	P1.ANST AND 01000000B
                         C      P1.PRIZU:
                         C      	LD	HL,16
                         C      	CALL	P1.TIM
                         C      	OUT	(C),8AH
                         C      	OUT	(C),8BH
                         C      	OUT	(C),88H
                         C      	ENDIF
                         C      
                         C      	ENDIF
                         C      	ENDIF
                         C      
                         C      	PAGE
'Zeichenausgabe an den Drucker'	MACRO-80 3.44	09-Dec-81	PAGE	1-122


                         C      
                         C      	IF	P1.DRU AND 80H
                         C      	IF	P1.ANST AND 80H
                         C      ;****************************************************************
                         C      ;*               S 6 0 0 1  mit  Koppelinterface                *
                         C      ;****************************************************************
                         C      	PUSH	BC
                         C      	PUSH	AF
                         C      	LD	HL,P1.CTBS6	;Codeumwandlung ASCII ===> S6001
                         C      	LD	D,0
                         C      	LD	E,A
                         C      	ADD	HL,DE
                         C      	LD	A,(HL)
                         C      	CPL
                         C      	PUSH	AF
                         C      	INC	C
                         C      P1.TOUT:
                         C      	IN	A,(C)	;Adresse + 1,(C)
                         C      	BIT	5,A
                         C      	JR	NZ,TOUT	;kein bereit
                         C      	POP	AF
                         C      	DEC	C
                         C      	OUT	(C),A	;Ausgabe Zeichen
                         C      	LD	A,0FDH
                         C      	INC	C
                         C      	OUT	(C),A	;STB High
                         C      	LD	A,0FFH
                         C      	OUT	(C),A	;STB Low
                         C      	LD	A,0FDH
                         C      	OUT	(C),A	;STB High
                         C      	OR	A
                         C      	POP	AF
                         C      	POP	BC
                         C      	ENDIF
                         C      	ENDIF
                         C      
  498B*   C9             C      	RET		;return vom UP "ZEI"
                         C      
                         C      	PAGE
'Zeichenausgabe an den Drucker'	MACRO-80 3.44	09-Dec-81	PAGE	1-123


                         C      
  498C*                  C      P1.ZEIZ	EQU	$
                         C      
                         C      	IF	P1.DRU AND 3	;1152/1157
                         C      	IF	P1.ANST AND 00001110B	;A T D / A T S
  498C*   3E 0D          C      	LD	A,00DH
  498E*   CD 4951*       C      	CALL	P1.ZEI
  4991*   3E 0A          C      	LD	A,00AH
  4993*   CD 4951*       C      	CALL	P1.ZEI
                         C      	ENDIF
                         C      	ENDIF
                         C      
                         C      	IF	P1.DRU AND 4	;1154/GNI
                         C      	IF	P1.ANST AND 1	;A D A
                         C      	INC	C
                         C      	LD	A,1
                         C      	CALL	P1.KOUT
                         C      	LD	A,2
                         C      	CALL	P1.KOUT
                         C      	CALL	P1.WAIT
                         C      	CALL	P1.WAIT
                         C      	DEC	C
                         C      	RET
                         C      P1.KOUT:
                         C      	OUT	(C),A	;Adresse + 1
                         C      	IN	A,(C)	;Adresse + 1,(C)
                         C      	BIT	5,A
                         C      	JR	NZ,KOUT+2
                         C      	RET
                         C      P1.WAIT:
                         C      	LD	B,20H
                         C      	PUSH	BC
                         C      	LD	B,0FFH
                         C      	DJNZ	0
                         C      	POP	BC
                         C      	DJNZ	P1.WAIT+2
                         C      	ENDIF
                         C      	ENDIF
                         C      
                         C      	IF	P1.DRU AND 8	;1154/ASCII
                         C      	IF	P1.ANST AND 1	;A D A
                         C      	LD	A,00DH
                         C      	CALL	P1.ZEI
                         C      	PUSH	DE
                         C      	LD	DE,00C00H
                         C      	DEC	DE
                         C      	LD	A,D
                         C      	OR	E
                         C      	JR	NZ,$-3
                         C      	POP	DE
                         C      	LD	A,00AH
                         C      	CALL	P1.ZEI
                         C      	ENDIF
                         C      	ENDIF
                         C      
                         C      	IF	P1.DRU AND 40H	;BD 4000
                         C      	IF	P1.ANST AND 1
                         C      	CALL	P1.ZEI
                         C      	ENDIF
                         C      	ENDIF
                         C      
                         C      	IF	P1.DRU AND 80H	;S 6001
                         C      	IF	P1.ANST AND 11100000B
                         C      	CALL	P1.ZEI
                         C      	ENDIF
                         C      	ENDIF
                         C      
  4996*   C9             C      	RET		;return vom UP "ZEIZ"
                         C      
                         C      	PAGE
'Zeichenausgabe an den Drucker'	MACRO-80 3.44	09-Dec-81	PAGE	1-124


                         C      
                         C      	IF	P1.DRU AND 00000011B	;1152/1157 PIO
                         C      
                         C      	IF	P1.PIO AND 1	;P I O 1
  4997*                  C      P1.CPI10:
  4997*   1B             C      	DB	01BH
  4998*   5B 30 20 4B    C      	DB	'[0 K'
  499C*                  C      P1.CPI12:
  499C*   1B             C      	DB	01BH
  499D*   5B 31 20 4B    C      	DB	'[1 K'
  49A1*                  C      P1.LPI6:
  49A1*   1B             C      	DB	01BH
  49A2*   5B 30 20 4C    C      	DB	'[0 L'
  49A6*                  C      P1.LPI8:
  49A6*   1B             C      	DB	01BH
  49A7*   5B 35 20 4C    C      	DB	'[5 L'
                         C      
  49AB*                  C      P1.CPI:
  49AB*   06 05          C      	LD	B,5
                         C      	ENDIF
                         C      
                         C      	IF	P1.PIO AND 2	;P I O 2
                         C      P1.CPI10:	DB	1
                         C      P1.CPI12:	DB	2
                         C      P1.LPI6:	DB	5
                         C      P1.LPI8:	DB	6
                         C      
                         C      P1.CPI:	LD	B,1
                         C      	ENDIF
                         C      
                         C      
  49AD*                  C      P1.CPI1:
  49AD*   7E             C      	LD	A,(HL)
  49AE*   23             C      	INC	HL
  49AF*   CD 4951*       C      	CALL	P1.ZEI
  49B2*   10 F9          C      	DJNZ	P1.CPI1
  49B4*   C9             C      	RET
                         C      	ENDIF
                         C      
                         C      	PAGE
'Zeichenausgabe an den Drucker'	MACRO-80 3.44	09-Dec-81	PAGE	1-125


                         C      
                         C      	IF	P1.DRU AND 80H
                         C      	IF	P1.ANST AND 01100000B
                         C      P1.PTAGB:
                         C      	DB	26H	; &     table of upper-case signs
                         C      	DB	3BH	; ;
                         C      	DB	5FH	; _
                         C      	DB	3DH	; =
                         C      	DB	25H	; %
                         C      	DB	2BH	; +
                         C      	DB	28H	; (
                         C      	DB	29H	; )
                         C      	DB	3CH	; <
                         C      	DB	3EH	; >
                         C      	DB	2FH	; /
                         C      	DB	3AH	; :
                         C      	DB	40H	; $
                         C      	DB	08H	; BS
                         C      	DB	09H	; TAB
                         C      	DB	24H	; DOLLAR
                         C      	DB	7FH	; RUBOUT
                         C      	DB	22H	; ""
                         C      	DB	3FH	; ?
                         C      	DB	21H	; !
                         C      	DB	27H	; '
                         C      	DB	41H	; A
                         C      	DB	42H	; B
                         C      	DB	43H	; C
                         C      	DB	44H	; D
                         C      	DB	45H	; E
                         C      	DB	46H	; F
                         C      	DB	47H	; G
                         C      	DB	48H	; H
                         C      	DB	49H	; I
                         C      	DB	4AH	; J
                         C      	DB	4BH	; K
                         C      	DB	4CH	; L
                         C      	DB	4DH	; M
                         C      	DB	4EH	; N
                         C      	DB	4FH	; O
                         C      	DB	50H	; P
                         C      	DB	51H	; Q
                         C      	DB	52H	; R
                         C      	DB	53H	; S
                         C      	DB	54H	; T
                         C      	DB	55H	; U
                         C      	DB	56H	; V
                         C      	DB	57H	; W
                         C      	DB	58H	; X
                         C      	DB	59H	; Y
                         C      	DB	5AH	; Z
                         C      	DB	5BH
                         C      	DB	5CH
                         C      	DB	5DH
                         C      	DB	5EH
                         C      	DB	03H	;Sperrschrift
                         C      	DB	04H	;Sparschrift
                         C      	DB	05H	;Schattenschrift
                         C      	DB	06H	;Unterstreichen
                         C      	DB	07H	;Fettschrift
                         C      
                         C      	ENDIF
                         C      	ENDIF
                         C      
                         C      	PAGE
'Zeichenausgabe an den Drucker'	MACRO-80 3.44	09-Dec-81	PAGE	1-126


                         C      
                         C      	IF	P1.DRU AND 80H
                         C      	IF	P1.ANST AND 01100000B
                         C      P1.PTAKB:
                         C      	DB	40H	; @     table of lower-case signs
                         C      	DB	23H	; #
                         C      	DB	2AH	; *
                         C      	DB	2CH	; ,
                         C      	DB	2EH	; .
                         C      	DB	2DH	; -
                         C      	DB	1EH	; newline
                         C      	DB	20H	; space
                         C      	DB	30H	; 0
                         C      	DB	31H	; 1
                         C      	DB	32H	; 2
                         C      	DB	33H	; 3
                         C      	DB	34H	; 4
                         C      	DB	35H	; 5
                         C      	DB	36H	; 6
                         C      	DB	37H	; 7
                         C      	DB	38H	; 8
                         C      	DB	39H	; 9
                         C      	DB	61H	; a
                         C      	DB	62H	; b
                         C      	DB	63H	; c
                         C      	DB	64H	; d
                         C      	DB	65H	; e
                         C      	DB	66H	; f
                         C      	DB	67H	; g
                         C      	DB	68H	; h
                         C      	DB	69H	; i
                         C      	DB	6AH	; j
                         C      	DB	6BH	; k
                         C      	DB	6CH	; l
                         C      	DB	6DH	; m
                         C      	DB	6EH	; n
                         C      	DB	6FH	; o
                         C      	DB	70H	; p
                         C      	DB	71H	; q
                         C      	DB	72H	; r
                         C      	DB	73H	; s
                         C      	DB	74H	; t
                         C      	DB	75H	; u
                         C      	DB	76H	; v
                         C      	DB	77H	; w
                         C      	DB	78H	; x
                         C      	DB	79H	; y
                         C      	DB	7AH	; z
                         C      	DB	7BH
                         C      	DB	7CH
                         C      	DB	7DH
                         C      	DB	7EH
                         C      
                         C      	ENDIF
                         C      	ENDIF
                         C      
                         C      	PAGE
'Zeichenausgabe an den Drucker'	MACRO-80 3.44	09-Dec-81	PAGE	1-127


                         C      
                         C      	IF	P1.DRU AND 80H
                         C      	IF	P1.ANST AND 80H
                         C      P1.CTBS6:
                         C      	DW	1D1DH
                         C      	DB	0A5H
                         C      	DB	0A6H
                         C      	DB	0A7H
                         C      	DB	0A8H
                         C      	DB	0A9H
                         C      	DB	0AAH
                         C      	DB	1CH
                         C      	DB	19H
                         C      	DB	0AH
                         C      	DB	08H
                         C      	DB	0CH
                         C      	DB	1EH
                         C      	DB	0BH
                         C      	DB	1DH
                         C      	DB	80H
                         C      	DB	81H
                         C      	DB	82H
                         C      	DB	83H
                         C      	DB	84H
                         C      	DB	90H
                         C      	DB	91H
                         C      	DB	92H
                         C      	DB	93H
                         C      	DB	94H
                         C      	DW	1D1DH
                         C      	DW	1D1DH
                         C      	DB	1EH
                         C      	DB	1FH
                         C      	DB	1DH	;20
                         C      	DB	21H
                         C      	DB	22H
                         C      	DB	23H
                         C      	DB	5EH
                         C      	DB	25H
                         C      	DB	26H
                         C      	DB	27H
                         C      	DB	'()*+,-./'
                         C      	DB	'0123456789'
                         C      	DB	':;'
                         C      	DB	24H
                         C      	DB	3DH
                         C      	DB	20H
                         C      	DB	3FH
                         C      	DB	3CH
                         C      	DB	'ABCDEFGHIJKLMNOPQRSTUVWXYZ[\]'
                         C      	DB	40H
                         C      	DB	5FH
                         C      	DB	3EH
                         C      	DB	'abcdefghijklmnopqrstuvwxyz{|}'
                         C      	DB	7EH
                         C      	DB	1DH
                         C      	DB	80H
                         C      	DB	81H
                         C      	DB	82H
                         C      	DB	83H
                         C      	DB	84H
                         C      	DB	1DH
                         C      	DW	1D1DH
                         C      	DW	1D1DH
                         C      	DW	1D1DH
                         C      	DW	1D1DH
                         C      	DW	1D1DH
                         C      	DB	90H
                         C      	DB	91H
                         C      	DB	92H
                         C      	DB	93H
                         C      	DB	94H
                         C      	DB	1DH
                         C      	DW	1D1DH
                         C      	DW	1D1DH
                         C      	DW	1D1DH
                         C      	DW	1D1DH
                         C      	DW	1D1DH
                         C      	DB	0A0H
                         C      	DB	0A1H
                         C      	DB	0A2H
                         C      	DB	0A3H
'Zeichenausgabe an den Drucker'	MACRO-80 3.44	09-Dec-81	PAGE	1-128


                         C      	DB	0A4H
                         C      	DB	0A5H
                         C      	DB	0A6H
                         C      	DB	0A7H
                         C      	DB	0A8H
                         C      	DB	0A9H
                         C      	DB	0AAH
                         C      	DW	1D1DH
                         C      	DB	0ADH
                         C      	DB	0AEH
                         C      	DB	0AFH
                         C      	DB	0B0H
                         C      	DB	0B1H
                         C      	DW	1D1DH
                         C      	DW	1D1DH
                         C      	DW	1D1DH
                         C      	DW	1D1DH
                         C      	DW	1D1DH
                         C      	DW	1D1DH
                         C      	DW	1D1DH
                         C      	DB	0C0H
                         C      	DB	0C1H
                         C      	DB	0C2H
                         C      	DW	1D1DH
                         C      	DB	1DH
                         C      	DB	0C6H
                         C      	DB	0C7H
                         C      	DB	0C8H
                         C      	DB	0C9H
                         C      	DB	0CAH
                         C      	DW	1D1DH
                         C      	DW	1D1DH
                         C      	DB	0CFH
                         C      	DB	0D0H
                         C      	DB	0D1H
                         C      	DB	0D2H
                         C      	DW	1D1DH
                         C      	DW	1D1DH
                         C      	DW	1D1DH
                         C      	DW	1D1DH
                         C      	DW	1D1DH
                         C      	DW	1D1DH
                         C      	DB	0FFH
                         C      	ENDIF
                         C      	ENDIF
                         C      
                         C      ;	END
                                
                         C      	INCLUDE PF01.MAC	; PF-Tasten-Belegungen
                         C      	TITLE	'DEG2000 V. 1.2    PF - Belegungen'
                         C      	PAGE
'DEG2000 V. 1.2    PF - Belegungen'	MACRO-80 3.44	09-Dec-81	PAGE	1-129


                         C      
                         C      ;	PN	PF01
                         C      ;****************************************************************
                         C      ;*                  DEG2000 V. 1.2    PF - ROM 2 - Belegung     *
                         C      ;*  Version         --------------------------------------------*
                         C      ;*                  Programmierer: M. Herbote  K EAW  ZFT (WFT) *
                         C      ;*  V 1 . 2         --------------------------------------------*
                         C      ;*                  Stand        : 06.Februar 1985              *
                         C      ;****************************************************************
                         C      
  49B5*   49B5*          C      	DW	$
  49B7*   44 50 54 53    C      	DB	'DPTS'
  49BB*   CD 0669*       C      	CALL	S1.INPTR
  49BE*   23             C      	INC	HL
  49BF*   CD 067F*       C      	CALL	S1.HBKON
  49C2*   5F             C      	LD	E,A
  49C3*   ED 53 0FF7     C      	LD	(SM.PTS),DE
  49C7*   C3 000B*       C      	JP	SY.SYSTB
                         C      
                         C      ;****************************************************************
  49CA*                  C      PF.INIT1:
  49CA*   E5             C      	PUSH	HL
  49CB*   2A 0FF7        C      	LD	HL,(SM.PTS)     ;Merker Anfangsadresse programm. PF-Tasten
  49CE*   22 0E19*       C      	LD	(SM.PTSA),HL    ;Merker AnFang progr. Speicher
  49D1*   06 30          C      	LD	B,SD.PSANZ      ;Anzahl programm. PF-Tasten
  49D3*                  C      PF.INIT2:                        ;PF-Tasten Init
  49D3*   36 00          C      	LD	M,0
  49D5*   23             C      	INC	HL
  49D6*   10 FB          C      	DJNZ	PF.INIT2
  49D8*   22 0E17*       C      	LD	(SM.PTSE),HL    ;Merker Ende progr. Speicher
  49DB*   E1             C      	POP	HL
  49DC*   C9             C      	RET
                         C      
                         C      	PAGE
'DEG2000 V. 1.2    PF - Belegungen'	MACRO-80 3.44	09-Dec-81	PAGE	1-130


                         C      
                         C      ;****************************************************************
  49DD*                  C      PF.O1ANF	EQU	$
                         C      ; === Ebene 0
  49DD*   2D 2D 2D 2D    C      	DB	'----+----1----+----2----+----3----+----4----+----5----+----6----+----7----+----'       ;PF01-0
  49E1*   2B 2D 2D 2D    C      
  49E5*   2D 31 2D 2D    C      
  49E9*   2D 2D 2B 2D    C      
  49ED*   2D 2D 2D 32    C      
  49F1*   2D 2D 2D 2D    C      
  49F5*   2B 2D 2D 2D    C      
  49F9*   2D 33 2D 2D    C      
  49FD*   2D 2D 2B 2D    C      
  4A01*   2D 2D 2D 34    C      
  4A05*   2D 2D 2D 2D    C      
  4A09*   2B 2D 2D 2D    C      
  4A0D*   2D 35 2D 2D    C      
  4A11*   2D 2D 2B 2D    C      
  4A15*   2D 2D 2D 36    C      
  4A19*   2D 2D 2D 2D    C      
  4A1D*   2B 2D 2D 2D    C      
  4A21*   2D 37 2D 2D    C      
  4A25*   2D 2D 2B 2D    C      
  4A29*   2D 2D 2D       C      
  4A2C*   001E           C      	DW	SD.NL
  4A2E*   31 2D 2D 2D    C      	DB	'1---5----10---5----20---5----30---5----40---5----50---5----60---5----70---5----'       ;PF02-0
  4A32*   35 2D 2D 2D    C      
  4A36*   2D 31 30 2D    C      
  4A3A*   2D 2D 35 2D    C      
  4A3E*   2D 2D 2D 32    C      
  4A42*   30 2D 2D 2D    C      
  4A46*   35 2D 2D 2D    C      
  4A4A*   2D 33 30 2D    C      
  4A4E*   2D 2D 35 2D    C      
  4A52*   2D 2D 2D 34    C      
  4A56*   30 2D 2D 2D    C      
  4A5A*   35 2D 2D 2D    C      
  4A5E*   2D 35 30 2D    C      
  4A62*   2D 2D 35 2D    C      
  4A66*   2D 2D 2D 36    C      
  4A6A*   30 2D 2D 2D    C      
  4A6E*   35 2D 2D 2D    C      
  4A72*   2D 37 30 2D    C      
  4A76*   2D 2D 35 2D    C      
  4A7A*   2D 2D 2D       C      
  4A7D*   001E           C      	DW	SD.NL
  4A7F*   00             C      	DB	0                                                                                       ;PF03-0
                         C      ; ----
  4A80*   7C 2D 2D 2D    C      	DB	'|-----------------------------------------------------------------------------|'       ;PF04-0
  4A84*   2D 2D 2D 2D    C      
  4A88*   2D 2D 2D 2D    C      
  4A8C*   2D 2D 2D 2D    C      
  4A90*   2D 2D 2D 2D    C      
  4A94*   2D 2D 2D 2D    C      
  4A98*   2D 2D 2D 2D    C      
  4A9C*   2D 2D 2D 2D    C      
  4AA0*   2D 2D 2D 2D    C      
  4AA4*   2D 2D 2D 2D    C      
  4AA8*   2D 2D 2D 2D    C      
  4AAC*   2D 2D 2D 2D    C      
  4AB0*   2D 2D 2D 2D    C      
  4AB4*   2D 2D 2D 2D    C      
  4AB8*   2D 2D 2D 2D    C      
  4ABC*   2D 2D 2D 2D    C      
  4AC0*   2D 2D 2D 2D    C      
  4AC4*   2D 2D 2D 2D    C      
  4AC8*   2D 2D 2D 2D    C      
  4ACC*   2D 2D 7C       C      
  4ACF*   001E           C      	DW	SD.NL
  4AD1*   00             C      	DB	0                                                                                       ;PF05-0
  4AD2*   7C 20 20 20    C      	DB	'|                                                                             |'       ;PF06-0
  4AD6*   20 20 20 20    C      
  4ADA*   20 20 20 20    C      
  4ADE*   20 20 20 20    C      
  4AE2*   20 20 20 20    C      
  4AE6*   20 20 20 20    C      
  4AEA*   20 20 20 20    C      
  4AEE*   20 20 20 20    C      
  4AF2*   20 20 20 20    C      
  4AF6*   20 20 20 20    C      
  4AFA*   20 20 20 20    C      
  4AFE*   20 20 20 20    C      
'DEG2000 V. 1.2    PF - Belegungen'	MACRO-80 3.44	09-Dec-81	PAGE	1-131


  4B02*   20 20 20 20    C      
  4B06*   20 20 20 20    C      
  4B0A*   20 20 20 20    C      
  4B0E*   20 20 20 20    C      
  4B12*   20 20 20 20    C      
  4B16*   20 20 20 20    C      
  4B1A*   20 20 20 20    C      
  4B1E*   20 20 7C       C      
  4B21*   001E           C      	DW	SD.NL
                         C      ; ----
  4B23*   3B 2A 2A 2A    C      	DB	';****************************************************************'                     ;PF07-0
  4B27*   2A 2A 2A 2A    C      
  4B2B*   2A 2A 2A 2A    C      
  4B2F*   2A 2A 2A 2A    C      
  4B33*   2A 2A 2A 2A    C      
  4B37*   2A 2A 2A 2A    C      
  4B3B*   2A 2A 2A 2A    C      
  4B3F*   2A 2A 2A 2A    C      
  4B43*   2A 2A 2A 2A    C      
  4B47*   2A 2A 2A 2A    C      
  4B4B*   2A 2A 2A 2A    C      
  4B4F*   2A 2A 2A 2A    C      
  4B53*   2A 2A 2A 2A    C      
  4B57*   2A 2A 2A 2A    C      
  4B5B*   2A 2A 2A 2A    C      
  4B5F*   2A 2A 2A 2A    C      
  4B63*   2A             C      
  4B64*   001E           C      	DW	SD.NL
  4B66*   3B 2A 20 20    C      	DB	';*                                                              *'                     ;PF08-0
  4B6A*   20 20 20 20    C      
  4B6E*   20 20 20 20    C      
  4B72*   20 20 20 20    C      
  4B76*   20 20 20 20    C      
  4B7A*   20 20 20 20    C      
  4B7E*   20 20 20 20    C      
  4B82*   20 20 20 20    C      
  4B86*   20 20 20 20    C      
  4B8A*   20 20 20 20    C      
  4B8E*   20 20 20 20    C      
  4B92*   20 20 20 20    C      
  4B96*   20 20 20 20    C      
  4B9A*   20 20 20 20    C      
  4B9E*   20 20 20 20    C      
  4BA2*   20 20 20 20    C      
  4BA6*   2A             C      
  4BA7*   001E           C      	DW	SD.NL
  4BA9*   3B 2A 20 20    C      	DB	';*                  --------------------------------------------*'                     ;PF09-0
  4BAD*   20 20 20 20    C      
  4BB1*   20 20 20 20    C      
  4BB5*   20 20 20 20    C      
  4BB9*   20 20 20 20    C      
  4BBD*   2D 2D 2D 2D    C      
  4BC1*   2D 2D 2D 2D    C      
  4BC5*   2D 2D 2D 2D    C      
  4BC9*   2D 2D 2D 2D    C      
  4BCD*   2D 2D 2D 2D    C      
  4BD1*   2D 2D 2D 2D    C      
  4BD5*   2D 2D 2D 2D    C      
  4BD9*   2D 2D 2D 2D    C      
  4BDD*   2D 2D 2D 2D    C      
  4BE1*   2D 2D 2D 2D    C      
  4BE5*   2D 2D 2D 2D    C      
  4BE9*   2A             C      
  4BEA*   001E           C      	DW	SD.NL
                         C      ; ----
  4BEC*   3B 2A 20 20    C      	DB	';*                  Programmierer: (c) Marcus Herbote           *'                     ;PF10-0
  4BF0*   20 20 20 20    C      
  4BF4*   20 20 20 20    C      
  4BF8*   20 20 20 20    C      
  4BFC*   20 20 20 20    C      
  4C00*   50 72 6F 67    C      
  4C04*   72 61 6D 6D    C      
  4C08*   69 65 72 65    C      
  4C0C*   72 3A 20 28    C      
  4C10*   63 29 20 4D    C      
  4C14*   61 72 63 75    C      
  4C18*   73 20 48 65    C      
  4C1C*   72 62 6F 74    C      
  4C20*   65 20 20 20    C      
  4C24*   20 20 20 20    C      
  4C28*   20 20 20 20    C      
  4C2C*   2A             C      
  4C2D*   001E           C      	DW	SD.NL
'DEG2000 V. 1.2    PF - Belegungen'	MACRO-80 3.44	09-Dec-81	PAGE	1-132


  4C2F*   3B 2A 20 20    C      	DB	';*                  Stand        : '                                                   ;PF11-0
  4C33*   20 20 20 20    C      
  4C37*   20 20 20 20    C      
  4C3B*   20 20 20 20    C      
  4C3F*   20 20 20 20    C      
  4C43*   53 74 61 6E    C      
  4C47*   64 20 20 20    C      
  4C4B*   20 20 20 20    C      
  4C4F*   20 3A 20       C      
  4C52*   00             C      	DB	0
  4C53*   3B 2A 20 20    C      	DB	';*                  '                                                                  ;PF12-0
  4C57*   20 20 20 20    C      
  4C5B*   20 20 20 20    C      
  4C5F*   20 20 20 20    C      
  4C63*   20 20 20 20    C      
  4C67*   00             C      	DB	0
                         C      ; === Ebene 1
  4C68*   20 20 20 20    C      	DB	'         PUSH  HL'                                                                     ;PF01-1 PF13
  4C6C*   20 20 20 20    C      
  4C70*   20 50 55 53    C      
  4C74*   48 20 20 48    C      
  4C78*   4C             C      
  4C79*   001E           C      	DW	SD.NL
  4C7B*   20 20 20 20    C      	DB	'         PUSH  IX'                                                                     ;PF02-1 PF14
  4C7F*   20 20 20 20    C      
  4C83*   20 50 55 53    C      
  4C87*   48 20 20 49    C      
  4C8B*   58             C      
  4C8C*   001E           C      	DW	SD.NL
  4C8E*   20 20 20 20    C      	DB	'         PUSH  IY'                                                                     ;PF03-1 PF15
  4C92*   20 20 20 20    C      
  4C96*   20 50 55 53    C      
  4C9A*   48 20 20 49    C      
  4C9E*   59             C      
  4C9F*   001E           C      	DW	SD.NL
                         C      ; ----
  4CA1*   20 20 20 20    C      	DB	'         POP   HL'                                                                     ;PF04-1 PF16
  4CA5*   20 20 20 20    C      
  4CA9*   20 50 4F 50    C      
  4CAD*   20 20 20 48    C      
  4CB1*   4C             C      
  4CB2*   001E           C      	DW	SD.NL
  4CB4*   20 20 20 20    C      	DB	'         POP   IX'                                                                     ;PF05-1 PF17
  4CB8*   20 20 20 20    C      
  4CBC*   20 50 4F 50    C      
  4CC0*   20 20 20 49    C      
  4CC4*   58             C      
  4CC5*   001E           C      	DW	SD.NL
  4CC7*   20 20 20 20    C      	DB	'         POP   IY'                                                                     ;PF06-1 PF18
  4CCB*   20 20 20 20    C      
  4CCF*   20 50 4F 50    C      
  4CD3*   20 20 20 49    C      
  4CD7*   59             C      
  4CD8*   001E           C      	DW	SD.NL
                         C      ; ----
  4CDA*   20 20 20 20    C      	DB	'         PUSH  AF'                                                                     ;PF07-1 PF19
  4CDE*   20 20 20 20    C      
  4CE2*   20 50 55 53    C      
  4CE6*   48 20 20 41    C      
  4CEA*   46             C      
  4CEB*   001E           C      	DW	SD.NL
  4CED*   20 20 20 20    C      	DB	'         PUSH  BC'                                                                     ;PF08-1 PF20
  4CF1*   20 20 20 20    C      
  4CF5*   20 50 55 53    C      
  4CF9*   48 20 20 42    C      
  4CFD*   43             C      
  4CFE*   001E           C      	DW	SD.NL
  4D00*   20 20 20 20    C      	DB	'         PUSH  DE'                                                                     ;PF09-1 PF21
  4D04*   20 20 20 20    C      
  4D08*   20 50 55 53    C      
  4D0C*   48 20 20 44    C      
  4D10*   45             C      
  4D11*   001E           C      	DW	SD.NL
                         C      ; ----
  4D13*   20 20 20 20    C      	DB	'         POP   AF'                                                                     ;PF10-1 PF22
  4D17*   20 20 20 20    C      
  4D1B*   20 50 4F 50    C      
  4D1F*   20 20 20 41    C      
  4D23*   46             C      
  4D24*   001E           C      	DW	SD.NL
  4D26*   20 20 20 20    C      	DB	'         POP   BC'                                                                     ;PF11-1 PF23
  4D2A*   20 20 20 20    C      
  4D2E*   20 50 4F 50    C      
'DEG2000 V. 1.2    PF - Belegungen'	MACRO-80 3.44	09-Dec-81	PAGE	1-133


  4D32*   20 20 20 42    C      
  4D36*   43             C      
  4D37*   001E           C      	DW	SD.NL
  4D39*   20 20 20 20    C      	DB	'         POP   DE'                                                                     ;PF12-1 PF24
  4D3D*   20 20 20 20    C      
  4D41*   20 50 4F 50    C      
  4D45*   20 20 20 44    C      
  4D49*   45             C      
  4D4A*   001E           C      	DW	SD.NL
                         C      ; === Ebene 2
  4D4C*   20 20 20 20    C      	DB	'         LD    A,'                                                                     ;PF01-2 PF25
  4D50*   20 20 20 20    C      
  4D54*   20 4C 44 20    C      
  4D58*   20 20 20 41    C      
  4D5C*   2C             C      
  4D5D*   00             C      	DB	0
  4D5E*   20 20 20 20    C      	DB	'         LD    HL,'                                                                    ;PF02-2 PF26
  4D62*   20 20 20 20    C      
  4D66*   20 4C 44 20    C      
  4D6A*   20 20 20 48    C      
  4D6E*   4C 2C          C      
  4D70*   00             C      	DB	0
  4D71*   20 20 20 20    C      	DB	'         XOR   A'                                                                      ;PF03-2 PF27
  4D75*   20 20 20 20    C      
  4D79*   20 58 4F 52    C      
  4D7D*   20 20 20 41    C      
  4D81*   001E           C      	DW	SD.NL
                         C      ; ----
  4D83*   20 20 20 20    C      	DB	'         CALL  '                                                                       ;PF04-2 PF28
  4D87*   20 20 20 20    C      
  4D8B*   20 43 41 4C    C      
  4D8F*   4C 20 20       C      
  4D92*   00             C      	DB	0
  4D93*   20 20 20 20    C      	DB	'         DA    '                                                                       ;PF05-2 PF29
  4D97*   20 20 20 20    C      
  4D9B*   20 44 41 20    C      
  4D9F*   20 20 20       C      
  4DA2*   00             C      	DB	0
  4DA3*   20 20 20 20    C      	DB	'         DB    '                                                                       ;PF06-2 PF30
  4DA7*   20 20 20 20    C      
  4DAB*   20 44 42 20    C      
  4DAF*   20 20 20       C      
  4DB2*   00             C      	DB	0
  4DB2*                  C      PF.O1END EQU	$-1
                         C      	PAGE
'DEG2000 V. 1.2    PF - Belegungen'	MACRO-80 3.44	09-Dec-81	PAGE	1-134


                         C      
                         C      ;****************************************************************
  4DB3*                  C      PF.O2ANF EQU	$
                         C      ; === Ebene 0
  4DB3*   2F 2F 46 52    C      	DB	'//FRJOB01  JOB (FR690030,01),FRpgrmr1,MSGLEVEL=(1,1),'                                 ;PF01-0
  4DB7*   4A 4F 42 30    C      
  4DBB*   31 20 20 4A    C      
  4DBF*   4F 42 20 28    C      
  4DC3*   46 52 36 39    C      
  4DC7*   30 30 33 30    C      
  4DCB*   2C 30 31 29    C      
  4DCF*   2C 46 52 70    C      
  4DD3*   67 72 6D 72    C      
  4DD7*   31 2C 4D 53    C      
  4DDB*   47 4C 45 56    C      
  4DDF*   45 4C 3D 28    C      
  4DE3*   31 2C 31 29    C      
  4DE7*   2C             C      
  4DE8*   001E           C      	DW	SD.NL
  4DEA*   2F 2F 20 20    C      	DB	'//             REGION=090K,TYPRUN=HOLD,CLASS=E'                                        ;PF02-0
  4DEE*   20 20 20 20    C      
  4DF2*   20 20 20 20    C      
  4DF6*   20 20 20 52    C      
  4DFA*   45 47 49 4F    C      
  4DFE*   4E 3D 30 39    C      
  4E02*   30 4B 2C 54    C      
  4E06*   59 50 52 55    C      
  4E0A*   4E 3D 48 4F    C      
  4E0E*   4C 44 2C 43    C      
  4E12*   4C 41 53 53    C      
  4E16*   3D 45          C      
  4E18*   001E           C      	DW	SD.NL
  4E1A*   2F 2F 53 54    C      	DB	'//STEP01  EXEC PGM=name...,PARM=''    '''                                              ;PF03-0
  4E1E*   45 50 30 31    C      
  4E22*   20 20 45 58    C      
  4E26*   45 43 20 50    C      
  4E2A*   47 4D 3D 6E    C      
  4E2E*   61 6D 65 2E    C      
  4E32*   2E 2E 2C 50    C      
  4E36*   41 52 4D 3D    C      
  4E3A*   27 20 20 20    C      
  4E3E*   20 27          C      
  4E40*   001E           C      	DW	SD.NL
                         C      ; ----
  4E42*   2F 2F 53 54    C      	DB	'//STEPLIB  DD  DSN=FR1.LADT.T1,DISP=SHR'                                               ;PF04-0
  4E46*   45 50 4C 49    C      
  4E4A*   42 20 20 44    C      
  4E4E*   44 20 20 44    C      
  4E52*   53 4E 3D 46    C      
  4E56*   52 31 2E 4C    C      
  4E5A*   41 44 54 2E    C      
  4E5E*   54 31 2C 44    C      
  4E62*   49 53 50 3D    C      
  4E66*   53 48 52       C      
  4E69*   001E           C      	DW	SD.NL
  4E6B*   2F 2F 53 59    C      	DB	'//SYSPRINT DD  SYSOUT=A'                                                               ;PF05-0
  4E6F*   53 50 52 49    C      
  4E73*   4E 54 20 44    C      
  4E77*   44 20 20 53    C      
  4E7B*   59 53 4F 55    C      
  4E7F*   54 3D 41       C      
  4E82*   001E           C      	DW	SD.NL
  4E84*   2F 2F 53 59    C      	DB	'//SYSUT1   DD  DSN=FRx.QUET.T1,DISP=SHR'                                               ;PF06-0
  4E88*   53 55 54 31    C      
  4E8C*   20 20 20 44    C      
  4E90*   44 20 20 44    C      
  4E94*   53 4E 3D 46    C      
  4E98*   52 78 2E 51    C      
  4E9C*   55 45 54 2E    C      
  4EA0*   54 31 2C 44    C      
  4EA4*   49 53 50 3D    C      
  4EA8*   53 48 52       C      
  4EAB*   001E           C      	DW	SD.NL
                         C      ; ----
  4EAD*   2F 2F 53 59    C      	DB	'//SYSUT2   DD  DSN=FRx.QUET.T1,DISP=SHR'                                               ;PF07-0
  4EB1*   53 55 54 32    C      
  4EB5*   20 20 20 44    C      
  4EB9*   44 20 20 44    C      
  4EBD*   53 4E 3D 46    C      
  4EC1*   52 78 2E 51    C      
  4EC5*   55 45 54 2E    C      
  4EC9*   54 31 2C 44    C      
'DEG2000 V. 1.2    PF - Belegungen'	MACRO-80 3.44	09-Dec-81	PAGE	1-135


  4ECD*   49 53 50 3D    C      
  4ED1*   53 48 52       C      
  4ED4*   001E           C      	DW	SD.NL
  4ED6*   2F 2F 53 59    C      	DB	'//SYSIN    DD  *'                                                                      ;PF08-0
  4EDA*   53 49 4E 20    C      
  4EDE*   20 20 20 44    C      
  4EE2*   44 20 20 2A    C      
  4EE6*   001E           C      	DW	SD.NL
  4EE8*   2F 2F 20 20    C      	DB	'//             UNIT=5010,VOL=SER=TBoooo,LABEL=(o,SL),'                                 ;PF09-0
  4EEC*   20 20 20 20    C      
  4EF0*   20 20 20 20    C      
  4EF4*   20 20 20 55    C      
  4EF8*   4E 49 54 3D    C      
  4EFC*   35 30 31 30    C      
  4F00*   2C 56 4F 4C    C      
  4F04*   3D 53 45 52    C      
  4F08*   3D 54 42 6F    C      
  4F0C*   6F 6F 6F 2C    C      
  4F10*   4C 41 42 45    C      
  4F14*   4C 3D 28 6F    C      
  4F18*   2C 53 4C 29    C      
  4F1C*   2C             C      
  4F1D*   001E           C      	DW	SD.NL
                         C      ; ----
  4F1F*   2F 2F 20 20    C      	DB	'//             DCB=(RECFM=FBA,LRECL=121,BLKSIZE=0121),'                                ;PF10-0
  4F23*   20 20 20 20    C      
  4F27*   20 20 20 20    C      
  4F2B*   20 20 20 44    C      
  4F2F*   43 42 3D 28    C      
  4F33*   52 45 43 46    C      
  4F37*   4D 3D 46 42    C      
  4F3B*   41 2C 4C 52    C      
  4F3F*   45 43 4C 3D    C      
  4F43*   31 32 31 2C    C      
  4F47*   42 4C 4B 53    C      
  4F4B*   49 5A 45 3D    C      
  4F4F*   30 31 32 31    C      
  4F53*   29 2C          C      
  4F55*   001E           C      	DW	SD.NL
  4F57*   2F 2F 20 20    C      	DB	'//             SPACE=(TRK,(100,50),RLSE),'                                             ;PF11-0
  4F5B*   20 20 20 20    C      
  4F5F*   20 20 20 20    C      
  4F63*   20 20 20 53    C      
  4F67*   50 41 43 45    C      
  4F6B*   3D 28 54 52    C      
  4F6F*   4B 2C 28 31    C      
  4F73*   30 30 2C 35    C      
  4F77*   30 29 2C 52    C      
  4F7B*   4C 53 45 29    C      
  4F7F*   2C             C      
  4F80*   001E           C      	DW	SD.NL
  4F82*   2F 2F 20 20    C      	DB	'//             DISP=(,PASS),'                                                          ;PF12-0
  4F86*   20 20 20 20    C      
  4F8A*   20 20 20 20    C      
  4F8E*   20 20 20 44    C      
  4F92*   49 53 50 3D    C      
  4F96*   28 2C 50 41    C      
  4F9A*   53 53 29 2C    C      
  4F9E*   001E           C      	DW	SD.NL
                         C      ; === Ebene 1
  4FA0*   2F 2F 20 20    C      	DB	'//             HIS0=FR1,HIS1=FR1,NCAL=,MODUL=name'                                     ;PF00-1 PF13
  4FA4*   20 20 20 20    C      
  4FA8*   20 20 20 20    C      
  4FAC*   20 20 20 48    C      
  4FB0*   49 53 30 3D    C      
  4FB4*   46 52 31 2C    C      
  4FB8*   48 49 53 31    C      
  4FBC*   3D 46 52 31    C      
  4FC0*   2C 4E 43 41    C      
  4FC4*   4C 3D 2C 4D    C      
  4FC8*   4F 44 55 4C    C      
  4FCC*   3D 6E 61 6D    C      
  4FD0*   65             C      
  4FD1*   001E           C      	DW	SD.NL
  4FD3*   2F 2F 20 20    C      	DB	'//             UNIT=5050,VOL=SER=BBoooo,DISP=(,PASS),'                                 ;PF02-1 PF14
  4FD7*   20 20 20 20    C      
  4FDB*   20 20 20 20    C      
  4FDF*   20 20 20 55    C      
  4FE3*   4E 49 54 3D    C      
  4FE7*   35 30 35 30    C      
  4FEB*   2C 56 4F 4C    C      
  4FEF*   3D 53 45 52    C      
  4FF3*   3D 42 42 6F    C      
'DEG2000 V. 1.2    PF - Belegungen'	MACRO-80 3.44	09-Dec-81	PAGE	1-136


  4FF7*   6F 6F 6F 2C    C      
  4FFB*   44 49 53 50    C      
  4FFF*   3D 28 2C 50    C      
  5003*   41 53 53 29    C      
  5007*   2C             C      
  5008*   001E           C      	DW	SD.NL
  500A*   4E 45 57 4D    C      	DB	'NEWMEMBER      name,R01'                                                               ;PF03-1 PF15
  500E*   45 4D 42 45    C      
  5012*   52 20 20 20    C      
  5016*   20 20 20 6E    C      
  501A*   61 6D 65 2C    C      
  501E*   52 30 31       C      
  5021*   001E           C      	DW	SD.NL
                         C      ; ----
  5023*   53 54 41 52    C      	DB	'START    AUTOINCL'                                                                     ;PF04-1 PF16
  5027*   54 20 20 20    C      
  502B*   20 41 55 54    C      
  502F*   4F 49 4E 43    C      
  5033*   4C             C      
  5034*   001E           C      	DW	SD.NL
  5036*   50 41 52 4D    C      	DB	'PARM.PRINT'                                                                            ;PF05-1 PF17
  503A*   2E 50 52 49    C      
  503E*   4E 54          C      
  5040*   001E           C      	DW	SD.NL
  5042*   49 4E 43 4C    C      	DB	'INCLUDE        name'                                                                   ;PF06-1 PF18
  5046*   55 44 45 20    C      
  504A*   20 20 20 20    C      
  504E*   20 20 20 6E    C      
  5052*   61 6D 65       C      
  5055*   001E           C      	DW	SD.NL
                         C      ; ----
  5057*   20 20 20 20    C      	DB	'         INCL  (oooooooo,oooooooo)'                                                    ;PF07-1 PF19
  505B*   20 20 20 20    C      
  505F*   20 49 4E 43    C      
  5063*   4C 20 20 28    C      
  5067*   6F 6F 6F 6F    C      
  506B*   6F 6F 6F 6F    C      
  506F*   2C 6F 6F 6F    C      
  5073*   6F 6F 6F 6F    C      
  5077*   6F 29          C      
  5079*   001E           C      	DW	SD.NL
  507B*   20 6F 6F 6F    C      	DB	' oooooooo'                                                                             ;PF08-1 PF20
  507F*   6F 6F 6F 6F    C      
  5083*   6F             C      
  5084*   001E           C      	DW	SD.NL
  5086*   23 45 4E 44    C      	DB	'#ENDE#'                                                                                ;PF09-1 PF21
  508A*   45 23          C      
  508C*   001E           C      	DW	SD.NL
                         C      ; ----
  508E*   41 2C 45 58    C      	DB	'A,EXTRN        KOM'                                                                    ;PF10-1 PF22
  5092*   54 52 4E 20    C      
  5096*   20 20 20 20    C      
  509A*   20 20 20 4B    C      
  509E*   4F 4D          C      
  50A0*   001E           C      	DW	SD.NL
  50A2*   43 4F 4E 54    C      	DB	'CONTROL  ALL   FILPRINT,FIL#M01'                                                       ;PF11-1 PF23
  50A6*   52 4F 4C 20    C      
  50AA*   20 41 4C 4C    C      
  50AE*   20 20 20 46    C      
  50B2*   49 4C 50 52    C      
  50B6*   49 4E 54 2C    C      
  50BA*   46 49 4C 23    C      
  50BE*   4D 30 31       C      
  50C1*   001E           C      	DW	SD.NL
  50C3*   2E 2F 20 20    C      	DB	'./       CHANGE NAME=name,newname,R02'                                                 ;PF12-1 PF24
  50C7*   20 20 20 20    C      
  50CB*   20 43 48 41    C      
  50CF*   4E 47 45 20    C      
  50D3*   4E 41 4D 45    C      
  50D7*   3D 6E 61 6D    C      
  50DB*   65 2C 6E 65    C      
  50DF*   77 6E 61 6D    C      
  50E3*   65 2C 52 30    C      
  50E7*   32             C      
  50E8*   001E           C      	DW	SD.NL
                         C      ; === Ebene 2
  50EA*   20 20 20 20    C      	DB	'         TEXT  titelzeile'                                                             ;PF01-2 PF25
  50EE*   20 20 20 20    C      
  50F2*   20 54 45 58    C      
  50F6*   54 20 20 74    C      
  50FA*   69 74 65 6C    C      
  50FE*   7A 65 69 6C    C      
  5102*   65             C      
'DEG2000 V. 1.2    PF - Belegungen'	MACRO-80 3.44	09-Dec-81	PAGE	1-137


  5103*   001E           C      	DW	SD.NL
  5105*   20 20 20 20    C      	DB	'         PRINT name'                                                                   ;PF02-2 PF26
  5109*   20 20 20 20    C      
  510D*   20 50 52 49    C      
  5111*   4E 54 20 6E    C      
  5115*   61 6D 65       C      
  5118*   001E           C      	DW	SD.NL
  511A*   45 58 2C 46    C      	DB	'EX,FILPRINT    INHALT*'                                                                ;PF03-2 PF27
  511E*   49 4C 50 52    C      
  5122*   49 4E 54 20    C      
  5126*   20 20 20 49    C      
  512A*   4E 48 41 4C    C      
  512E*   54 2A          C      
  5130*   001E           C      	DW	SD.NL
                         C      ; ----
  5132*   75 6D 73 63    C      	DB	'umschlagtitel '                                                                        ;PF04-2 PF28
  5136*   68 6C 61 67    C      
  513A*   74 69 74 65    C      
  513E*   6C 20          C      
  5140*   001E           C      	DW	SD.NL
  5142*   56 56 56 56    C      	DB	'VVVVVVttmmjjDRnnMCR1FRbbbbb0001KOI7ECLK'                                               ;PF05-2 PF29
  5146*   56 56 74 74    C      
  514A*   6D 6D 6A 6A    C      
  514E*   44 52 6E 6E    C      
  5152*   4D 43 52 31    C      
  5156*   46 52 62 62    C      
  515A*   62 62 62 30    C      
  515E*   30 30 31 4B    C      
  5162*   4F 49 37 45    C      
  5166*   43 4C 4B       C      
  5169*   001E           C      	DW	SD.NL
  516B*   2F 2F          C      	DB	'//'                                                                                    ;PF06-2 PF30
  516D*   001E           C      	DW	SD.NL
                         C      ; ----
  516F*   20 45 51 20    C      	DB	' EQ '                                                                                  ;PF07-2 PF31
  5173*   00             C      	DB	0
  5174*   00             C      	DB	0                                                                                       ;PF08-2 PF32
  5175*   20 4E 45 20    C      	DB	' NE '                                                                                  ;PF09-2 PF33
  5179*   00             C      	DB	0
                         C      ; ----
  517A*   20 4F 52 20    C      	DB	' OR '                                                                                  ;PF10-2 PF34
  517E*   00             C      	DB	0
  517F*   00             C      	DB	0                                                                                       ;PF11-2 PF35
  5180*   20 41 4E 44    C      	DB	' AND '                                                                                 ;PF12-2 PF36
  5184*   20             C      
  5185*   00             C      	DB	0
                         C      ; === Ebene 2
  5186*   41 49 46 20    C      	DB	'AIF   ('                                                                               ;PF01-3 PF37
  518A*   20 20 28       C      
  518D*   00             C      	DB	0
  518E*   41 47 4F 20    C      	DB	'AGO   .'                                                                               ;PF02-3 PF38
  5192*   20 20 2E       C      
  5195*   00             C      	DB	0
  5196*   41 4E 4F 50    C      	DB	'ANOP'                                                                                  ;PF03-3 PF39
  519A*   00             C      	DB	0
                         C      ; ----
  519B*   53 45 54 61    C      	DB	'SETa  '                                                                                ;PF04-3 PF40
  519F*   20 20          C      
  51A1*   00             C      	DB	0
  51A2*   4D 4E 4F 54    C      	DB	'MNOTE *,'                                                                              ;PF05-3 PF41
  51A6*   45 20 2A 2C    C      
  51AA*   00             C      	DB	0
  51AB*   26 53 59 53    C      	DB	'&SYSLIST('                                                                             ;PF06-3 PF42
  51AF*   4C 49 53 54    C      
  51B3*   28             C      
  51B4*   00             C      	DB	0
                         C      ; ----
  51B5*   44 43 20 20    C      	DB	'DC    CL'                                                                              ;PF07-3 PF43
  51B9*   20 20 43 4C    C      
  51BD*   00             C      	DB	0
  51BE*   26 41 2B       C      	DB	'&A+'                                                                                   ;PF08-3 PF44
  51C1*   00             C      	DB	0
  51C2*   26 50 52 4D    C      	DB	'&PRMCa('                                                                               ;PF09-3 PF45
  51C6*   43 61 28       C      
  51C9*   00             C      	DB	0
                         C      ; ----
  51CA*   00             C      	DB	0                                                                                       ;PF10-3 PF46
  51CB*   00             C      	DB	0                                                                                       ;PF11-3 PF47
  51CC*   00             C      	DB	0                                                                                       ;PF12-3 PF48
  51CC*                  C      PF.O2END EQU	$-1
                         C      	PAGE
'DEG2000 V. 1.2    PF - Belegungen'	MACRO-80 3.44	09-Dec-81	PAGE	1-138


                         C      
                         C      ;****************************************************************
  51CD*                  C      PF.O3ANF EQU	$
  51CD*   00             C      	DB	0
  51CE*   00             C      	DB	0
  51CF*   00             C      	DB	0
  51CF*                  C      PF.O3END EQU	$-1
                         C      
                         C      	TITLE 'Aufruf SYS2'
                         C      	PAGE
'Aufruf SYS2'	MACRO-80 3.44	09-Dec-81	PAGE	1-139


                         C      
                         C      ;****************************************************************
                         C      	IF	SD.GENE AND 00000001B
                         C      	DW	$
                         C      	DB	'S2  '
                         C      PF.S2:
                         C      	OUT	(0C4H),A	;RESET-Sperre aus
                         C      	LD	A,0FEH
                         C      	OUT	(0C0H),A	;SYS 1
                         C      	LD	A,01
                         C      	OUT	(0C1H),A	;SYS 2
                         C      	JP	0FF37H	;Sprung zur Version 2.1
                         C      			;           Version 2.0 : 0C093H
                         C      	ENDIF
                         C      ;****************************************************************
                         C      
                         C      
                         C      	TITLE 'Aufruf SYS3'
                         C      	PAGE
'Aufruf SYS3'	MACRO-80 3.44	09-Dec-81	PAGE	1-140


                         C      
                         C      ;****************************************************************
                         C      	IF	SD.GENE AND 00010000B	;DEG2000 Emulator
                         C      			;Aufruf des Systems   S Y S 3
  51D0*   51D0*          C      	DW	$
  51D2*   53 33 2D 4D    C      	DB	'S3-M'	;       mit  Rahmen
  51D6*                  C      PF.S3M:
  51D6*   CD 522E*       C      	CALL	PF.BSLOE
  51D9*   CD 51F6*       C      	CALL	PF.BSRAH
  51DC*   18 09          C      	JR	PF.SYS31
                         C      
  51DE*   51DE*          C      	DW	$
  51E0*   53 33 2D 4F    C      	DB	'S3-O'	;       ohne Rahmen
  51E4*   CD 522E*       C      	CALL	PF.BSLOE
  51E7*                  C      PF.SYS31:
  51E7*   01 04C0        C      	LD	BC,004C0H
  51EA*   21 51F2*       C      	LD	HL,PF.SYS31a
  51ED*   ED B3          C      	OTIR
                         C      
  51EF*   C3 A800        C      	JP	0A800H	;0B40DH
                         C      
  51F2*                  C      PF.SYS31a:			;###
  51F2*   F0             C      	DB	0F0H	;Startbyte
  51F3*   03             C      	DB	003H	;wahl
  51F4*   08             C      	DB	008H	;Sys_31
  51F5*   FF             C      	DB	0FFH	;Endbyte
                         C      
                         C      
  51F6*                  C      PF.BSRAH:
  51F6*   21 30F7        C      	LD	HL,SD.BWSA + 80* 3 + 7	;Bildrahmen erzeugen  0F7H
  51F9*   11 30F9        C      	LD	DE,SD.BWSA + 80* 3 + 9	;0F9H
  51FC*   01 0040        C      	LD	BC,64
  51FF*   36 82          C      	LD	(HL),082H
  5201*   23             C      	INC	HL
  5202*   36 81          C      	LD	(HL),081H
  5204*   ED B0          C      	LDIR
  5206*   36 83          C      	LD	(HL),083H
  5208*   21 3647        C      	LD	HL,SD.BWSA + 80*20 + 7	;647H
  520B*   11 3649        C      	LD	DE,SD.BWSA + 80*20 + 9	;649H
  520E*   01 0040        C      	LD	BC,64
  5211*   36 8A          C      	LD	(HL),08AH
  5213*   23             C      	INC	HL
  5214*   36 81          C      	LD	(HL),081H
  5216*   ED B0          C      	LDIR
  5218*   36 8B          C      	LD	(HL),08BH
  521A*   21 3147        C      	LD	HL,SD.BWSA + 80* 4 + 7	;147H
  521D*   06 10          C      	LD	B,16
  521F*                  C      PF.SYS30:
  521F*   36 80          C      	LD	(HL),080H
  5221*   11 0041        C      	LD	DE,65
  5224*   19             C      	ADD	HL,DE
  5225*   36 80          C      	LD	(HL),080H
  5227*   11 000F        C      	LD	DE,15
  522A*   19             C      	ADD	HL,DE
  522B*   10 F2          C      	DJNZ	PF.SYS30
  522D*   C9             C      	RET
                         C      
  522E*                  C      PF.BSLOE:
  522E*   21 3000        C      	LD	HL,SD.BWSA
  5231*   11 3001        C      	LD	DE,SD.BWSA+1
  5234*   01 077F        C      	LD	BC,24*80 - 1	;007FFH
  5237*   36 20          C      	LD	(HL),' '
  5239*   ED B0          C      	LDIR
  523B*   C9             C      	RET
                         C      	ENDIF
                         C      
                         C      	TITLE 'Aufruf SYS4'
                         C      	PAGE
'Aufruf SYS4'	MACRO-80 3.44	09-Dec-81	PAGE	1-141


                         C      
                         C      	IF	SD.GENE AND 00010000B	;DEG2000 Emulator
  523C*   523C*          C      	DW	$
  523E*   53 34 20 20    C      	DB	'S4  '
  5242*                  C      PF.S4:
  5242*   01 04C0        C      	LD	BC,004C0H
  5245*   21 5250*       C      	LD	HL,PF.OUTB2
  5248*   ED B3          C      	OTIR
  524A*   21 524E*       C      	LD	HL,PF.OUTB1+1
  524D*                  C      PF.OUTB1:
  524D*   C3 0000        C      	JP	00000H	;!!!!	;Sprung zum BIOS-Anfang
  5250*                  C      PF.OUTB2:
  5250*   F0             C      	DB	0F0H	;Startbyte
  5251*   03             C      	DB	003H	;wahl
  5252*   05             C      	DB	005H	;Sys_44
  5253*   FF             C      	DB	0FFH	;Endbyte
                         C      	ENDIF
                         C      
                         C      	TITLE ''
                         C      	PAGE
''	MACRO-80 3.44	09-Dec-81	PAGE	1-142


                         C      
  5254*                  C      PF.MINTP	EQU	$
                         C      	IF	SD.GENE AND 00000010B
                         C      	LD	BC,SD.SPST  ;Sektoren 0, 1, 2, 3 wegschalten
                         C      	LD	E,4
                         C      	LD	A,8         ;<--|
                         C      	OUT	(C),A       ;   |
                         C      	LD	A,B         ;   |
                         C      	ADD	A,10H       ;   |
                         C      	LD	B,A         ;   |
                         C      	DEC	E           ;   |
                         C      	JR	NZ,$-9      ;---|
                         C      	ENDIF
                         C      
                         C      	IF	SD.GENE AND 00000100B
                         C      	XOR	A           ;Sektoren 0, 1, 2, 3 wegschalten
                         C      	LD	B,4
                         C      	EXX             ;<--|
                         C      	LD	B,A         ;   |
                         C      	LD	C,SD.SPST+5 ;   |
                         C      	OUT	(C),A       ;   |
                         C      	LD	C,SD.SPST+7 ;   |
                         C      	OUT	(C),A       ;   |
                         C      	ADD	A,10H       ;   |
                         C      	EXX             ;   |
                         C      	DJNZ	$-13    ;---|
                         C      	ENDIF
                         C      
                         C      	IF	SD.GENE AND 00001110B
                         C      	LD	HL,PF.UP1   ;RESET - Eintrittsadresse setzen
                         C      	LD	(00C02H),HL
                         C      	ENDIF
                         C      
                         C      	IF	SD.GENE AND 00000010B
                         C      	LD	BC,SD.SPST  ;Sektoren 0, 1, 2    zuschalten
                         C      	LD	E,3
                         C      	XOR	A           ;<--|
                         C      	OUT	(C),A       ;   |
                         C      	LD	A,B         ;   |
                         C      	ADD	A,10H       ;   |
                         C      	LD	B,A         ;   |
                         C      	DEC	E           ;   |
                         C      	JR	NZ,$-8      ;---|
                         C      	ENDIF
                         C      
                         C      	IF	SD.GENE AND 00000100B
                         C      	XOR	A           ;Sektoren 0, 1, 2    zuschalten
                         C      	LD	B,3
                         C      	EXX             ;<--|
                         C      	LD	B,A         ;   |
                         C      	LD	C,SD.SPST+4 ;   |
                         C      	OUT	(C),A       ;   |
                         C      	LD	C,SD.SPST+6 ;   |
                         C      	OUT	(C),A       ;   |
                         C      	ADD	A,10H       ;   |
                         C      	EXX             ;   |
                         C      	DJNZ	$-13    ;---|
                         C      	ENDIF
                         C      
                         C      	IF	SD.GENE AND 00001110B
                         C      	LD	HL,08000H	;"ZRE-PROM" - Bereich umladen
                         C      	LD	DE,00000H
                         C      	LD	BC,00C00H
                         C      	LDIR
                         C      	LD	DE,01000H	;"OFS-PROM" - Bereich umladen
                         C      	LD	BC,01800H
                         C      	LDIR
                         C      	JP	00000H	;Aufruf  DEG2000  Version 1.2
                         C      
                         C      PF.UP1	EQU	$	;Eintrittsroutine fuer  R E S E T
                         C      	ENDIF
                         C      
                         C      	IF	SD.GENE AND 00000010B
                         C      	LD	BC,SD.SPST  ;Sektoren 0, 1, 2, 3 wegschalten
                         C      	LD	E,4
                         C      	LD	A,8         ;<--|
                         C      	OUT	(C),A       ;   |
                         C      	LD	A,B         ;   |
                         C      	ADD	A,10H       ;   |
                         C      	LD	B,A         ;   |
                         C      	DEC	E           ;   |
                         C      	JR	NZ,$-9      ;---|
''	MACRO-80 3.44	09-Dec-81	PAGE	1-143


                         C      
                         C      	LD	BC,SD.SPST  ;Sektoren 0, 1, 2    zuschalten
                         C      	LD	E,3
                         C      	XOR	A           ;<--|
                         C      	OUT	(C),A       ;   |
                         C      	LD	A,B         ;   |
                         C      	ADD	A,10H       ;   |
                         C      	LD	B,A         ;   |
                         C      	DEC	E           ;   |
                         C      	JR	NZ,$-8      ;---|
                         C      	ENDIF
                         C      
                         C      	IF	SD.GENE AND 00000100B
                         C      	XOR	A           ;Sektoren 0, 1, 2, 3 wegschalten
                         C      	LD	B,4
                         C      	EXX             ;<--|
                         C      	LD	B,A         ;   |
                         C      	LD	C,SD.SPST+5 ;   |
                         C      	OUT	(C),A       ;   |
                         C      	LD	C,SD.SPST+7 ;   |
                         C      	OUT	(C),A       ;   |
                         C      	ADD	A,10H       ;   |
                         C      	EXX             ;   |
                         C      	DJNZ	$-13    ;---|
                         C      
                         C      	XOR	A           ;Sektoren 0, 1, 2    zuschalten
                         C      	LD	B,3
                         C      	EXX             ;<--|
                         C      	LD	B,A         ;   |
                         C      	LD	C,SD.SPST+4 ;   |
                         C      	OUT	(C),A       ;   |
                         C      	LD	C,SD.SPST+6 ;   |
                         C      	OUT	(C),A       ;   |
                         C      	ADD	A,10H       ;   |
                         C      	EXX             ;   |
                         C      	DJNZ	$-13    ;---|
                         C      	ENDIF
                         C      
                         C      	IF	SD.GENE AND 00001110B
                         C      	JP	00000H
                         C      
                         C      	DW	$
                         C      	DB	'URL '
                         C      	ENDIF
                         C      
                         C      	IF	SD.GENE AND 00000010B
                         C      	LD	BC,SD.SPST  ;Sektoren 0, 1, 2    wegschalten
                         C      	LD	E,3
                         C      	LD	A,8         ;<--|
                         C      	OUT	(C),A       ;   |
                         C      	LD	A,B         ;   |
                         C      	ADD	A,10H       ;   |
                         C      	LD	B,A         ;   |
                         C      	DEC	E           ;   |
                         C      	JR	NZ,$-9      ;---|
                         C      	ENDIF
                         C      
                         C      	IF	SD.GENE AND 00000100B
                         C      	XOR	A           ;Sektoren 0, 1, 2    wegschalten
                         C      	LD	B,3
                         C      	EXX             ;<--|
                         C      	LD	B,A         ;   |
                         C      	LD	C,SD.SPST+5 ;   |
                         C      	OUT	(C),A       ;   |
                         C      	LD	C,SD.SPST+7 ;   |
                         C      	OUT	(C),A       ;   |
                         C      	ADD	A,10H       ;   |
                         C      	EXX             ;   |
                         C      	DJNZ	$-13    ;---|
                         C      	ENDIF
                         C      
                         C      	IF	SD.GENE AND 00001110B
                         C      	JP	00000H		;Aufruf des  U r l a d e r s
                         C      	ENDIF
                         C      
  5254*                  C      PF.ENDE	EQU	$
                         C      			;Stand: 21.Februar 85 - K EAW/wfvm..MSH
                         C      
                         C      ;	END
                                
                                	TITLE 'Symbolliste S1a'
                                	END
'Symbolliste S1a'	MACRO-80 3.44	09-Dec-81	PAGE	S


Macros:
SY.ZAN          

Symbols:
139F*	E1.ABS          13B4*	E1.ATTR         13BD*	E1.ATTR1        
12CA*	E1.BIL          12CD*	E1.BIL1         1378*	E1.BIZA         
1243*	E1.CNEW         126C*	E1.CNEW1        126F*	E1.CNEW2        
125A*	E1.CNEW3        13DB*	E1.DELZ         147F*	E1.HT           
12D4*	E1.LEERZ        1293*	E1.LIFT         1299*	E1.LIFT1        
12B4*	E1.LOBP1        12B1*	E1.LOEBP        1390*	E1.NUM          
1393*	E1.NUM1         1459*	E1.PS           1474*	E1.PS1          
146B*	E1.PS2          144E*	E1.PTEST        13E8*	E1.PTS1         
13F1*	E1.PTS10        13F2*	E1.PTS11        13F3*	E1.PTS12        
13F4*	E1.PTS13        13F5*	E1.PTS14        13F6*	E1.PTS15        
13F7*	E1.PTS16        13F8*	E1.PTS17        13F9*	E1.PTS18        
13FA*	E1.PTS19        13E9*	E1.PTS2         13FB*	E1.PTS20        
13FC*	E1.PTS21        13FD*	E1.PTS22        13FE*	E1.PTS23        
13FF*	E1.PTS24        1400*	E1.PTS25        1401*	E1.PTS26        
1402*	E1.PTS27        1403*	E1.PTS28        1404*	E1.PTS29        
13EA*	E1.PTS3         1405*	E1.PTS30        1406*	E1.PTS31        
1407*	E1.PTS32        1408*	E1.PTS33        1409*	E1.PTS34        
140A*	E1.PTS35        140B*	E1.PTS36        140C*	E1.PTS37        
140D*	E1.PTS38        140E*	E1.PTS39        13EB*	E1.PTS4         
140F*	E1.PTS40        1410*	E1.PTS41        1411*	E1.PTS42        
1412*	E1.PTS43        1413*	E1.PTS44        1414*	E1.PTS45        
1415*	E1.PTS46        1416*	E1.PTS47        1417*	E1.PTS48        
13EC*	E1.PTS5         13ED*	E1.PTS6         13EE*	E1.PTS7         
13EF*	E1.PTS8         13F0*	E1.PTS9         142F*	E1.PTS91        
1422*	E1.PTS92        1433*	E1.PTS93        1444*	E1.PTSN1        
144C*	E1.PTSN2        1437*	E1.PTSNR        12BC*	E1.PUFLO        
12BF*	E1.PULO         13CE*	E1.REPEL        12EB*	E1.TAB          
1304*	E1.TAB1         12F7*	E1.TAB2         1338*	E1.TABL         
1343*	E1.TABL1        1318*	E1.TABS         131F*	E1.TABS1        
1323*	E1.TABS3        132D*	E1.TABS4        130A*	E1.TAUP         
1312*	E1.TAUP1        130D*	E1.TAUP2        135D*	E1.TCNLS        
1362*	E1.TCNOS        1358*	E1.TCNRS        1367*	E1.TCNUS        
136C*	E1.TCNZA        1374*	E1.TCUR         1371*	E1.THOME        
1279*	E1.UMLZ1        1285*	E1.ZEINR        1387*	E1.ZNUM         
123A*	E1.ZSCH1        1239*	E1.ZSCHR        1234*	E1.ZSCHS        
150F*	E2.ERR5A        1509*	E2.ERR7A        1505*	E2.ERR99        
150D*	E2.ERRO5        17C2*	E2.KOM          17D9*	E2.KOM3         
17EC*	E2.KOMTR        180E*	E2.KOMZ2        1812*	E2.KOMZ3        
1807*	E2.KOMZ4        1603*	E2.LANG         1600*	E2.LANG1        
1778*	E2.MARK         162E*	E2.MARKR        1662*	E2.MRK          
1689*	E2.MRK1         1692*	E2.MRK2         167C*	E2.MRK3         
1686*	E2.MRK4         163C*	E2.MRKR1        1657*	E2.MRKR2        
1647*	E2.MRKR3        1651*	E2.MRKR4        15F9*	E2.NKOR1        
15E4*	E2.NKORR        157B*	E2.NZEI         15D6*	E2.NZEI1        
15E1*	E2.NZEI3        15CB*	E2.NZEI4        159E*	E2.NZEI6        
1594*	E2.NZEI7        157F*	E2.NZEI8        15B4*	E2.NZEIR        
15A5*	E2.NZEIV        179E*	E2.OP1          1793*	E2.OP2          
17AB*	E2.OP3          17B9*	E2.OP4          178D*	E2.OPCO         
17A2*	E2.OPRD         1816*	E2.POSI0        1819*	E2.POSIT        
15FD*	E2.QLANG        14F5*	E2.RESET        170E*	E2.RUF1         
16F5*	E2.RUF2         1705*	E2.RUF3         1713*	E2.RUF4         
16D0*	E2.RUF5         16FE*	E2.RUF6         1752*	E2.RUFQ         
1737*	E2.RUFQ1        173F*	E2.RUFQ2        171A*	E2.RUFQ3        
1719*	E2.RUFQ4        171F*	E2.RUFQ5        16BE*	E2.RUFT         
16B8*	E2.RUFTF        14FE*	E2.SET          1553*	E2.SPR          
160B*	E2.SUCH         1615*	E2.SUCH1        1622*	E2.SUCHR        
14AF*	E2.TEX          1512*	E2.TEX0         1495*	E2.TEXL         
148B*	E2.TEXR         1490*	E2.TEXS         1484*	E2.TEXV         
1524*	E2.TEXV1        14E0*	E2.TEXV2        14C9*	E2.TEXV3        
14E8*	E2.TEXW         1822*	E2.UML          18DD*	E2.UML1         
18FB*	E2.UML2         1900*	E2.UML4         190A*	E2.UML5         
18F3*	E2.UML6         1845*	E2.UMLA         1854*	E2.UMLAD        
188F*	E2.UMLBT        1874*	E2.UMLC         184F*	E2.UMLE         
1899*	E2.UMLF         18A5*	E2.UMLF0        18C2*	E2.UMLF1        
18CA*	E2.UMLF2        18D3*	E2.UMLF3        18D7*	E2.UMLFR        
1887*	E2.UMLR         182E*	E2.UMLT         182C*	E2.UMLT1        
155B*	E2.ZNR          1571*	E2.ZNR0         1570*	E2.ZNR1         
1564*	E2.ZNR2         16A9*	E2.ZNUMX        16B2*	E2.ZNX1         
16AC*	E2.ZNX2         1AA7*	E3.ERR2A        1987*	E3.ERR3A        
1A8C*	E3.ERR5B        1A8B*	E3.ERR5C        1941*	E3.ERRO2        
1988*	E3.ERRO3        19A9*	E3.ERRO4        19F7*	E3.ERRO7        
1A92*	E3.ERRO8        1BF2*	E3.ERRR         19FC*	E3.EXCH         
1943*	E3.FEHL         1946*	E3.FEHL1        1914*	E3.KOMAN        
1A35*	E3.LESE         1A42*	E3.LESE1        1AAB*	E3.MOVE         
1ADC*	E3.MOVE1        1A98*	E3.MOVE2        1AFC*	E3.MOVE3        
1B53*	E3.MOVE4        1B3E*	E3.MOVEV        1A24*	E3.NEU1         
1A1E*	E3.NEUST        197E*	E3.PL3          1BE4*	E3.PTER4        
1BEA*	E3.PTER9        1BD6*	E3.PTEX         1B5C*	E3.PTSL         
1B8E*	E3.PTSL1        1A4E*	E3.STAN         1A60*	E3.STAN1        
'Symbolliste S1a'	MACRO-80 3.44	09-Dec-81	PAGE	S-1


1A4F*	E3.STAN2        1A57*	E3.STAN3        1A73*	E3.STAN5        
1A5A*	E3.STAN6        19E3*	E3.TAU1         19EB*	E3.TAU2         
19CC*	E3.TAU3         19DC*	E3.TAU4         19F4*	E3.TAU5         
19D9*	E3.TAU6         19AE*	E3.TAUS         1962*	E3.Z1           
196E*	E3.Z3           1972*	E3.Z4           198E*	E3.ZEIK         
1995*	E3.ZEIKA        199F*	E3.ZEIKB        199C*	E3.ZEIKC        
1949*	E3.ZET          1969*	E3.ZET1         1C4C*	E4.ERR0         
1C4A*	E4.ERR13        1C51*	E4.FERTL        1CC8*	E4.ISO          
1C6C*	E4.LEER         1C83*	E4.LEER1        1C00*	E4.LESER        
1C06*	E4.LLQ0         1C41*	E4.LLQ2         1C25*	E4.LLQ6         
1C5D*	E4.LSQ1         1D37*	E4.MBIF         1D3F*	E4.MBIF1        
1D48*	E4.MBIF2        1D54*	E4.MBIF3        1D58*	E4.MBIF4        
1C57*	E4.STANZ        1C8B*	E4.STEND        1CF9*	E4.TAB          
1152*	ED.ARBFK        114F*	ED.ARBPH        10AF*	ED.ERRO1        
1176*	ED.FALAT        1182*	ED.FALFT        10DF*	ED.FREI         
10CA*	ED.FREI2        1146*	ED.KOEIN        10F4*	ED.KOMA1        
10CF*	ED.KOMA2        10FD*	ED.KOMA3        113B*	ED.KONER        
1130*	ED.KONEV        000F 	ED.LZED1        1067*	ED.MEL1         
106A*	ED.MEL11        1017*	ED.MEL12        1020*	ED.MEL13        
1030*	ED.MEL14        1039*	ED.MEL15        1045*	ED.MEL16        
1051*	ED.MEL17        105B*	ED.MEL18        1062*	ED.MEL19        
1064*	ED.MEL2         1027*	ED.MEL21        1025*	ED.MEL22        
1094*	ED.MEL3         1006*	ED.MELAN        109E*	ED.MELNL        
10B4*	ED.QUELL        1169*	ED.UMLKP        10C7*	ED.VOLLF        
1224*	ED.ZED1         67DF 	KH.BILO         4066*	KMBINI          
4060*	KMBROB          4063*	KMBRUC          451D*	LR.ILBL         
44AF*	LR.ILBS         4476*	LR.IRLB         4585*	LR.IRLBL        
4505*	LR.IRLBS        447A*	LR.KONV         448A*	LR.KONV1        
449C*	LR.KONV2        449F*	LR.KONV3        0001 	LR.LBGEN        
4512*	LR.LBL          4547*	LR.LBL2         4551*	LR.LBL3         
455A*	LR.LBL4         456A*	LR.LBLE         44A1*	LR.LBS          
44E6*	LR.LBS1         44D2*	LR.LBS2         44ED*	LR.LBSE         
4050*	LR.LRLBL        4053*	LR.LRLBS        459A*	LR.SKTBI        
469A*	LR.SKTBO        4594*	LR.SWLBL        458E*	LR.SWLBS        
231A*	ME.AAALT        2BE0*	ME.AADR         2BEC*	ME.AADR1        
1F28*	ME.ABLVO        202A*	ME.ACLNK        203E*	ME.ACLNZ        
1FA8*	ME.ACREC        1FBC*	ME.ACRNZ        1DDB*	ME.AHOME        
2BEE*	ME.AKTA1        2BE2*	ME.AKTAD        1E2A*	ME.ANEWL        
1D84*	ME.ANZ11        1D8D*	ME.ANZ12        1D97*	ME.ANZ13        
1DAA*	ME.ANZ1B        1D7B*	ME.ANZ1Z        21DB*	ME.ASCM1        
1ED1*	ME.ASCMD        21C3*	ME.ASCMO        1EF6*	ME.ASMD1        
1EF0*	ME.ASMD2        225C*	ME.ATACO        20B9*	ME.AUPU1        
2080*	ME.AUPUF        1D9F*	ME.AZ4B1        1D9C*	ME.AZ4BY        
1D72*	ME.AZBL1        1D77*	ME.AZBL2        1D5E*	ME.AZBLD        
1F36*	ME.BLRU1        1F2C*	ME.BLRUC        1F21*	ME.BLVO1        
1F0C*	ME.BLVO2        1F09*	ME.BLVO3        1EFF*	ME.BLVOR        
2BF2*	ME.BPZE1        2BE6*	ME.BPZEI        1DEF*	ME.BSAD1        
1DF2*	ME.BSAD2        1DFD*	ME.BSADL        1DDF*	ME.BSADR        
1E01*	ME.BSADS        2BF1*	ME.BZEI1        2BE5*	ME.BZEIN        
2BEB*	ME.BZMAX        1E49*	ME.CAKA1        1E40*	ME.CAKA2        
1E35*	ME.CAKAL        1EE0*	ME.CBPZ         206A*	ME.CCPO         
1E95*	ME.CHBLD        1E85*	ME.CHOC1        1E78*	ME.CHOCH        
2019*	ME.CLCBD        1FEF*	ME.CLDE2        1FF9*	ME.CLDE3        
1FEB*	ME.CLDE4        1FDF*	ME.CLDEC        1FC0*	ME.CLINK        
2001*	ME.CLNZ         2013*	ME.CLNZ1        2006*	ME.CLNZ2        
1F5C*	ME.CRAIC        1E69*	ME.CRBLD        1F99*	ME.CRCBD        
1F6C*	ME.CREC2        1F76*	ME.CREC3        1F68*	ME.CREC4        
1F3D*	ME.CRECH        1F7E*	ME.CRNZ         1F93*	ME.CRNZ1        
1F83*	ME.CRNZ2        1E5B*	ME.CRUN1        1E4B*	ME.CRUNT        
233B*	ME.CVAX         2358*	ME.CVX11        2366*	ME.CVX1B        
235B*	ME.CVXA         2344*	ME.CVXB         219F*	ME.DECB1        
217A*	ME.DECBZ        20C9*	ME.DELL         20E1*	ME.DELL1        
223F*	ME.DSBAH        21E2*	ME.DSBH         232B*	ME.DSPA1        
2323*	ME.DSPAD        2331*	ME.DSPOI        23CC*	ME.END          
2139*	ME.GET          215C*	ME.GET1         2149*	ME.GET2         
23CD*	ME.HC           2396*	ME.HC01         239D*	ME.HC02         
23AB*	ME.HC021        23AE*	ME.HC03         23C8*	ME.HC04         
2372*	ME.HDCOP        1EC6*	ME.HEMD1        1EC0*	ME.HEMD2        
222A*	ME.HEXM0        2247*	ME.HEXM1        21F6*	ME.HEXMO        
1DBF*	ME.HOME         1DD0*	ME.HOME1        216C*	ME.INCBZ        
2042*	ME.INPUF        211D*	ME.INSLN        2204*	ME.LHB          
2211*	ME.LHB1         2BE4*	ME.MOD          2BF0*	ME.MOD1         
1E08*	ME.NEWL         1E20*	ME.NEWL1        22E8*	ME.NHEXA        
2C00 	ME.PUFAN        2BE7*	ME.PUZEI        1EBA*	ME.REFAH        
1EEA*	ME.REFHA        21A3*	ME.REFTB        2221*	ME.RHB          
2257*	ME.RHB1         212D*	ME.SAVE         2133*	ME.SAVE1        
2168*	ME.STAR1        2160*	ME.START        1DBA*	ME.SYS          
226C*	ME.SYSM         236C*	ME.TAREP        1DB7*	ME.TASC1        
1DAF*	ME.TASCI        226E*	ME.TAUSF        20EB*	ME.TDEL         
1E2E*	ME.TSZMX        1EA6*	ME.UMOD         2BE9*	ME.VTAS         
23DE*	ME.ZKEIN        2B00 	ME.ZN           0008 	P1.ANST         
4955*	P1.B1           4960*	P1.B3           496C*	P1.B4           
496D*	P1.B6           4914*	P1.CL1          49AB*	P1.CPI          
'Symbolliste S1a'	MACRO-80 3.44	09-Dec-81	PAGE	S-2


49AD*	P1.CPI1         4997*	P1.CPI10        499C*	P1.CPI12        
0002 	P1.DRU          0000 	P1.ES2          48A9*	P1.IN1          
49A1*	P1.LPI6         49A6*	P1.LPI8         4945*	P1.M1           
4948*	P1.M2           4940*	P1.M3           4882*	P1.MRES         
0001 	P1.PIO          4881*	P1.PRINT        48F0*	P1.PRIO         
497A*	P1.SIOTB        4984*	P1.STAT         4951*	P1.ZEI          
498C*	P1.ZEIZ         522E*	PF.BSLOE        51F6*	PF.BSRAH        
5254*	PF.ENDE         49CA*	PF.INIT1        49D3*	PF.INIT2        
5254*	PF.MINTP        49DD*	PF.O1ANF        4DB2*	PF.O1END        
4DB3*	PF.O2ANF        51CC*	PF.O2END        51CD*	PF.O3ANF        
51CF*	PF.O3END        524D*	PF.OUTB1        5250*	PF.OUTB2        
51D6*	PF.S3M          5242*	PF.S4           521F*	PF.SYS30        
51E7*	PF.SYS31        51F2*	PF.SYS31A       47CD*	PR.CPI          
47C9*	PR.CPI10        4043*	PR.DINIT        4874*	PR.END          
47E2*	PR.LPI          47DE*	PR.LPI6         480F*	PR.M2           
4046*	PR.MRES         47F2*	PR.NULL         47F1*	PR.ONULL        
3327 	PR.PAR          4847*	PR.PR1          484E*	PR.PR2          
485A*	PR.PR3          485C*	PR.PR4          479A*	PR.PRINA        
4040*	PR.PRINT        4049*	PR.PRIO         47F8*	PR.SYS          
0733*	S1.ANZ1         0726*	S1.ANZG         06A3*	S1.BHKON        
04B6*	S1.BI1          04BF*	S1.BI2          04E4*	S1.COPG         
06F4*	S1.DA1          06FD*	S1.DA2          059C*	S1.DIV          
059D*	S1.DIV1         0792*	S1.ED1          079D*	S1.ED11         
07A1*	S1.ED2          07B2*	S1.ED3          07BD*	S1.ED4          
07C6*	S1.ED5          07A5*	S1.ED6          07C2*	S1.ED7          
076D*	S1.EDN          070C*	S1.EIN1         0703*	S1.EING         
0554*	S1.ENDF1        0550*	S1.ENDF2        05F0*	S1.ERRO         
05ED*	S1.ERROR        07D3*	S1.ETEST        0559*	S1.FOEX         
0561*	S1.FOEX1        06B9*	S1.HB10         067F*	S1.HBKON        
04FD*	S1.HCP          056B*	S1.HDI          0589*	S1.HDI1         
0599*	S1.HDI3         05A5*	S1.IDH          05C4*	S1.IDH1         
05AD*	S1.IDH2         05B1*	S1.IDH3         06BD*	S1.IDH41        
05C0*	S1.IDHE         05BE*	S1.IDHF         0669*	S1.INPTR        
061D*	S1.KET1         0625*	S1.KET2         0621*	S1.KET3         
061A*	S1.KETTE        0520*	S1.KODE         0528*	S1.KODE1        
0696*	S1.KON1         06B1*	S1.KON2         063D*	S1.LT1Z         
0005 	S1.LZS11        0005 	S1.LZS12        000E 	S1.LZS13        
0504*	S1.M1           0507*	S1.M2           05DD*	S1.MELDE        
05DC*	S1.MELDN        05D3*	S1.MUL10        064F*	S1.MX           
0723*	S1.RET          0659*	S1.RNL          0651*	S1.RNR          
05CC*	S1.SIEBD        0542*	S1.SPOSN        076A*	S1.STAB         
075E*	S1.STAND        052E*	S1.STANL        04D6*	S1.STR          
062F*	S1.SUZA         0633*	S1.SUZA1        0638*	S1.SUZA3        
0629*	S1.SUZEI        075C*	S1.TE1          0747*	S1.TEST         
0661*	S1.UMS          06A0*	S1.ZAHL         054D*	S1.ZENDF        
05FF*	S1.ZS11         0605*	S1.ZS12         060B*	S1.ZS13         
004F 	SD.AMB          2C00 	SD.BPA          3000 	SD.BWSA         
0080 	SD.CTCK0        0002 	SD.CTCKA        0F70 	SD.DEAT         
1000 	SD.EDITA        0010 	SD.GENE         001E 	SD.NL           
8820 	SD.NPA          8410 	SD.NPI          8420 	SD.PFFA         
8010 	SD.PFFI         0030 	SD.PSANZ        0000 	SD.QTAB1        
0009 	SD.QTAB2        000F 	SD.QTAB3        0022 	SD.QTAB4        
0C00 	SD.RAM          0020 	SD.SPACE        0028 	SD.SPST         
0000 	SD.SYSTA        0009 	SD.TAB          000A 	SD.TABZA        
8830 	SD.TPA          FBFF 	SD.TPE          8000 	SD.VPI          
0002 	SD.ZEIT1        0010 	SD.ZEIT2        0F6B*	SM.ADR          
0E52*	SM.AEATB        0E20*	SM.ANFAD        0E26*	SM.BWSE         
0D98*	SM.BZA          0F6D*	SM.CONTR        0E5E*	SM.CRCZ         
0FFC 	SM.CTRL         0FF0 	SM.DATUM        0DAE*	SM.DEL          
0DAC*	SM.DELZ         0FE0 	SM.EAAMB        0F70*	SM.EADRU        
0FA0*	SM.EALBL        0F80*	SM.EALBS        0DB2*	SM.EINA         
0DC6*	SM.END          8000*	SM.ENDE         0017 	SM.F00          
0018 	SM.F000         001C 	SM.FABS         0016 	SM.FCE          
0011 	SM.FCI          0015 	SM.FCTRL        000C 	SM.FDEL         
000E 	SM.FDELLIN      0003 	SM.FDOWN        0014 	SM.FE0          
001E 	SM.FE1          001F 	SM.FE2          0020 	SM.FE3          
0E60*	SM.FEHLZ        001B 	SM.FEND         0014 	SM.FESC         
0001 	SM.FET1         0000 	SM.FET2         000D 	SM.FINSLIN      
000B 	SM.FINSMOD      0D81*	SM.FKT          0CE0*	SM.FKTAB        
0D80*	SM.FKTABE       0005 	SM.FLEFT        0008 	SM.FLTAB        
0012 	SM.FM           0002 	SM.FNL          0019 	SM.FNQ          
0021 	SM.FP01         0022 	SM.FP02         0023 	SM.FP03         
0024 	SM.FP04         0025 	SM.FP05         0026 	SM.FP06         
0027 	SM.FP07         0028 	SM.FP08         0029 	SM.FP09         
002A 	SM.FP10         002B 	SM.FP11         002C 	SM.FP12         
002D 	SM.FP13         002E 	SM.FP14         002F 	SM.FP15         
0030 	SM.FP16         0031 	SM.FP17         0032 	SM.FP18         
0033 	SM.FP19         0034 	SM.FP20         0035 	SM.FP21         
0036 	SM.FP22         0037 	SM.FP23         0038 	SM.FP24         
0039 	SM.FP25         003A 	SM.FP26         003B 	SM.FP27         
003C 	SM.FP28         003D 	SM.FP29         003E 	SM.FP30         
003F 	SM.FP31         0040 	SM.FP32         0041 	SM.FP33         
0042 	SM.FP34         0043 	SM.FP35         0044 	SM.FP36         
'Symbolliste S1a'	MACRO-80 3.44	09-Dec-81	PAGE	S-3


0045 	SM.FP37         0046 	SM.FP38         0047 	SM.FP39         
0048 	SM.FP40         0049 	SM.FP41         004A 	SM.FP42         
004B 	SM.FP43         004C 	SM.FP44         004D 	SM.FP45         
004E 	SM.FP46         004F 	SM.FP47         0050 	SM.FP48         
0006 	SM.FPOS1        0004 	SM.FPQ          0013 	SM.FRESET       
0007 	SM.FRIGHT       000A 	SM.FRTAB        0D93*	SM.FSTAT        
001A 	SM.FSYS         0010 	SM.FTABL        000F 	SM.FTABS        
0009 	SM.FUP          0D92*	SM.GRZEI        0E64*	SM.IDAT         
0FFE 	SM.IMERK        0FFD 	SM.KGMER        0F69*	SM.KOMDO        
0028 	SM.LOE          000F 	SM.LOE1         0DC8*	SM.LZA          
0E14*	SM.LZN          0D91*	SM.MERK         0D95*	SM.MODE         
0DB0*	SM.NEWL         0E28*	SM.NUTZK        0E22*	SM.PARAM        
0E61*	SM.POS          0FF7 	SM.PTS          0E19*	SM.PTSA         
FC00 	SM.PTSC         0E17*	SM.PTSE         0E65*	SM.PUFFS        
0E54*	SM.PZAUS        0E56*	SM.PZEIN        0FF9 	SM.RST38        
0E63*	SM.SDAT         0DB9*	SM.SMAX         0DBF*	SM.SMAX2        
0FC0*	SM.SMEND        0DB7*	SM.SMIN         0DBD*	SM.SMIN2        
0DC1*	SM.SPANZ        0FFF 	SM.SPMER        0DB5*	SM.SPOS         
0DBB*	SM.SPOS2        0CE0 	SM.STACK        0E1E*	SM.START        
0D94*	SM.STAT         0DAA*	SM.TABU         0D9B*	SM.TABZ         
0D90*	SM.TC           0D80*	SM.TK           0DA7*	SM.UMERK        
0DA8*	SM.USCH         0D99*	SM.WEITE        0DC2*	SM.WINA         
0DC4*	SM.WINE         0E5C*	SM.Z1           0E5D*	SM.Z2           
0DC0*	SM.ZANZ         0E58*	SM.ZAUS         0E1B*	SM.ZEIAD        
0E5A*	SM.ZEIN         0F6A*	SM.ZEITK        0D96*	SM.ZEIZ         
0E1D*	SM.ZEIZ2        0DC9*	SM.ZKA          0E15*	SM.ZKN          
0DB8*	SM.ZMAX         0DBE*	SM.ZMAX2        0DB6*	SM.ZMIN         
0DBC*	SM.ZMIN2        0DB4*	SM.ZPOS         0DBA*	SM.ZPOS2        
0D8E*	SM.ZSMER        0D8F*	SM.ZSTC         02CF*	SY.ADDBL        
042C*	SY.AEIN         02D2*	SY.AMSZ         02D8*	SY.AMSZ1        
01B9*	SY.BILA1        01B6*	SY.BILAD        036E*	SY.BILO         
0291*	SY.BWSAF        02CC*	SY.BWSE         02C2*	SY.BWSL         
035B*	SY.CNLS         0365*	SY.CNOS         0356*	SY.CNRS         
0360*	SY.CNUS         02AA*	SY.CPOS         0368*	SY.CURS         
032B*	SY.DCPOS        02F6*	SY.DEC2         0426*	SY.DEL1         
0425*	SY.DEL2         041C*	SY.DELZL        034F*	SY.DESZ         
02EB*	SY.DSPOS        02DE*	SY.DZPOS        038B*	SY.FKTLA        
0324*	SY.ICPOS        0072*	SY.ICTC1        0074*	SY.ICTC2        
0076*	SY.ICTC3        0183*	SY.IFKT1        0190*	SY.IFKT2        
019B*	SY.IFKT3        01A5*	SY.IFKT4        031D*	SY.INC1         
0315*	SY.INC2         031B*	SY.INC3         031E*	SY.INC4         
015B*	SY.INFKT        0121*	SY.INI          012D*	SY.INI1         
0133*	SY.INI2         0136*	SY.INI3         0118*	SY.ININ1        
0118*	SY.ININ3        0143*	SY.INNMI        00CF*	SY.INRE         
00A0*	SY.INRE1        00B1*	SY.INRE2        0148*	SY.INSTB        
0153*	SY.INSTC        01B3*	SY.IO           030A*	SY.ISPOS        
0058*	SY.ISRA0        0070*	SY.ISRA3        02FD*	SY.IZPOS        
01C9*	SY.KOM          0221*	SY.KOM1         022D*	SY.KOM2         
033E*	SY.LCP1         0332*	SY.LCPOS        0008 	SY.LZSY1        
000E 	SY.LZSY2        000B 	SY.LZSY3        0008 	SY.LZSY4        
0415*	SY.MELD         040F*	SY.MELDE        03C0*	SY.MEML1        
03B7*	SY.MEMLA        0437*	SY.NL           0066*	SY.NMI          
00AD*	SY.OUTB1        02B4*	SY.POS1         02AD*	SY.POS3         
02B1*	SY.POS4         0299*	SY.POS5         02BF*	SY.POS7         
02B6*	SY.POSA         03EA*	SY.PRUEF        0273*	SY.QTABL        
03D0*	SY.RALO         03DB*	SY.RALO1        03F1*	SY.RALO2        
0407*	SY.RAMPR        0211*	SY.RESC         021E*	SY.RESC1        
4036*	SY.RESCG        0010*	SY.RST10        0018*	SY.RST18        
0020*	SY.RST20        0028*	SY.RST28        0030*	SY.RST30        
0038*	SY.RST38        0008*	SY.RST8         01D7*	SY.SETC         
01F5*	SY.SETC1        4030*	SY.SETCG        01FA*	SY.SETCHL       
020A*	SY.SETCHL1      020E*	SY.SETCHL2      4033*	SY.SETCHLG      
0296*	SY.SPPOF        02BC*	SY.SPPOS        044A*	SY.SUCH1        
0448*	SY.SUCH2        0443*	SY.SUCHE        000B*	SY.SYSTB        
0480*	SY.SZA1         047C*	SY.SZAHL        046F*	SY.SZEI         
0472*	SY.SZEI1        0479*	SY.SZEI2        0474*	SY.SZEI3        
0475*	SY.SZEI4        0465*	SY.VERG1        046D*	SY.VERG2        
0464*	SY.VERGL        048C*	SY.ZAHL         02A0*	SY.ZLPOF        
02A5*	SY.ZLPOS        0246*	SY.ZSY1         024F*	SY.ZSY2         
025E*	SY.ZSY3         026A*	SY.ZSY4         0489*	SY.ZZA1         
0485*	SY.ZZAHL        4136*	TA.AB01         4393*	TA.AB1          
4387*	TA.AB2          413F*	TA.ABF1         41C5*	TA.ABF10        
41E3*	TA.ABF11        41E7*	TA.ABF12        41EE*	TA.ABF13        
4128*	TA.ABF14        4122*	TA.ABF15        4126*	TA.ABF16        
414F*	TA.ABF2         41F9*	TA.ABF20        4152*	TA.ABF3         
41A7*	TA.ABF6         41AF*	TA.ABF7         41B5*	TA.ABF8         
41BF*	TA.ABF9         4364*	TA.ABFR         4026*	TA.ABFR1        
4398*	TA.ABFR2        422B*	TA.ABFR9        4271*	TA.BBB          
43B4*	TA.CT1          43A8*	TA.CTRL         43BE*	TA.CTRL0        
43C5*	TA.CTRL1        43CF*	TA.CTRL2        429E*	TA.E0IN         
421F*	TA.EAW2         4223*	TA.EAW3         4226*	TA.EAW5         
4236*	TA.EW1          4297*	TA.FKT1         428B*	TA.FKT2         
4286*	TA.HZE          4258*	TA.INSMD        4261*	TA.INSME        
'Symbolliste S1a'	MACRO-80 3.44	09-Dec-81	PAGE	S-4


4262*	TA.INSML        41A6*	TA.MM           41A4*	TA.MM1          
42C2*	TA.STAS1        4253*	TA.STEU1        4249*	TA.STEUT        
4284*	TA.STZ          42D6*	TA.TAB1         4336*	TA.TAB2         
434E*	TA.TAB3         435A*	TA.TAB4         4100*	TA.TAST         
4020*	TA.TAST1        41CF*	TA.TFE          4023*	TA.TFE1         
41D5*	TA.TFE2         4164*	TA.WART         4166*	TA.WART1        
4192*	TA.WART3        4198*	TA.WART4        0002 	TR.ANST         
00A0 	TR.ATAST        0001 	TR.CTR          43DB*	TR.PIOP2        
43D9*	TR.PIOPR        43F3*	TR.PIOU2        43F3*	TR.PIOUM        
446C*	TR.PST          4018*	TR.PSTAS        4003*	TR.TA1          
4006*	TR.TA2          4009*	TR.TA3          43F4*	TR.TA31         
43F6*	TR.TA32         0002 	TR.TAST         4015*	TR.TBEL         
4012*	TR.TEM          400C*	TR.TFE          4402*	TR.TFE1         
4404*	TR.TFE2         400F*	TR.TIM          4000*	TR.TINIT        
4412*	TR.TTA11        4414*	TR.TTA12        441B*	TR.TTA21        
441D*	TR.TTA22        4447*	TR.TTBL1        4449*	TR.TTBL2        
4441*	TR.TTEM1        4443*	TR.TTEM2        4445*	TR.TTEM3        
4421*	TR.TTIM1        4423*	TR.TTIM2        4436*	TR.TTIM3        
4433*	TR.TTIM4        5699 	UC.CVABX        56C8 	UC.CVAXB        
571C 	UC.CVBD2        56A3 	UC.CVBX         5761 	UC.CVDB         
595C 	UR.MIMO         



No Fatal error(s)


